/**
 * Copyright (c) 2024 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as s,h as i,g as h}from"./p-b0ab226b.js";import{g as e,a,n as r,l as o,o as l}from"./p-42dcf457.js";import{p as c,s as n}from"./p-4e66c6e1.js";import{v as u}from"./p-b5f7528a.js";import{U as d,s as f,e as p}from"./p-5fcd3c02.js";import{i as g}from"./p-6e7316e2.js";import{m as y}from"./p-f9c89fe4.js";import{m}from"./p-e1d72334.js";import{c as b}from"./p-3f5e41ff.js";function v(){var t=0,s=1,i,h,e,r,o=a,l=false,c;function n(t){return isNaN(t=+t)?c:o(e===0?.5:(t=(r(t)-i)*e,l?Math.max(0,Math.min(1,t)):t))}n.domain=function(a){return arguments.length?(i=r(t=+a[0]),h=r(s=+a[1]),e=i===h?0:1/(h-i),n):[t,s]};n.clamp=function(t){return arguments.length?(l=!!t,n):l};n.interpolator=function(t){return arguments.length?(o=t,n):o};n.unknown=function(t){return arguments.length?(c=t,n):c};return function(a){r=a,i=a(t),h=a(s),e=i===h?0:1/(h-i);return n}}function x(t,s){return s.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function A(){var t=c(v());t.copy=function(){return x(t,A()).exponent(t.exponent())};return e.apply(t,arguments)}function W(){return A.apply(null,arguments).exponent(.5)}const{propDefaultValues:k}=d;class w{}w.mainTitle="Scatter Plot Title";w.subTitle=k.subTitle.text;w.height=300;w.width=650;w.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};w.padding={top:20,bottom:50,right:50,left:60};w.localization=k.localization;w.xAccessor="metric";w.yAccessor="value";w.groupAccessor="category";w.sizeConfig=k.sizeConfig;w.accessibility=k.accessibility;w.animationConfig=k.animationConfig;w.highestHeadingLevel=k.highestHeadingLevel;w.sortOrder=k.sortOrder;w.xAxis=k.xAxis;w.yAxis=k.yAxis;w.showBaselineX=k.showBaselineTrue;w.showBaselineY=k.showBaselineFalse;w.colorPalette=k.colorPaletteCategorical;w.dotRadius=k.dotRadius6;w.dotOpacity=k.dotOpacity;w.dotSymbols=k.dotSymbols;w.referenceStyle=k.referenceStyle;w.showFitLine=k.showFitLine;w.fitLineStyle=k.referenceStyle;w.cursor=k.cursor;w.hoverOpacity=k.hoverOpacity;w.hoverStyle=k.symbolHoverStyle;w.clickStyle=k.symbolClickStyle;w.dataLabel=k.dataLabel;w.legend=k.categoryLegend;w.tooltipLabel=k.tooltipLabel;w.showTooltip=k.showTooltip;w.suppressEvents=k.suppressEvents;w.referenceLines=k.referenceLines;w.annotations=k.annotations;w.clickHighlight=k.clickHighlight;const S=".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}scatter-plot .annotations{pointer-events:none}scatter-plot .annotations .handle{pointer-events:all}scatter-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}scatter-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}scatter-plot .hidden{display:none}scatter-plot .axis{font-size:12px}scatter-plot .axis text{font:0.65rem;fill:#767676}scatter-plot .axis-label{text-anchor:middle;font:1rem sans-serif}scatter-plot .axis-mark path{color:#949494;stroke-width:0px}scatter-plot .axis path{color:#949494;stroke-width:2px}scatter-plot .axis-mark path{stroke:#767676;stroke-opacity:1}scatter-plot .grid line{stroke:#c9c9c9;stroke-opacity:0.6}scatter-plot .grid path{stroke-width:0;stroke:#767676}scatter-plot .scatter-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}scatter-plot .scatter-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}";const L=S;const{getGlobalInstances:T,configLocalization:D,getActiveLanguageString:C,getAccessibleStrokes:O,ensureTextContrast:z,createTextStrokeFilter:I,initializeDescriptionRoot:E,initializeElementAccess:N,setElementFocusHandler:F,setElementAccessID:P,setAccessibilityController:K,hideNonessentialGroups:M,setAccessTitle:j,setAccessSubtitle:G,setAccessLongDescription:H,setAccessExecutiveSummary:V,setAccessPurpose:q,setAccessContext:B,setAccessStatistics:$,setAccessChartCounts:R,setAccessXAxis:X,setAccessYAxis:Y,setAccessStructure:_,setAccessAnnotation:U,retainAccessFocus:Z,checkAccessFocus:J,setElementInteractionAccessState:Q,setAccessibilityDescriptionWidth:tt,annotate:st,chartAccessors:it,checkInteraction:ht,checkClicked:et,checkHovered:at,convertVisaColor:rt,drawAxis:ot,drawGrid:lt,drawLegend:ct,setLegendInteractionState:nt,drawTooltip:ut,formatDataLabel:dt,getColors:ft,getLicenses:pt,getPadding:gt,getScopedData:yt,initTooltipStyle:mt,leastSquares:bt,overrideTitleTooltip:vt,placeDataLabels:xt,scopeDataKeys:At,symbols:Wt,transitionEndAll:kt,visaColors:wt,validateAccessibilityProps:St,validateLocalizationProps:Lt,findTagLevel:Tt,prepareRenderChange:Dt,roundTo:Ct,resolveLabelCollision:Ot,setSubTitle:zt,setReferenceLine:It}=d;const Et=class{constructor(i){t(this,i);this.clickEvent=s(this,"clickEvent",7);this.hoverEvent=s(this,"hoverEvent",7);this.mouseOutEvent=s(this,"mouseOutEvent",7);this.initialLoadEvent=s(this,"initialLoadEvent",7);this.initialLoadEndEvent=s(this,"initialLoadEndEvent",7);this.drawStartEvent=s(this,"drawStartEvent",7);this.drawEndEvent=s(this,"drawEndEvent",7);this.transitionEndEvent=s(this,"transitionEndEvent",7);this.shouldValidateAccessibility=true;this.shouldValidateLocalization=true;this.updated=true;this.shouldUpdateAnnotations=false;this.shouldResetRoot=false;this.shouldUpdateTableData=false;this.shouldSetColors=false;this.shouldSetSubTitle=false;this.shouldUpdateData=false;this.shouldUpdateScales=false;this.shouldValidate=false;this.shouldUpdateLayout=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldUpdateGeometries=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateBaselineX=false;this.shouldUpdateBaselineY=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldUpdateLegend=false;this.shouldUpdateReferenceLines=false;this.shouldDrawFitLine=false;this.shouldUpdateLabels=false;this.shouldAddStrokeUnder=false;this.shouldValidateClickStyle=false;this.shouldValidateHoverStyle=false;this.shouldValidateInteractionKeys=false;this.shouldValidateDataLabelAccessor=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldDrawInteractionState=false;this.shouldSetDotRadius=false;this.shouldBindInteractivity=false;this.shouldUpdateLegendInteractivity=false;this.shouldSetLegendCursor=false;this.shouldSetLabelOpacity=false;this.shouldSetPointOpacity=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityAttributes=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetStrokes=false;this.shouldSetLocalizationConfig=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.setColors=()=>{this.rawColors=this.colors?rt(this.colors):ft(this.colorPalette,this.nest.length||1);this.textColorArr=[];let t=this.rawColors;function s(t){const s=O(t);return s.length===2?s[1]:s[0]}if(!this.accessibility.hideStrokes){this.strokes={};if(this.innerClickStyle.color){const t=wt[this.innerClickStyle.color]||this.innerClickStyle.color;this.strokes[t.toLowerCase()]=s(t)}if(this.innerHoverStyle.color){const t=wt[this.innerHoverStyle.color]||this.innerHoverStyle.color;this.strokes[t.toLowerCase()]=s(t)}t=[]}this.rawColors.forEach((i=>{if(!this.accessibility.hideStrokes){const h=s(i);this.strokes[i.toLowerCase()]=h;t.push(h)}this.textColorArr.push(z(i,"#ffffff",4.5))}));if(this.innerClickStyle.color){const t=wt[this.innerClickStyle.color]||this.innerClickStyle.color;this.textColorArr.push(z(t,"#ffffff",4.5))}if(this.innerHoverStyle.color){const t=wt[this.innerHoverStyle.color]||this.innerHoverStyle.color;this.textColorArr.push(z(t,"#ffffff",4.5))}this.colorArr=t};this.textFillHandler=t=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&et(t,this.clickHighlight,this.innerInteractionKeys);const i=this.hoverHighlight&&at(t,this.hoverHighlight,this.innerInteractionKeys);const h=s?wt[this.innerClickStyle.color]||this.innerClickStyle.color||(this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0]):i?wt[this.innerHoverStyle.color]||this.innerHoverStyle.color||(this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0]):this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0];const e=this.textColor(h);return e};this.handleDotStyle=(t,s,i)=>{let h=null;const e=this.clickHighlight&&this.clickHighlight.length>0&&et(t,this.clickHighlight,this.innerInteractionKeys);const a=this.hoverHighlight&&at(t,this.hoverHighlight,this.innerInteractionKeys);const r=e?wt[this.innerClickStyle.color]||this.innerClickStyle.color||(this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0]):a?wt[this.innerHoverStyle.color]||this.innerHoverStyle.color||(this.groupAccessor?this.dotColor(t[this.groupAccessor]):this.rawColors[0]):this.groupAccessor&&this.sizeConfig.dualEncodeColor?W([Math.max(0,this.sizeMin),this.sizeMax],g("#fff",this.dotColor(t[this.groupAccessor])))(t[this.sizeConfig.sizeAccessor])||this.dotColor(t[this.groupAccessor]):this.groupAccessor&&this.sizeConfig&&!this.sizeConfig.dualEncodeColor?this.dotColor(t[this.groupAccessor]):!this.groupAccessor&&this.sizeConfig.dualEncodeColor?W([Math.max(0,this.sizeMin),this.sizeMax],g("#fff",this.rawColors[0]))(t[this.sizeConfig.sizeAccessor])||this.rawColors[0]:this.rawColors[0];if(!this.accessibility.hideStrokes){const o=(e?parseFloat(this.innerClickStyle.strokeWidth)||1:a?parseFloat(this.innerHoverStyle.strokeWidth)||1:1)/(this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""]["toCircle"])||this.dotRadius||1);f(i[s]).attr("stroke-width",o);h=this.strokes[e||a?r.toLowerCase():this.groupAccessor?this.dotColor(t[this.groupAccessor]).toLowerCase():this.rawColors[0].toLowerCase()]}f(i[s]).attr("fill",r);return h};this.localization=w.localization;this.mainTitle=w.mainTitle;this.subTitle=w.subTitle;this.height=w.height;this.width=w.width;this.margin=w.margin;this.padding=w.padding;this.highestHeadingLevel=w.highestHeadingLevel;this.data=undefined;this.uniqueID=undefined;this.xAccessor=w.xAccessor;this.yAccessor=w.yAccessor;this.sizeConfig=w.sizeConfig;this.groupAccessor=w.groupAccessor;this.xAxis=w.xAxis;this.yAxis=w.yAxis;this.showBaselineX=w.showBaselineX;this.showBaselineY=w.showBaselineY;this.colorPalette=w.colorPalette;this.colors=undefined;this.dotRadius=w.dotRadius;this.dotOpacity=w.dotOpacity;this.hoverStyle=w.hoverStyle;this.clickStyle=w.clickStyle;this.referenceStyle=w.referenceStyle;this.cursor=w.cursor;this.hoverOpacity=w.hoverOpacity;this.animationConfig=w.animationConfig;this.fitLineStyle=w.fitLineStyle;this.dotSymbols=w.dotSymbols;this.dataLabel=w.dataLabel;this.dataKeyNames=undefined;this.showTooltip=w.showTooltip;this.tooltipLabel=w.tooltipLabel;this.accessibility=w.accessibility;this.legend=w.legend;this.annotations=w.annotations;this.xMaxValueOverride=undefined;this.xMinValueOverride=undefined;this.yMaxValueOverride=undefined;this.yMinValueOverride=undefined;this.showFitLine=w.showFitLine;this.referenceLines=w.referenceLines;this.suppressEvents=w.suppressEvents;this.hoverHighlight=undefined;this.clickHighlight=w.clickHighlight;this.interactionKeys=undefined;this.unitTest=false}dataWatcher(t,s){this.updated=true;this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateScales=true;this.shouldDrawInteractionState=true;this.shouldSetPointOpacity=true;this.shouldEnterUpdateExit=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldAddStrokeUnder=true;this.shouldDrawFitLine=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true}idWatcher(t,s){console.error("Change detected in prop uniqueID from value "+s+" to value "+t+". This prop cannot be changed after component has loaded.")}headingWatcher(t,s){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldSetAnnotationAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}titleWatcher(t,s){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}subtitleWatcher(t,s){this.shouldSetSubTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true}layoutWatcher(t,s){this.shouldUpdateLayout=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldDrawFitLine=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true}xAccessorWatcher(t,s){this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateLabels=true;this.shouldDrawFitLine=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true}yAccessorWatcher(t,s){this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldDrawFitLine=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true}sizeConfigWatcher(t,s){this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldDrawFitLine=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateTableData=true}groupAccessorWatcher(t,s){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldSetPointOpacity=true;this.shouldValidateHoverStyle=true;this.shouldValidateClickStyle=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetGroupAccessibilityAttributes=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}}xAxisWatcher(t,s){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;const i=t&&t.gridVisible;const h=s&&s.gridVisible;const e=t&&t.tickInterval?t.tickInterval:0;const a=s&&s.tickInterval?s.tickInterval:0;if(i!==h||e!==a){this.shouldUpdateXGrid=true}}yAxisWatcher(t,s){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;const i=t&&t.gridVisible;const h=s&&s.gridVisible;const e=t&&t.tickInterval?t.tickInterval:0;const a=s&&s.tickInterval?s.tickInterval:0;if(i!==h||e!==a){this.shouldUpdateYGrid=true}}showBaselineXWatcher(t,s){this.shouldUpdateBaselineX=true}showBaselineYWatcher(t,s){this.shouldUpdateBaselineY=true}colorsWatcher(t,s){this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true}dotRadiusWatcher(t,s){this.shouldValidateHoverStyle=true;this.shouldValidateClickStyle=true;this.shouldSetDotRadius=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true}dotOpacityWatcher(t,s){this.shouldSetPointOpacity=true}dotSymbolsWatcher(t,s){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true}hoverStyleWatcher(t,s){this.shouldSetColors=true;this.shouldSetPointOpacity=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldValidateHoverStyle=true}clickStyleWatcher(t,s){this.shouldSetColors=true;this.shouldSetPointOpacity=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldValidateClickStyle=true}referenceWatcher(t,s){this.shouldUpdateReferenceLines=true}fitLineStyleWatcher(t,s){this.shouldDrawFitLine=true}cursorWatcher(t,s){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true}hoverOpacityWatcher(t,s){this.shouldSetPointOpacity=true;this.shouldSetLabelOpacity=true}labelWatcher(t,s){this.shouldUpdateLabels=true;this.shouldUpdateGeometries=true;this.shouldUpdateTableData=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true;const i=t&&t.visible;const h=s&&s.visible;const e=t&&t.labelAccessor?t.labelAccessor:false;const a=s&&s.labelAccessor?s.labelAccessor:false;const r=t&&t.format?t.format:false;const o=s&&s.format?s.format:false;if(i!==h){this.shouldSetLabelOpacity=true}if(e!==a||r!==o){this.shouldValidateDataLabelAccessor=true}}showTooltipWatcher(t,s){this.shouldDrawInteractionState=true}tooltipLabelWatcher(t,s){this.shouldUpdateTableData=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true}legendWatcher(t,s){this.shouldUpdateLegend=true;const i=t&&t.interactive;const h=s&&s.interactive;if(i!==h){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}}suppressWatcher(t,s){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldUpdateLegend=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}annotationsWatcher(t,s){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true}accessibilityWatcher(t,s){this.shouldValidate=true;const i=t&&t.title?t.title:false;const h=s&&s.title?s.title:false;if(i!==h){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}const e=t&&t.executiveSummary?t.executiveSummary:false;const a=s&&s.executiveSummary?s.executiveSummary:false;if(e!==a){this.shouldSetChartAccessibilityExecutiveSummary=true}const r=t&&t.purpose?t.purpose:false;const o=s&&s.purpose?s.purpose:false;if(r!==o){this.shouldSetChartAccessibilityPurpose=true}const l=t&&t.longDescription?t.longDescription:false;const c=s&&s.longDescription?s.longDescription:false;if(l!==c){this.shouldSetChartAccessibilityLongDescription=true}const n=t&&t.contextExplanation?t.contextExplanation:false;const u=s&&s.contextExplanation?s.contextExplanation:false;if(n!==u){this.shouldSetChartAccessibilityContext=true}const d=t&&t.statisticalNotes?t.statisticalNotes:false;const f=s&&s.statisticalNotes?s.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}const p=t&&t.structureNotes?t.structureNotes:false;const g=s&&s.structureNotes?s.structureNotes:false;if(p!==g){this.shouldSetChartAccessibilityStructureNotes=true}const y=t&&t.includeDataKeyNames;const m=s&&s.includeDataKeyNames;const b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;const v=s&&s.elementDescriptionAccessor?s.elementDescriptionAccessor:false;if(y!==m||b!==v){if(y!==m){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}const x=t&&t.hideStrokes?t.hideStrokes:false;const A=s&&s.hideStrokes?s.hideStrokes:false;if(x!==A){this.shouldSetColors=true;this.shouldDrawInteractionState=true}const W=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;const k=s&&s.keyboardNavConfig&&s.keyboardNavConfig.disabled?s.keyboardNavConfig.disabled:false;const w=t&&t.elementsAreInterface?t.elementsAreInterface:false;const S=s&&s.elementsAreInterface?s.elementsAreInterface:false;if(W!==k||w!==S){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(w!==S){this.shouldSetSelectionClass=true}}localizationWatcher(t,s){this.shouldValidate=true;const i=t&&t.language?t.language:false;const h=s&&s.language?s.language:false;if(i!==h){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldValidateDataLabelAccessor=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}const e=t&&t.numeralLocale?t.numeralLocale:false;const a=s&&s.numeralLocale?s.numeralLocale:false;if(e!==a){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldValidateDataLabelAccessor=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}}xValueOverrideWatcher(t,s){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateLabels=true;this.shouldDrawFitLine=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateAnnotations=true}yValueOverrideWatcher(t,s){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldDrawFitLine=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true}showFitLineWatcher(t,s){this.shouldDrawFitLine=true}clickWatcher(t,s){this.shouldSetPointOpacity=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true}hoverWatcher(t,s){this.shouldSetPointOpacity=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true}interactionWatcher(t,s){this.shouldValidateInteractionKeys=true;this.shouldSetPointOpacity=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true;this.shouldBindInteractivity=true;this.shouldUpdateLegendInteractivity=true}dataKeyNamesWatcher(t,s){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetGeometryAriaLabels=true}unitTestWatcher(t,s){this.shouldSetTestingAttributes=true}componentWillLoad(){const t=this.uniqueID||"scatter-plot-"+u();this.initialLoadEvent.emit({chartID:t});return new Promise((s=>{this.duration=0;this.defaults=true;this.chartID=t;this.scatterChartEl.id=this.chartID;this.setLocalizationConfig();this.setTagLevels();this.prepareData();this.setLayoutData();this.validateClickStyle();this.validateHoverStyle();this.setColors();this.prepareScales();this.validateInteractionKeys();this.validateDataLabelAccessor();this.setTableData();this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();s("component will load")}))}componentWillUpdate(){return new Promise((t=>{t("component will update")}))}componentDidLoad(){return new Promise((t=>{this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.renderRootElements();this.setTooltipInitialStyle();this.setChartDescriptionWrapper();this.setChartAccessibilityTitle();this.setChartAccessibilitySubtitle();this.setChartAccessibilityLongDescription();this.setChartAccessibilityExecutiveSummary();this.setChartAccessibilityPurpose();this.setChartAccessibilityContext();this.setChartAccessibilityStatisticalNotes();this.setChartAccessibilityStructureNotes();this.setParentSVGAccessibility();this.reSetRoot();this.setStrokes();this.setSubTitleElements();this.drawXGrid();this.drawYGrid();this.setGlobalSelections();this.setTestingAttributes();this.enterPointGroups();this.exitPointGroups();this.enterDataLabels();this.updateDataLabels();this.exitDataLabels();this.setPointOpacity();this.drawPointGroups();this.setChartCountAccessibility();this.setGeometryAccessibilityAttributes();this.setGeometryAriaLabels();this.drawLegendElements();this.drawDataLabels();this.addStrokeUnder();this.drawFitLine();this.drawReferenceLines();this.setSelectedClass();this.updateCursor();this.setLegendCursor();this.bindInteractivity();this.bindLegendInteractivity();this.drawAnnotations();this.setAnnotationAccessibility();this.drawXAxis();this.setXAxisAccessibility();this.drawYAxis();this.setYAxisAccessibility();this.drawBaselineX();this.drawBaselineY();this.onChangeHandler();M(this.root.node(),this.dotG.node());this.setGroupAccessibilityID();this.defaults=false;t("component did load")})).then((()=>this.initialLoadEndEvent.emit({chartID:this.chartID})))}componentDidUpdate(){return new Promise((t=>{this.duration=!this.animationConfig||!this.animationConfig.disabled?750:0;if(this.shouldUpdateDescriptionWrapper){this.setChartDescriptionWrapper();this.shouldUpdateDescriptionWrapper=false}if(this.shouldSetChartAccessibilityCount){this.setChartCountAccessibility();this.shouldSetChartAccessibilityCount=false}if(this.shouldSetChartAccessibilityTitle){this.setChartAccessibilityTitle();this.shouldSetChartAccessibilityTitle=false}if(this.shouldSetChartAccessibilitySubtitle){this.setChartAccessibilitySubtitle();this.shouldSetChartAccessibilitySubtitle=false}if(this.shouldSetChartAccessibilityLongDescription){this.setChartAccessibilityLongDescription();this.shouldSetChartAccessibilityLongDescription=false}if(this.shouldSetChartAccessibilityExecutiveSummary){this.setChartAccessibilityExecutiveSummary();this.shouldSetChartAccessibilityExecutiveSummary=false}if(this.shouldSetChartAccessibilityPurpose){this.setChartAccessibilityPurpose();this.shouldSetChartAccessibilityPurpose=false}if(this.shouldSetChartAccessibilityContext){this.setChartAccessibilityContext();this.shouldSetChartAccessibilityContext=false}if(this.shouldSetChartAccessibilityStatisticalNotes){this.setChartAccessibilityStatisticalNotes();this.shouldSetChartAccessibilityStatisticalNotes=false}if(this.shouldSetChartAccessibilityStructureNotes){this.setChartAccessibilityStructureNotes();this.shouldSetChartAccessibilityStructureNotes=false}if(this.shouldSetParentSVGAccessibility){this.setParentSVGAccessibility();this.shouldSetParentSVGAccessibility=false}if(this.shouldResetRoot){this.reSetRoot();this.shouldResetRoot=false}if(this.shouldSetStrokes){this.setStrokes();this.shouldSetStrokes=false}if(this.shouldSetGlobalSelections){this.setGlobalSelections();this.shouldSetGlobalSelections=false}if(this.shouldSetTestingAttributes){this.setTestingAttributes();this.shouldSetTestingAttributes=false}if(this.shouldSetSubTitle){this.setSubTitleElements();this.shouldSetSubTitle=false}if(this.shouldUpdateXGrid){this.drawXGrid();this.shouldUpdateXGrid=false}if(this.shouldUpdateYGrid){this.drawYGrid();this.shouldUpdateYGrid=false}if(this.shouldEnterUpdateExit){this.enterPointGroups();this.exitPointGroups();this.enterDataLabels();this.updateDataLabels();this.exitDataLabels();this.shouldEnterUpdateExit=false}if(this.shouldUpdateGeometries){this.drawPointGroups();this.shouldUpdateGeometries=false}if(this.shouldSetDotRadius){this.setDotRadius();this.shouldSetDotRadius=false}if(this.shouldSetGeometryAccessibilityAttributes){this.setGeometryAccessibilityAttributes();this.shouldSetGeometryAccessibilityAttributes=false}if(this.shouldSetGeometryAriaLabels){this.setGeometryAriaLabels();this.shouldSetGeometryAriaLabels=false}if(this.shouldSetGroupAccessibilityLabel){this.setGroupAccessibilityID();this.shouldSetGroupAccessibilityLabel=false}if(this.shouldUpdateLegend){this.drawLegendElements();this.shouldUpdateLegend=false}if(this.shouldUpdateLabels){this.drawDataLabels();this.shouldUpdateLabels=false}if(this.addStrokeUnder){this.addStrokeUnder();this.shouldAddStrokeUnder=false}if(this.shouldDrawFitLine){this.drawFitLine();this.shouldDrawFitLine=false}if(this.shouldUpdateReferenceLines){this.drawReferenceLines();this.shouldUpdateReferenceLines=false}if(this.shouldDrawInteractionState){this.updateInteractionState();this.shouldDrawInteractionState=false}if(this.shouldSetPointOpacity){this.setPointOpacity();this.shouldSetPointOpacity=false}if(this.shouldSetLabelOpacity){this.setLabelOpacity();this.shouldSetLabelOpacity=false}if(this.shouldSetSelectionClass){this.setSelectedClass();this.shouldSetSelectionClass=false}if(this.shouldUpdateCursor){this.updateCursor();this.shouldUpdateCursor=false}if(this.shouldUpdateLegendInteractivity){this.bindLegendInteractivity();this.shouldUpdateLegendInteractivity=false}if(this.shouldSetLegendCursor){this.setLegendCursor();this.shouldSetLegendCursor=false}if(this.shouldBindInteractivity){this.bindInteractivity();this.shouldBindInteractivity=false}if(this.shouldUpdateAnnotations){this.drawAnnotations();this.shouldUpdateAnnotations=false}if(this.shouldSetAnnotationAccessibility){this.setAnnotationAccessibility();this.shouldSetAnnotationAccessibility=false}if(this.shouldUpdateXAxis){this.drawXAxis();this.shouldUpdateXAxis=false}if(this.shouldSetXAxisAccessibility){this.setXAxisAccessibility();this.shouldSetXAxisAccessibility=false}if(this.shouldUpdateYAxis){this.drawYAxis();this.shouldUpdateYAxis=false}if(this.shouldSetYAxisAccessibility){this.setYAxisAccessibility();this.shouldSetYAxisAccessibility=false}if(this.shouldUpdateBaselineX){this.drawBaselineX();this.shouldUpdateBaselineX=false}if(this.shouldUpdateBaselineY){this.drawBaselineY();this.shouldUpdateBaselineY=false}this.onChangeHandler();t("component did update")})).then((()=>this.drawEndEvent.emit({chartID:this.chartID})))}shouldValidateLocalizationProps(){const t=T();const s=t.i18Next.language;const i=t.i18Next.getResourceBundle(s);const h=t.numeral.localeData();if(this.shouldValidateLocalization&&!this.localization.skipValidation){this.shouldValidateLocalization=false;Lt(this.chartID,Object.assign(Object.assign({},this.localization),{language:i,numeralLocale:h}))}}shouldValidateAccessibilityProps(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;St(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickEvent:this.suppressEvents?undefined:this.clickEvent.emit}})}}setLayoutData(){this.padding=typeof this.padding==="string"?gt(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:this.groupAccessor?[this.groupAccessor]:[this.xAccessor,this.yAccessor];this.groupInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.groupAccessor}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.sizeConfig.sizeAccessor?this.sizeConfig.sizeAccessor:this.yAccessor;this.innerLabelFormat=this.dataLabel.labelAccessor?this.dataLabel.format:this.sizeConfig.sizeAccessor?this.sizeConfig.format:this.yAxis.format}innerScopeDataKeys(){const t=[];it.singleAccessors.forEach((s=>{if(this[s]&&y(this.data,(t=>t[this[s]]))!==undefined){t.push(s)}}));const s=Object.assign(Object.assign({},it),{singleAccessors:t});return At(this,s,"scatter-plot")}setTableData(){const t=this.innerScopeDataKeys();this.tableData=yt(this.data,t);this.tableColumns=Object.keys(t)}getLanguageString(){return C(this.localization)}setLocalizationConfig(){D(this.localization)}prepareData(){this.nest=this.groupAccessor?r().key((t=>t[this.groupAccessor])).entries(this.data):[{key:"",values:this.data}]}setSubTitleElements(){zt({root:this.subTitleG,subTitle:this.subTitle})}prepareScales(){const t=y(this.data,(t=>parseFloat(t[this.xAccessor])));const s=m(this.data,(t=>parseFloat(t[this.xAccessor])));const i=y(this.data,(t=>parseFloat(t[this.yAccessor])));const h=m(this.data,(t=>parseFloat(t[this.yAccessor])));const e=y(this.data,(t=>parseFloat(t[this.sizeConfig.sizeAccessor])));const a=m(this.data,(t=>parseFloat(t[this.sizeConfig.sizeAccessor])));this.xMin=this.xMinValueOverride===0?0:this.xMinValueOverride||t-(s-t)*.1;this.xMax=this.xMaxValueOverride===0?0:this.xMaxValueOverride||s+(s-t)*.1;this.yMin=this.yMinValueOverride===0?0:this.yMinValueOverride||i-(h-i)*.1;this.yMax=this.yMaxValueOverride===0?0:this.yMaxValueOverride||h+(h-i)*.1;const r=this.sizeConfig.minValueOverride||this.sizeConfig.minValueOverride===0;const c=this.sizeConfig.maxValueOverride||this.sizeConfig.maxValueOverride===0;this.sizeMin=r&&this.sizeConfig.minValueOverride<e?this.sizeConfig.minValueOverride:e;this.sizeMax=c&&this.sizeConfig.maxValueOverride>a?this.sizeConfig.maxValueOverride:a;const u=[];this.nest.map((t=>{u.push(t.key)}));if(this.xMax===this.xMin){this.xMax=Math.max(0,this.xMax);this.xMin=Math.min(0,this.xMin)}if(this.yMax===this.yMin){this.yMax=Math.max(0,this.yMax);this.yMin=Math.min(0,this.yMin)}if(this.sizeMax===this.sizeMin){this.sizeMax=Math.max(0,this.sizeMax);this.sizeMin=Math.min(0,this.sizeMin)}this.x=o().domain([this.xMin,this.xMax]).range([0,this.innerPaddedWidth]);this.y=o().domain([this.yMin,this.yMax]).range([this.innerPaddedHeight,0]);this.size=n().domain([this.sizeMin,this.sizeMax]).range([this.sizeConfig.minSizeOverride||this.sizeConfig.minSizeOverride===0?this.sizeConfig.minSizeOverride:w.dotRadius,this.sizeConfig.maxSizeOverride||this.sizeConfig.maxSizeOverride===0?this.sizeConfig.maxSizeOverride:(this.innerPaddedWidth+this.innerPaddedHeight)/2.5/10]);this.symbol=l().domain(u).range(this.dotSymbols);this.shapeArea={};u.forEach((t=>{let s=[];let i=Wt[this.symbol(t)].general;i.split(/[A-Z]/g).forEach((t=>{if(t.split(",").length===2){s.push(t.split(","))}}));let h=[];let e=[];s.forEach(((t,i)=>{if(s[i+1]){h.push(parseFloat(t[0])*parseFloat(s[i+1][1]));e.push(parseFloat(t[1])*parseFloat(s[i+1][0]))}else{h.push(parseFloat(t[0])*parseFloat(s[0][1]));e.push(parseFloat(t[1])*parseFloat(s[0][0]))}}));let a=(h.reduce(((t,s)=>t+s))-e.reduce(((t,s)=>t+s)))/2;this.shapeArea[t]={shape:this.symbol(t),area:a,toCircle:Math.PI/a}}));this.dotColor=l().domain(u).range(this.rawColors);const d=[...this.rawColors];if(this.innerClickStyle.color){d.push(wt[this.innerClickStyle.color]||this.innerClickStyle.color)}if(this.innerHoverStyle.color){d.push(wt[this.innerHoverStyle.color]||this.innerHoverStyle.color)}this.textColor=l().domain(d).range(this.textColorArr)}validateHoverStyle(){this.innerHoverStyle=this.hoverStyle?{color:this.hoverStyle.color,strokeWidth:this.hoverStyle.strokeWidth||2}:{strokeWidth:2}}validateClickStyle(){this.innerClickStyle=this.clickStyle?{color:this.clickStyle.color,strokeWidth:this.clickStyle.strokeWidth||3}:{strokeWidth:3}}setStrokes(){this.textFilter=I({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.filter=!this.accessibility.hideStrokes?I({root:this.svg.node(),id:this.chartID,color:"#ffffff",strokeSizeOverride:1/(this.dotRadius||1)}):null}addStrokeUnder(){this.updateLabels.attr("filter",this.textFilter);this.updatePoints.attr("filter",((t,s,i)=>!f(i[s]).classed("moving")?this.filter:null))}updateStrokeWidth(){this.updatePoints.attr("stroke",this.handleDotStyle)}renderRootElements(){this.svg=f(this.scatterChartEl).select(".visa-viz-d3-scatter-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","scatter-grid-group");this.dotG=this.rootG.append("g").attr("class","scatter-dot-group").attr("isolation","isolate").style("isolation","isolate");this.fitLine=this.rootG.append("g").attr("class","scatter-fit-line-group");this.labelG=this.rootG.append("g").attr("class","scatter-dataLabel-group");this.legendG=f(this.scatterChartEl).select(".scatter-legend").append("svg");this.subTitleG=f(this.scatterChartEl).select(".scatter-sub-title");this.tooltipG=f(this.scatterChartEl).select(".scatter-tooltip");this.referencesG=this.rootG.append("g").attr("class","scatter-reference-line-group")}setGlobalSelections(){const t=this.dotG.selectAll(".series-point-group").data(this.nest,(t=>t.key));this.enterPointWrappers=t.enter().append("g");this.exitPointWrappers=t.exit();this.updatePointWrappers=t.merge(this.enterPointWrappers);this.exitSize=this.exitPointWrappers.selectAll(".data-point").size();this.exitSize+=this.exitPointWrappers.size();const s=this.updatePointWrappers.selectAll(".data-point").data((t=>t.values));this.enterPoints=s.enter().append("path");this.exitPoints=s.exit();this.updatePoints=s.merge(this.enterPoints);const i=this.labelG.selectAll(".series-dataLabel-group").data(this.nest,(t=>t.key));this.enteringLabelGroups=i.enter().append("g");this.exitingLabelGroups=i.exit();this.updatingLabelGroups=i.merge(this.enteringLabelGroups);const h=this.updatingLabelGroups.selectAll("text").data((t=>t.values));this.enterLabels=h.enter().append("text");this.exitLabels=h.exit();this.updateLabels=h.merge(this.enterLabels)}setTestingAttributes(){if(this.unitTest){f(this.scatterChartEl).select(".visa-viz-d3-scatter-container").attr("data-testid","chart-container");f(this.scatterChartEl).select(".scatter-main-title").attr("data-testid","main-title");f(this.scatterChartEl).select(".scatter-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.gridG.attr("data-testid","scatter-grid-group");this.fitLine.attr("data-testid","scatter-fit-line-group");this.referencesG.attr("data-testid","reference-line-group");this.dotG.attr("data-testid","marker-group-container");this.updatePointWrappers.attr("data-testid","marker-series-group").attr("data-id",(t=>`marker-series-${t.key}`));this.updatePoints.attr("data-testid","marker").attr("data-id",(t=>`marker-${t[this.groupAccessor]}-${t[this.xAccessor]}-${t[this.yAccessor]}`));this.labelG.attr("data-testid","dataLabel-group-container");this.updatingLabelGroups.attr("data-testid","dataLabel-series-group").attr("data-id",(t=>`label-series-${t.key}`));this.updateLabels.attr("data-testid","dataLabel").attr("data-id",(t=>`label-${t[this.groupAccessor]}-${t[this.xAccessor]}-${t[this.yAccessor]}`));this.svg.select("defs").attr("data-testid","pattern-defs")}else{f(this.scatterChartEl).select(".visa-viz-d3-scatter-container").attr("data-testid",null);f(this.scatterChartEl).select(".scatter-main-title").attr("data-testid",null);f(this.scatterChartEl).select(".scatter-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.gridG.attr("data-testid",null);this.fitLine.attr("data-testid",null);this.referencesG.attr("data-testid",null);this.dotG.attr("data-testid",null);this.updatePointWrappers.attr("data-testid",null).attr("data-id",null);this.updatePoints.attr("data-testid",null).attr("data-id",null);this.labelG.attr("data-testid",null);this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null);this.updateLabels.attr("data-testid",null).attr("data-id",null);this.svg.select("defs").attr("data-testid",null)}}enterPointGroups(){this.enterPointWrappers.interrupt();this.enterPoints.interrupt();this.enterPointWrappers.attr("class","series-point-group").attr("cursor",!this.suppressEvents?this.cursor:null).on("mouseover",this.groupInteraction&&!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t.values?t.values[0]:t,i[s],true):null).on("mouseout",this.groupInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null).each(((t,s,i)=>{N(i[s])}));this.enterPoints.attr("class","data-point entering").style("mix-blend-mode","multiply").attr("filter",this.filter).each(((t,s,i)=>{N(i[s])})).on("click",((t,s,i)=>this.onClickHandler(t,i[s]))).on("mouseover",((t,s,i)=>this.onHoverHandler(t,i[s]))).on("mouseout",(()=>this.onMouseOutHandler())).attr("opacity",0).attr("stroke",this.handleDotStyle).attr("d",(t=>this.groupAccessor?Wt[this.symbol(t[this.groupAccessor])].general:Wt[this.dotSymbols[0]].general)).attr("transform",(t=>"translate("+this.x(t[this.xAccessor])+","+this.y(t[this.yAccessor])+") scale(1)"));this.updatePointWrappers.order();this.updatePoints.order()}exitPointGroups(){this.exitPointWrappers.interrupt();this.exitPoints.interrupt();this.exitPointWrappers.transition("exit").duration(this.duration).ease(b);this.exitPointWrappers.selectAll(".data-point").attr("filter",null).transition("exit").duration(this.duration).ease(b).attr("opacity",0).attr("transform",((t,s,i)=>{const h=f(i[s]).attr("transform");const e=h.indexOf("scale(");return h.substring(0,e)+"scale(1)"})).call(kt,(()=>{this.exitPointWrappers.remove()}));this.exitPoints.attr("filter",null).transition("exit").duration(this.duration).ease(b).attr("opacity",0).attr("transform",((t,s,i)=>{const h=f(i[s]).attr("transform");const e=h.indexOf("scale(");return h.substring(0,e)+"scale(1)"}));this.updatePoints.transition("accessibilityAfterExit").duration(this.duration).ease(b).call(kt,(()=>{const t=J(this.rootG.node());this.exitPoints.remove();this.exitPointWrappers.remove();this.setChartCountAccessibility();this.setGroupAccessibilityID();this.setGeometryAriaLabels();Z({parentGNode:this.rootG.node(),focusDidExist:t})}))}drawPointGroups(){this.updatePoints.each(((t,s,i)=>{const h=f(i[s]);const e=+h.attr("data-x")!==this.x(t[this.xAccessor]);const a=+h.attr("data-y")!==this.y(t[this.yAccessor]);const r=+h.attr("data-r")!==this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""]["toCircle"])||this.dotRadius||1;if(e||a||r){h.attr("filter",null);h.classed("moving",true)}})).attr("data-r",(t=>this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""]["toCircle"])||this.dotRadius||1)).attr("data-x",(t=>this.x(t[this.xAccessor]))).attr("data-y",(t=>this.y(t[this.yAccessor]))).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).attr("data-d",(t=>this.groupAccessor?Wt[this.symbol(t[this.groupAccessor])].base:Wt[this.dotSymbols[0]].base)).transition("update_d").duration(this.duration).ease(b).attr("d",(t=>this.groupAccessor?Wt[this.symbol(t[this.groupAccessor])].general:Wt[this.dotSymbols[0]].general)).attr("transform",(t=>"translate("+this.x(t[this.xAccessor])+","+this.y(t[this.yAccessor])+") scale("+(this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""]["toCircle"])||this.dotRadius||1)+")")).call(kt,(()=>{setTimeout((()=>{this.updatePointWrappers.selectAll(".moving").classed("moving",false).attr("filter",this.filter)}),0);Z({parentGNode:this.rootG.node()});this.transitionEndEvent.emit({chartID:this.chartID})}))}setDotRadius(){this.updatePoints.transition("radius").duration(this.duration).ease(b).attr("transform",(t=>"translate("+this.x(t[this.xAccessor])+","+this.y(t[this.yAccessor])+") scale("+(this.size(t[this.sizeConfig.sizeAccessor]*this.shapeArea[this.groupAccessor?t[this.groupAccessor]:""]["toCircle"])||this.dotRadius||1)+")")).call(kt,(()=>{Z({parentGNode:this.rootG.node()})}))}setSelectedClass(){this.updatePoints.classed("highlight",((t,s,i)=>{let h=ht(t,true,false,"",this.clickHighlight,this.innerInteractionKeys);h=this.clickHighlight&&this.clickHighlight.length?h:false;const e=this.accessibility.elementsAreInterface;Q(i[s],h,e);return h}))}updateCursor(){this.updatePointWrappers.attr("cursor",!this.suppressEvents?this.cursor:null);this.updatingLabelGroups.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)}reSetRoot(){const t=Dt({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:b});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);const s=Dt({selection:this.root,duration:this.duration,namespace:"root_reset",easing:b});s.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`);const i=Dt({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:b});i.attr("transform",`translate(${this.padding.left}, ${this.padding.top})`);tt(this.chartID,this.width)}drawXAxis(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.xAccessor]?this.dataKeyNames[this.xAccessor]:this.xAxis.label;ot({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:t,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})}drawYAxis(){const t=this.yAxis.label&&this.yAxis.label!==""?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.yAccessor]?this.dataKeyNames[this.yAccessor]:this.yAxis.label;ot({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:t,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})}setXAxisAccessibility(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.xAccessor]?this.dataKeyNames[this.xAccessor]:this.xAxis.label;X({rootEle:this.scatterChartEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x,xAxisLabel:t?t:""})}setYAxisAccessibility(){const t=this.yAxis.label&&this.yAxis.label!==""?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.yAccessor]?this.dataKeyNames[this.yAccessor]:this.yAxis.label;Y({rootEle:this.scatterChartEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y,yAxisLabel:t?t:""})}drawBaselineY(){ot({root:this.gridG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,padding:this.padding,markOffset:this.x(0)||-1,hide:!this.showBaselineY,duration:this.duration})}drawBaselineX(){ot({root:this.gridG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0)||-1,hide:!this.showBaselineX,duration:this.duration})}drawXGrid(){lt(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){lt(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}bindLegendInteractivity(){f(this.scatterChartEl).selectAll(".legend").on("click",this.legend.interactive&&!this.suppressEvents?(t,s,i)=>this.onClickHandler(t.values?t.values[0]:t,i[s]):null).on("mouseover",this.legend.interactive&&!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t.values?t.values[0]:t,i[s],true):null).on("mouseout",this.legend.interactive&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){f(this.scatterChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:null)}bindInteractivity(){this.enterPointWrappers.on("mouseover",this.groupInteraction&&!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t.values?t.values[0]:t,i[s],true):null).on("mouseout",this.groupInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null);this.updatePoints.on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s]):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);this.updateLabels.on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s]):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null)}enterDataLabels(){const t=this.dataLabel.visible?1:0;this.enteringLabelGroups.attr("class","series-dataLabel-group").attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null);this.enterLabels.attr("filter",this.textFilter).attr("opacity",(s=>ht(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON)).attr("class","scatter-dataLabel entering").attr("fill",this.textFillHandler).on("click",!this.suppressEvents&&this.dataLabel.visible?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?(t,s,i)=>this.onHoverHandler(t,i[s]):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null);xt({root:this.enterLabels,xScale:this.x,yScale:this.y,sizeScale:this.size,ordinalAccessor:this.xAccessor,valueAccessor:this.yAccessor,groupAccessor:this.groupAccessor,sizeAccessor:this.sizeConfig.sizeAccessor,shapeArea:this.shapeArea,placement:this.dataLabel.placement,chartType:"scatter",labelOffset:this.dotRadius})}updateDataLabels(){this.updateLabels.interrupt();const t=this.dataLabel.visible?1:0;this.updateLabels.transition("opacity").ease(b).duration(this.duration).attr("opacity",(s=>ht(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1)).call(kt,((t,s,i)=>{f(i[s]).classed("entering",false)}))}exitDataLabels(){this.exitingLabelGroups.selectAll(".scatter-dataLabel").attr("filter",null).transition("exit").duration(this.duration/3).ease(b).attr("opacity",0).call(kt,(()=>{this.exitingLabelGroups.remove()}));this.exitLabels.attr("filter",null).transition("exit").ease(b).duration(this.duration).attr("opacity",0).remove()}drawDataLabels(){const t=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.updateLabels.text((t=>dt(t,this.innerLabelAccessor,this.innerLabelFormat)));const s=this.updateLabels.style("visibility",((t,s,i)=>this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly?f(i[s]).style("visibility"):null)).attr("data-x",(t=>this.x(t[this.xAccessor]))).attr("data-y",(t=>this.y(t[this.yAccessor]))).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-translate-y",this.padding.top+this.margin.top).transition("update").ease(b).duration(this.duration);this.bitmaps=xt({root:s,xScale:this.x,yScale:this.y,sizeScale:this.size,ordinalAccessor:this.xAccessor,valueAccessor:this.yAccessor,groupAccessor:this.groupAccessor,sizeAccessor:this.sizeConfig.sizeAccessor,shapeArea:this.shapeArea,placement:this.dataLabel.placement,chartType:"scatter",labelOffset:this.dotRadius+this.dotRadius*.25,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",labelSelection:s,avoidMarks:[this.updatePoints],validPositions:t?["middle"]:["middle","top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:t?[1]:[1,5,4,4,1,1,1,1,1],accessors:[this.xAccessor,this.yAccessor,this.groupAccessor,"key"],size:[Ct(this.width,0),Ct(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}updateInteractionState(){this.updatePoints.interrupt("opacity");this.updatePoints.attr("stroke",this.handleDotStyle);this.updateLabels.attr("fill",this.textFillHandler);Z({parentGNode:this.rootG.node()});nt({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.groupAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.innerHoverStyle,clickStyle:this.innerClickStyle,hoverOpacity:this.hoverOpacity})}setPointOpacity(){this.updatePoints.interrupt();this.updatePoints.transition("opacity").duration(((t,s,i)=>{if(f(i[s]).classed("entering")){f(i[s]).classed("entering",false);return this.duration}else{return 0}})).ease(b).attr("opacity",(t=>ht(t,this.dotOpacity,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))).call(kt,((t,s,i)=>{f(i[s]).classed("entering",false)}))}setLabelOpacity(){const t=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;const s=this.dataLabel.placement==="auto"||t;this.updateLabels.attr("data-use-dx",t).attr("data-use-dy",t).attr("opacity",((s,i,h)=>{const e=+f(h[i]).attr("opacity");const a=f(h[i]).style("visibility");const r=ht(s,this.dataLabel.visible?1:0,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;if((r===1&&a==="hidden"||e!==r)&&(this.dataLabel.placement==="auto"||t)){if(r===1){f(h[i]).classed("collision-added",true).style("visibility",null)}else{f(h[i]).classed("collision-removed",true)}}return r}));if(s){const s=this.updateLabels.filter(((t,s,i)=>f(i[s]).classed("collision-added")));const i=this.updateLabels.filter(((t,s,i)=>f(i[s]).classed("collision-removed")));if(i.size()>0){this.bitmaps=Ot({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Ct(this.width,0),Ct(this.height,0)],hideOnly:false,removeOnly:true});i.classed("collision-removed",false)}if(s.size()>0){this.bitmaps=xt({root:s,xScale:this.x,yScale:this.y,sizeScale:this.size,ordinalAccessor:this.xAccessor,valueAccessor:this.yAccessor,groupAccessor:this.groupAccessor,sizeAccessor:this.sizeConfig.sizeAccessor,shapeArea:this.shapeArea,placement:this.dataLabel.placement,chartType:"scatter",labelOffset:this.dotRadius+this.dotRadius*.25,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[this.updatePoints],validPositions:t?["middle"]:["middle","top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:t?[1]:[1,5,4,4,1,1,1,1,1],accessors:[this.xAccessor,this.yAccessor,this.groupAccessor,"key"],size:[Ct(this.width,0),Ct(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:true}});s.classed("collision-added",false)}}}drawFitLine(){const t=this.showFitLine?this.fitLineStyle.opacity:0;const s=this.data.map((t=>parseFloat(t[this.xAccessor])));const i=this.data.map((t=>parseFloat(t[this.yAccessor])));const h=bt(s,i);const e=h[0];const a=h[1];const r=this.fitLine.selectAll("line").data(h);const o=r.enter().append("line").attr("class","trendline").attr("opacity",0);r.merge(o).transition("update").duration(this.duration).ease(b).attr("x1",this.x(this.xMin)).attr("y1",this.y(a)).attr("x2",this.x(this.xMax)).attr("y2",this.y(this.xMax*e+a)).style("stroke",wt[this.fitLineStyle.color]||this.fitLineStyle.color).style("stroke-width",this.fitLineStyle.strokeWidth).attr("stroke-dasharray",this.fitLineStyle.dashed?this.fitLineStyle.dashed:"").attr("opacity",t);r.exit().remove()}drawReferenceLines(){It({groupName:"scatter",root:this.referencesG,referenceLines:this.referenceLines,referenceStyle:this.referenceStyle,innerPaddedWidth:this.innerPaddedWidth,innerPaddedHeight:this.innerPaddedHeight,duration:this.duration,x:this.x,y:this.y,unitTest:this.unitTest})}drawAnnotations(){st({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.xAccessor,yScale:this.y,yAccessor:this.yAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){U(this.getLanguageString(),this.scatterChartEl,this.annotations,this.referenceLines)}setTagLevels(){this.topLevel=Tt(this.highestHeadingLevel);this.bottomLevel=Tt(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){E({language:this.getLanguageString(),rootEle:this.scatterChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"scatter-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled,hideDataTable:this.accessibility.hideDataTableButton});this.shouldRedrawWrapper=false}setParentSVGAccessibility(){K({chartTag:"scatter-plot",language:this.getLanguageString(),node:this.svg.node(),title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:this.innerScopeDataKeys(),dataKeyNames:this.dataKeyNames,groupAccessor:this.groupAccessor,groupName:"scatter-group",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.updatePoints.each(((t,s,i)=>{N(i[s])}))}setGeometryAriaLabels(){const t=this.innerScopeDataKeys();this.updatePoints.each(((s,i,h)=>{F({chartTag:"scatter-plot",language:this.getLanguageString(),node:h[i],geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupName:"scatter-group",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});P({node:h[i],uniqueID:this.chartID})}))}setGroupAccessibilityID(){this.updatePointWrappers.each(((t,s,i)=>{P({node:i[s],uniqueID:this.chartID})}))}setChartAccessibilityTitle(){j(this.getLanguageString(),this.scatterChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){G(this.getLanguageString(),this.scatterChartEl,this.subTitle)}setChartAccessibilityLongDescription(){H(this.getLanguageString(),this.scatterChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){V(this.getLanguageString(),this.scatterChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){q(this.getLanguageString(),this.scatterChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){B(this.getLanguageString(),this.scatterChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){$(this.getLanguageString(),this.scatterChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){R({rootEle:this.scatterChartEl,parentGNode:this.dotG.node(),chartTag:"scatter-plot",geomType:"point",groupName:"scatter group"})}setChartAccessibilityStructureNotes(){_(this.getLanguageString(),this.scatterChartEl,this.accessibility.structureNotes)}drawLegendElements(){const t=this.groupAccessor===w.groupAccessor&&this.nest&&this.nest.length===1&&this.nest[0].key==="undefined";ct({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.rawColors,baseColorArr:this.colorArr,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"scatter",fontSize:16,data:this.nest,label:this.legend.labels,symbol:this.dotSymbols,hide:!(this.legend.visible&&!t||!this.legend||!this.groupAccessor),interactionKeys:this.innerInteractionKeys,groupAccessor:this.groupAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.innerHoverStyle,clickStyle:this.innerClickStyle,hoverOpacity:this.hoverOpacity})}onChangeHandler(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){const t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0}onClickHandler(t,s){this.clickEvent.emit({data:t,target:s})}onHoverHandler(t,s,i){vt(this.chartID,true);this.hoverEvent.emit({data:t,target:s});if(this.showTooltip&&!i){this.eventsTooltip({data:t,evt:p,isToShow:true})}}onMouseOutHandler(){vt(this.chartID,false);this.mouseOutEvent.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}}setTooltipInitialStyle(){mt(this.tooltipG)}eventsTooltip({data:t,evt:s,isToShow:i}){ut({root:this.tooltipG,data:t,event:s,isToShow:i,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,dataKeyNames:this.dataKeyNames,groupAccessor:this.groupAccessor,sizeConfig:this.sizeConfig,xAccessor:this.xAccessor,yAccessor:this.yAccessor,chartType:"scatter"})}render(){this.drawStartEvent.emit({chartID:this.chartID});this.init();if(this.shouldSetLocalizationConfig){this.setLocalizationConfig();this.shouldSetLocalizationConfig=false}if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateLayout){this.setLayoutData();this.shouldUpdateLayout=false}if(this.shouldValidateClickStyle){this.validateClickStyle();this.shouldValidateClickStyle=false}if(this.shouldValidateHoverStyle){this.validateHoverStyle();this.shouldValidateHoverStyle=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.shouldValidate=false}return i("div",{key:"a76a5ed99aaab7d1a1f27aa10cee44f8fe7652e5",class:"o-layout"},i("div",{key:"ebf3bdfceeb58a916fcc2b10ad08ab27f2f3370d",class:"o-layout--chart"},i(this.topLevel,{key:"11bb95a9ea035d9a7b740deba9aeacb94adff716",class:"scatter-main-title vcl-main-title"},this.mainTitle),i(this.bottomLevel,{key:"b71dc286891fcb79746ce98839a0a08a83b12771",class:"visa-ui-text--instructions scatter-sub-title vcl-sub-title"}),i("div",{key:"c2012b947125f56ed2e38bfea3baf16c2b34bd4f",class:"scatter-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),i("keyboard-instructions",{key:"2e3dd46c20619c6e17fcfbfc81b9693572bbc95d",uniqueID:this.chartID,geomType:"point",groupName:"scatter group",language:this.getLanguageString(),chartTag:"scatter-plot",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),i("div",{key:"da06db013823f5e0f98bac5549b0a795b99bcd04",class:"visa-viz-d3-scatter-container"}),i("div",{key:"daf70506d1c6b612361fa459505d5e5b9e284b05",class:"scatter-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),i("data-table",{key:"376b0db12184db8f3061547c53e846d65b6a37b4",uniqueID:this.chartID,isCompact:true,language:this.getLanguageString(),tableColumns:this.tableColumns,data:this.tableData,dataKeyNames:this.dataKeyNames,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(w);let s=0;const i={showFitLine:{exception:false},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false},groupAccessor:{exception:""},hoverOpacity:{exception:0}};for(s=0;s<t.length;s++){const h=!i[t[s]]?false:this[t[s]]===i[t[s]].exception;this[t[s]]=this[t[s]]||h?this[t[s]]:w[t[s]]}}get scatterChartEl(){return h(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["layoutWatcher"],width:["layoutWatcher"],padding:["layoutWatcher"],margin:["layoutWatcher"],xAccessor:["xAccessorWatcher"],yAccessor:["yAccessorWatcher"],sizeConfig:["sizeConfigWatcher"],groupAccessor:["groupAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colors:["colorsWatcher"],colorPalette:["colorsWatcher"],dotRadius:["dotRadiusWatcher"],dotOpacity:["dotOpacityWatcher"],dotSymbols:["dotSymbolsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],fitLineStyle:["fitLineStyleWatcher"],cursor:["cursorWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],legend:["legendWatcher"],suppressEvents:["suppressWatcher"],annotations:["annotationsWatcher"],accessibility:["accessibilityWatcher"],localization:["localizationWatcher"],xMaxValueOverride:["xValueOverrideWatcher"],xMinValueOverride:["xValueOverrideWatcher"],yMaxValueOverride:["yValueOverrideWatcher"],yMinValueOverride:["yValueOverrideWatcher"],showFitLine:["showFitLineWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],dataKeyNames:["dataKeyNamesWatcher"],unitTest:["unitTestWatcher"]}}};window["VisaChartsLibOSSLicenses"]=pt();Et.style=L;export{Et as scatter_plot};
//# sourceMappingURL=p-04d56e6b.entry.js.map