/**
 * Copyright (c) 2024 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as s,h as i,g as h}from"./p-b0ab226b.js";import{p as e}from"./p-bb2c1516.js";import{l as a,n as r}from"./p-42dcf457.js";import{t as l,a as o,b as n,s as c}from"./p-e3c165be.js";import{U as u,s as d,e as f}from"./p-5fcd3c02.js";import{v as p}from"./p-b5f7528a.js";import{t as y,a as m,s as b,b as g,c as v}from"./p-09f6650c.js";import{c as x,a as k,l as A}from"./p-67f05ac6.js";import{m as w}from"./p-f9c89fe4.js";import{m as W}from"./p-e1d72334.js";import{m as L,a as S}from"./p-848274b2.js";import{c as D}from"./p-3f5e41ff.js";import"./p-b6ae930f.js";import"./p-6e7316e2.js";import"./p-fa69d97e.js";import"./p-4f683f50.js";import"./p-c79b22e7.js";function T(t,s){this._context=t;this._t=s}T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2)this._context.lineTo(this._x,this._y);if(this._line||this._line!==0&&this._point===1)this._context.closePath();if(this._line>=0)this._t=1-this._t,this._line=1-this._line},point:function(t,s){t=+t,s=+s;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,s);this._context.lineTo(t,s)}else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y);this._context.lineTo(i,s)}break}}this._x=t,this._y=s}};function C(t){return new T(t,.5)}const{propDefaultValues:N}=u;class O{}O.highestHeadingLevel=N.highestHeadingLevel;O.mainTitle="Line Chart Title";O.subTitle=N.subTitle.text;O.height=300;O.width=650;O.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};O.padding={top:20,bottom:50,right:50,left:50};O.localization=N.localization;O.ordinalAccessor="label";O.valueAccessor="value";O.seriesAccessor="series";O.accessibility=N.accessibility;O.animationConfig=N.animationConfig;O.xAxis=N.xAxisDate;O.yAxis=N.yAxis;O.showBaselineX=N.showBaselineTrue;O.wrapLabel=N.wrapLabel;O.colorPalette=N.colorPaletteCategorical;O.hoverStyle=N.hoverStyle;O.clickStyle=N.clickStyle;O.referenceStyle=N.referenceStyle;O.strokeWidth=N.strokeWidth2;O.showDots=N.showDots;O.dotRadius=N.dotRadius4;O.lineCurve=N.lineCurve;O.hoverOpacity=N.hoverOpacity;O.cursor=N.cursor;O.dataLabel=N.dataLabelLine;O.seriesLabel=N.seriesLabel;O.legend=N.categoryLegend;O.tooltipLabel=N.tooltipLabel;O.secondaryLines=N.secondaryLines;O.showTooltip=N.showTooltip;O.suppressEvents=N.suppressEvents;O.referenceLines=N.referenceLines;O.annotations=N.annotations;O.clickHighlight=N.clickHighlight;const P=".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}line-chart{cursor:default}line-chart .annotations{pointer-events:none}line-chart .annotations .handle{pointer-events:all}line-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}line-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}line-chart .hidden{display:none}line-chart .axis{font-size:12px}line-chart .axis text{fill:#767676}line-chart .axis-label{text-anchor:middle;font:1rem sans-serif}line-chart .axis-mark{color:#949494;stroke-width:2px}line-chart .axis path{color:transparent;stroke-width:2px}line-chart .grid line{stroke:#c9c9c9;stroke-opacity:0.6}line-chart .grid path{stroke-width:0;stroke:#767676}line-chart .line-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}line-chart .line-group__inactive{opacity:0}line-chart .line-group .line-plot{fill:none}line-chart .line-group .dot{stroke:#ffffff}line-chart .line-group .line-series-label{font-size:1em}line-chart .line-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}line-chart .line-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}";const E=P;const{getGlobalInstances:I,configLocalization:j,getActiveLanguageString:z,getAccessibleStrokes:F,ensureTextContrast:K,createTextStrokeFilter:$,findTagLevel:H,prepareRenderChange:G,initializeDescriptionRoot:q,initializeElementAccess:M,setElementFocusHandler:R,setElementAccessID:B,setAccessibilityController:X,hideNonessentialGroups:V,setAccessTitle:_,setAccessSubtitle:Y,setAccessLongDescription:U,setAccessExecutiveSummary:J,setAccessPurpose:Q,setAccessContext:Z,setAccessStatistics:tt,setAccessStructure:st,setAccessChartCounts:it,setAccessXAxis:ht,setAccessYAxis:et,setAccessAnnotation:at,retainAccessFocus:rt,checkAccessFocus:lt,setElementInteractionAccessState:ot,setAccessibilityDescriptionWidth:nt,annotate:ct,chartAccessors:ut,checkInteraction:dt,checkClicked:ft,checkHovered:pt,checkLabelDisplayOnly:yt,convertVisaColor:mt,drawAxis:bt,drawGrid:gt,drawLegend:vt,setLegendInteractionState:xt,drawTooltip:kt,formatDataLabel:At,getColors:wt,getLicenses:Wt,getPadding:Lt,getScopedData:St,initTooltipStyle:Dt,overrideTitleTooltip:Tt,placeDataLabels:Ct,resolveLines:Nt,scopeDataKeys:Ot,transitionEndAll:Pt,visaColors:Et,validateAccessibilityProps:It,validateLocalizationProps:jt,roundTo:zt,resolveLabelCollision:Ft,setSubTitle:Kt,setReferenceLine:$t}=u;const Ht=class{constructor(i){t(this,i);this.clickEvent=s(this,"clickEvent",7);this.hoverEvent=s(this,"hoverEvent",7);this.mouseOutEvent=s(this,"mouseOutEvent",7);this.initialLoadEvent=s(this,"initialLoadEvent",7);this.initialLoadEndEvent=s(this,"initialLoadEndEvent",7);this.drawStartEvent=s(this,"drawStartEvent",7);this.drawEndEvent=s(this,"drawEndEvent",7);this.transitionEndEvent=s(this,"transitionEndEvent",7);this.shouldValidateAccessibility=true;this.shouldValidateLocalization=true;this.updated=true;this.time={timemillisecond:l,timesecond:o,timeminute:n,timehour:y,timeday:m,timeweek:b,timemonth:g,timeyear:v};this.curveOptions={linear:x,step:C,catmullRom:k};this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateScales=false;this.shouldUpdateTableData=false;this.shouldUpdateLabels=false;this.shouldUpdateAnnotations=false;this.shouldDrawInteractionState=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldSetColors=false;this.shouldSetSubTitle=false;this.shouldUpdateLines=false;this.shouldUpdatePoints=false;this.shouldUpdateLegend=false;this.shouldUpdateReferenceLines=false;this.shouldBindInteractivity=false;this.shouldUpdateLegendInteractivity=false;this.shouldResetRoot=false;this.shouldUpdateBaseline=false;this.shouldValidateInteractionKeys=false;this.shouldUpdateLabelData=false;this.shouldValidateDataLabelAccessor=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetLegendCursor=false;this.shouldAddStrokeUnder=false;this.shouldValidateSeriesLabels=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateColors=false;this.shouldUpdateStrokeWidth=false;this.shouldUpdateInterpolationData=false;this.shouldUpdateDotRadius=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldUpdateDashPatterns=false;this.shouldSetLocalizationConfig=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.b=",";this.short="2,2";this.med="4,2";this.long="8,2";this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long];this.hiddenHash={};this.collisionSettings={all:{validPositions:["top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:[3,2,4,4,1,1,1,1]},top:{validPositions:["top","top-left","top-right"],offsets:[3,1,1]},middle:{validPositions:["left","right"],offsets:[4,4]},bottom:{validPositions:["bottom","bottom-left","bottom-right"],offsets:[2,1,1]},right:{validPositions:["right","top-right","bottom-right"],offsets:[4,1,1]},left:{validPositions:["left","top-left","bottom-left"],offsets:[4,1,1]}};this.handleStrokeDasharray=(t,s)=>this.secondaryLines.keys.includes(t.key)?this.short:!this.accessibility.hideTextures?this.dashPatterns[s]:"";this.calculateStrokeWidth=(t,s)=>{const i=!s?t:t.values[0];return!s||this.seriesInteraction?ft(i,this.clickHighlight,this.innerInteractionKeys)?this.clickStyle.strokeWidth||this.strokeWidth:pt(i,this.hoverHighlight,this.innerInteractionKeys)?this.hoverStyle.strokeWidth||this.strokeWidth:!this.secondaryLines.keys.includes(i[this.seriesAccessor])?this.strokeWidth:1:!this.secondaryLines.keys.includes(i[this.seriesAccessor])?this.strokeWidth:1};this.handleDotStroke=(t,s,i)=>{if(!this.accessibility.hideStrokes){const h=this.clickHighlight&&this.clickHighlight.length>0&&ft(t,this.clickHighlight,this.innerInteractionKeys);const e=this.hoverHighlight&&pt(t,this.hoverHighlight,this.innerInteractionKeys);const a=d(i[s].parentNode).attr("fill");const r=h&&this.clickStyle.color?Et[this.clickStyle.color]||this.clickStyle.color:h?a:e&&this.hoverStyle.color?Et[this.hoverStyle.color]||this.hoverStyle.color:a;d(i[s]).attr("stroke-width",this.calculateStrokeWidth(t));d(i[s]).attr("fill",r);return this.strokes[r.toLowerCase()]}return null};this.handleLineStroke=(t,s)=>{const i=this.colorArr[s]||this.colorArr[0];const h=t.values[0];const e=ft(h,this.clickHighlight,this.innerInteractionKeys);const a=pt(h,this.hoverHighlight,this.innerInteractionKeys);return this.seriesInteraction?e&&this.clickStyle.color?this.strokes[(Et[this.clickStyle.color]||this.clickStyle.color).toLowerCase()]:e?i:a&&this.hoverStyle.color?this.strokes[(Et[this.hoverStyle.color]||this.hoverStyle.color).toLowerCase()]:i:i};this.handleSeriesTextFill=(t,s)=>{const i=this.rawColors[s]||this.rawColors[0];const h=t.values[0];const e=ft(h,this.clickHighlight,this.innerInteractionKeys);const a=pt(h,this.hoverHighlight,this.innerInteractionKeys);const r=this.seriesInteraction?e&&this.clickStyle.color?Et[this.clickStyle.color]||this.clickStyle.color:e?i:a&&this.hoverStyle.color?Et[this.hoverStyle.color]||this.hoverStyle.color:i:i;return this.textColors[r.toLowerCase()]};this.handleTextFill=(t,s,i)=>{const h=this.clickHighlight&&this.clickHighlight.length>0&&ft(t,this.clickHighlight,this.innerInteractionKeys);const e=this.hoverHighlight&&pt(t,this.hoverHighlight,this.innerInteractionKeys);const a=d(i[s].parentNode).attr("fill");const r=h&&this.clickStyle.color?Et[this.clickStyle.color]||this.clickStyle.color:h?a:e&&this.hoverStyle.color?Et[this.hoverStyle.color]||this.hoverStyle.color:a;return this.textColors[r.toLowerCase()]};this.localization=O.localization;this.mainTitle=O.mainTitle;this.subTitle=O.subTitle;this.height=O.height;this.width=O.width;this.highestHeadingLevel=O.highestHeadingLevel;this.margin=O.margin;this.padding=O.padding;this.data=undefined;this.uniqueID=undefined;this.ordinalAccessor=O.ordinalAccessor;this.valueAccessor=O.valueAccessor;this.seriesAccessor=O.seriesAccessor;this.xAxis=O.xAxis;this.yAxis=O.yAxis;this.wrapLabel=O.wrapLabel;this.showBaselineX=O.showBaselineX;this.colorPalette=O.colorPalette;this.colors=undefined;this.hoverStyle=O.hoverStyle;this.clickStyle=O.clickStyle;this.referenceStyle=O.referenceStyle;this.cursor=O.cursor;this.hoverOpacity=O.hoverOpacity;this.animationConfig=O.animationConfig;this.strokeWidth=O.strokeWidth;this.showDots=O.showDots;this.dotRadius=O.dotRadius;this.lineCurve=O.lineCurve;this.dataLabel=O.dataLabel;this.dataKeyNames=undefined;this.showTooltip=O.showTooltip;this.tooltipLabel=O.tooltipLabel;this.accessibility=O.accessibility;this.legend=O.legend;this.annotations=O.annotations;this.seriesLabel=O.seriesLabel;this.maxValueOverride=undefined;this.minValueOverride=undefined;this.referenceLines=O.referenceLines;this.secondaryLines=O.secondaryLines;this.suppressEvents=O.suppressEvents;this.hoverHighlight=undefined;this.clickHighlight=O.clickHighlight;this.interactionKeys=undefined;this.unitTest=false}dataWatcher(t,s){this.updated=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateLabelData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true}idWatcher(t,s){console.error("Change detected in prop uniqueID from value "+s+" to value "+t+". This prop cannot be changed after component has loaded.")}headingWatcher(t,s){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}titleWatcher(t,s){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}subtitleWatcher(t,s){this.shouldSetSubTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true}dimensionWatcher(t,s){this.shouldSetDimensions=true;this.shouldResetRoot=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true}seriesAccessorWatcher(t,s){this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldValidate=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true}ordinalAccessorWatcher(t,s){this.shouldSetGlobalSelections=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true}valueAccessorWatcher(t,s){this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetSeriesLabelOpacity=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGlobalSelections=true}xAxisWatcher(t,s){const i=t&&t.gridVisible;const h=s&&s.gridVisible;const e=t&&t.tickInterval?t.tickInterval:0;const a=s&&s.tickInterval?s.tickInterval:0;const r=t&&t.unit?t.unit:false;const l=s&&s.unit?s.unit:false;if(i!==h||e!==a){this.shouldUpdateXGrid=true}if(r!==l){this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true}this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true}yAxisWatcher(t,s){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;const i=t&&t.gridVisible;const h=s&&s.gridVisible;const e=t&&t.tickInterval?t.tickInterval:0;const a=s&&s.tickInterval?s.tickInterval:0;if(i!==h||e!==a){this.shouldUpdateYGrid=true}}wrapLabelWatcher(t,s){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true}showBaselineXWatcher(t,s){this.shouldUpdateBaseline=true}paletteWatcher(t,s){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true}colorsWatcher(t,s){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true}clickStyleWatcher(t,s){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true}hoverStyleWatcher(t,s){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true}referenceWatcher(t,s){this.shouldUpdateReferenceLines=true}cursorWatcher(t,s){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true}strokeWidthWatcher(t,s){this.shouldUpdateStrokeWidth=true}showDotsWatcher(t,s){this.shouldDrawInteractionState=true}dotRadiusWatcher(t,s){this.shouldUpdateDotRadius=true}lineCurveWatcher(t,s){this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;console.warn("Change detected in prop lineCurve from value "+t+" to value "+s+". Transition effects for this prop have not been implemented.")}hoverOpacityWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true}dataLabelWatcher(t,s){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;const i=t&&t.visible;const h=s&&s.visible;const e=t&&t.labelAccessor?t.labelAccessor:false;const a=s&&s.labelAccessor?s.labelAccessor:false;const r=t&&t.displayOnly;const l=s&&s.displayOnly;if(i!==h){this.shouldSetLabelOpacity=true}if(r!==l){this.shouldUpdateLabelData=true;this.shouldSetLabelOpacity=true}if(e!==a){this.shouldValidateDataLabelAccessor=true}}seriesLabelWatcher(t,s){this.shouldUpdateSeriesLabels=true;this.shouldUpdateTableData=true;this.shouldValidateSeriesLabels=true;const i=t&&t.visible;const h=s&&s.visible;if(i!==h){this.shouldSetSeriesLabelOpacity=true}}tooltipLabelWatcher(t,s){this.shouldUpdateTableData=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true}showTooltipWatcher(t,s){}accessibilityWatcher(t,s){this.shouldValidate=true;const i=t&&t.title?t.title:false;const h=s&&s.title?s.title:false;if(i!==h){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}const e=t&&t.executiveSummary?t.executiveSummary:false;const a=s&&s.executiveSummary?s.executiveSummary:false;if(e!==a){this.shouldSetChartAccessibilityExecutiveSummary=true}const r=t&&t.purpose?t.purpose:false;const l=s&&s.purpose?s.purpose:false;if(r!==l){this.shouldSetChartAccessibilityPurpose=true}const o=t&&t.longDescription?t.longDescription:false;const n=s&&s.longDescription?s.longDescription:false;if(o!==n){this.shouldSetChartAccessibilityLongDescription=true}const c=t&&t.contextExplanation?t.contextExplanation:false;const u=s&&s.contextExplanation?s.contextExplanation:false;if(c!==u){this.shouldSetChartAccessibilityContext=true}const d=t&&t.statisticalNotes?t.statisticalNotes:false;const f=s&&s.statisticalNotes?s.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}const p=t&&t.structureNotes?t.structureNotes:false;const y=s&&s.structureNotes?s.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}const m=t&&t.includeDataKeyNames;const b=s&&s.includeDataKeyNames;const g=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;const v=s&&s.elementDescriptionAccessor?s.elementDescriptionAccessor:false;if(m!==b||g!==v){if(m!==b){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}const x=t&&t.showSmallLabels?t.showSmallLabels:false;const k=s&&s.showSmallLabels?s.showSmallLabels:false;if(x!==k){this.shouldSetLabelOpacity=true}const A=t&&t.hideStrokes?t.hideStrokes:false;const w=s&&s.hideStrokes?s.hideStrokes:false;if(A!==w){this.shouldUpdateStrokeWidth=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true}const W=t&&t.hideTextures?t.hideTextures:false;const L=s&&s.hideTextures?s.hideTextures:false;if(W!==L){this.shouldUpdateDashPatterns=true;this.shouldUpdateLegend=true}const S=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;const D=s&&s.keyboardNavConfig&&s.keyboardNavConfig.disabled?s.keyboardNavConfig.disabled:false;const T=t&&t.elementsAreInterface?t.elementsAreInterface:false;const C=s&&s.elementsAreInterface?s.elementsAreInterface:false;if(S!==D||T!==C){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(T!==C){this.shouldSetSelectionClass=true}}localizationWatcher(t,s){this.shouldValidate=true;const i=t&&t.language?t.language:false;const h=s&&s.language?s.language:false;if(i!==h){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldValidateDataLabelAccessor=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}const e=t&&t.numeralLocale?t.numeralLocale:false;const a=s&&s.numeralLocale?s.numeralLocale:false;if(e!==a){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldValidateDataLabelAccessor=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}}legendWatcher(t,s){this.shouldUpdateLegend=true;const i=t&&t.interactive;const h=s&&s.interactive;if(i!==h){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}}annotationsWatcher(t,s){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true}valueOverrideWatcher(t,s){this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true}secondaryLinesWatcher(t,s){const i=t&&t.showDataLabel;const h=s&&s.showDataLabel;const e=t&&t.showSeriesLabel;const a=s&&s.showSeriesLabel;const r=t&&t.keys?t.keys:false;const l=s&&s.keys?s.keys:false;const o=t&&t.opacity?t.opacity:0;const n=s&&s.opacity?s.opacity:0;if(r!==l){this.shouldUpdateLines=true;this.shouldUpdateStrokeWidth=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true}if(i!==h){this.shouldSetLabelOpacity=true}if(e!==a){this.shouldUpdateLabels=true}if(o!==n){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true}}clickWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true}hoverWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true}interactionWatcher(t,s){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true}dataKeyNamesWatcher(t,s){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetGeometryAriaLabels=true}suppressWatcher(t,s){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}unitTestWatcher(t,s){this.shouldSetTestingAttributes=true}componentWillLoad(){const t=this.uniqueID||"line-chart-"+p();this.initialLoadEvent.emit({chartID:t});return new Promise((s=>{this.duration=0;this.defaults=true;this.chartID=t;this.lineChartEl.id=this.chartID;this.setLocalizationConfig();this.setTagLevels();this.setDimensions();this.prepareScales();this.prepareData();this.prepareLabelData();this.updateInterpolationData();this.validateInteractionKeys();this.validateDataLabelAccessor();this.validateSeriesLabels();this.setTableData();this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.setColors();s("component will load")}))}componentWillUpdate(){return new Promise((t=>{t("component will update")}))}componentDidLoad(){return new Promise((t=>{this.renderRootElements();this.setTooltipInitialStyle();this.setChartDescriptionWrapper();this.setChartAccessibilityTitle();this.setChartAccessibilitySubtitle();this.setChartAccessibilityLongDescription();this.setChartAccessibilityExecutiveSummary();this.setChartAccessibilityPurpose();this.setChartAccessibilityContext();this.setChartAccessibilityStatisticalNotes();this.setChartAccessibilityStructureNotes();this.setParentSVGAccessibility();this.reSetRoot();this.drawXGrid();this.drawYGrid();this.setSubTitleElements();this.setGlobalSelections();this.setTestingAttributes();this.enterLines();this.updateLines();this.exitLines();this.enterPoints();this.updatePoints();this.exitPoints();this.drawLines();this.drawPoints();this.enterSeriesLabels();this.updateSeriesLabels();this.exitSeriesLabels();this.enterDataLabels();this.updateDataLabels();this.exitDataLabels();this.setChartCountAccessibility();this.setGeometryAccessibilityAttributes();this.setGeometryAriaLabels();this.drawLegendElements();this.drawDataLabels();this.drawSeriesLabels();this.addStrokeUnder();this.drawReferenceLines();this.setSelectedClass();this.updateCursor();this.bindInteractivity();this.bindLegendInteractivity();this.setLegendCursor();this.drawXAxis();this.setXAxisAccessibility();this.drawYAxis();this.setYAxisAccessibility();this.drawBaseline();this.drawAnnotations();this.setAnnotationAccessibility();V(this.root.node(),this.dotG.node());this.setGroupAccessibilityID();this.onChangeHandler();this.defaults=false;t("component did load")})).then((()=>this.initialLoadEndEvent.emit({chartID:this.chartID})))}componentDidUpdate(){return new Promise((t=>{this.duration=!this.animationConfig||!this.animationConfig.disabled?750:0;if(this.shouldUpdateDescriptionWrapper){this.setChartDescriptionWrapper();this.shouldUpdateDescriptionWrapper=false}if(this.shouldSetChartAccessibilityCount){this.setChartCountAccessibility();this.shouldSetChartAccessibilityCount=false}if(this.shouldSetChartAccessibilityTitle){this.setChartAccessibilityTitle();this.shouldSetChartAccessibilityTitle=false}if(this.shouldSetChartAccessibilitySubtitle){this.setChartAccessibilitySubtitle();this.shouldSetChartAccessibilitySubtitle=false}if(this.shouldSetChartAccessibilityLongDescription){this.setChartAccessibilityLongDescription();this.shouldSetChartAccessibilityLongDescription=false}if(this.shouldSetChartAccessibilityExecutiveSummary){this.setChartAccessibilityExecutiveSummary();this.shouldSetChartAccessibilityExecutiveSummary=false}if(this.shouldSetChartAccessibilityPurpose){this.setChartAccessibilityPurpose();this.shouldSetChartAccessibilityPurpose=false}if(this.shouldSetChartAccessibilityContext){this.setChartAccessibilityContext();this.shouldSetChartAccessibilityContext=false}if(this.shouldSetChartAccessibilityStatisticalNotes){this.setChartAccessibilityStatisticalNotes();this.shouldSetChartAccessibilityStatisticalNotes=false}if(this.shouldSetChartAccessibilityStructureNotes){this.setChartAccessibilityStructureNotes();this.shouldSetChartAccessibilityStructureNotes=false}if(this.shouldSetParentSVGAccessibility){this.setParentSVGAccessibility();this.shouldSetParentSVGAccessibility=false}if(this.shouldResetRoot){this.reSetRoot();this.shouldResetRoot=false}if(this.shouldSetGlobalSelections){this.setGlobalSelections();this.shouldSetGlobalSelections=false}if(this.shouldSetTestingAttributes){this.setTestingAttributes();this.shouldSetTestingAttributes=false}if(this.shouldSetSubTitle){this.setSubTitleElements();this.shouldSetSubTitle=false}if(this.shouldUpdateXGrid){this.drawXGrid();this.shouldUpdateXGrid=false}if(this.shouldUpdateYGrid){this.drawYGrid();this.shouldUpdateYGrid=false}if(this.shouldEnterUpdateExit){this.enterLines();this.updateLines();this.exitLines();this.enterPoints();this.updatePoints();this.exitPoints();this.enterSeriesLabels();this.updateSeriesLabels();this.exitSeriesLabels();this.enterDataLabels();this.updateDataLabels();this.exitDataLabels();this.shouldEnterUpdateExit=false}if(this.shouldUpdateLines){this.drawLines();this.shouldUpdateLines=false}if(this.shouldUpdatePoints){this.drawPoints();this.shouldUpdatePoints=false}if(this.shouldSetGeometryAccessibilityAttributes){this.setGeometryAccessibilityAttributes();this.shouldSetGeometryAccessibilityAttributes=false}if(this.shouldSetGeometryAriaLabels){this.setGeometryAriaLabels();this.shouldSetGeometryAriaLabels=false}if(this.shouldSetGroupAccessibilityLabel){this.setGroupAccessibilityID();this.shouldSetGroupAccessibilityLabel=false}if(this.shouldUpdateColors){this.updateColors();this.shouldUpdateColors=false}if(this.shouldUpdateLegend){this.drawLegendElements();this.shouldUpdateLegend=false}if(this.shouldUpdateLabels){this.drawDataLabels();this.shouldUpdateLabels=false}if(this.shouldUpdateSeriesLabels){this.drawSeriesLabels();this.shouldUpdateSeriesLabels=false}if(this.addStrokeUnder){this.addStrokeUnder();this.shouldAddStrokeUnder=false}if(this.shouldUpdateReferenceLines){this.drawReferenceLines();this.shouldUpdateReferenceLines=false}if(this.shouldUpdateStrokeWidth){this.updateStrokeWidth();this.shouldUpdateStrokeWidth=false}if(this.shouldUpdateDotRadius){this.updateDotRadius();this.shouldUpdateDotRadius=false}if(this.shouldDrawInteractionState){this.updateInteractionState();this.shouldDrawInteractionState=false}if(this.shouldUpdateDashPatterns){this.updateStrokePattern();this.shouldUpdateDashPatterns=false}if(this.shouldSetLabelOpacity){this.setLabelOpacity();this.shouldSetLabelOpacity=false}if(this.shouldSetSeriesLabelOpacity){this.setSeriesLabelOpacity();this.shouldSetSeriesLabelOpacity=false}if(this.shouldSetSelectionClass){this.setSelectedClass();this.shouldSetSelectionClass=false}if(this.shouldUpdateLegendInteractivity){this.bindLegendInteractivity();this.shouldUpdateLegendInteractivity=false}if(this.shouldSetLegendCursor){this.setLegendCursor();this.shouldSetLegendCursor=false}if(this.shouldUpdateCursor){this.updateCursor();this.shouldUpdateCursor=false}if(this.shouldBindInteractivity){this.bindInteractivity();this.shouldBindInteractivity=false}if(this.shouldUpdateXAxis){this.drawXAxis();this.shouldUpdateXAxis=false}if(this.shouldSetXAxisAccessibility){this.setXAxisAccessibility();this.shouldSetXAxisAccessibility=false}if(this.shouldUpdateYAxis){this.drawYAxis();this.shouldUpdateYAxis=false}if(this.shouldSetYAxisAccessibility){this.setYAxisAccessibility();this.shouldSetYAxisAccessibility=false}if(this.shouldUpdateAnnotations){this.drawAnnotations();this.shouldUpdateAnnotations=false}if(this.shouldSetAnnotationAccessibility){this.setAnnotationAccessibility();this.shouldSetAnnotationAccessibility=false}if(this.shouldUpdateBaseline){this.drawBaseline();this.shouldUpdateBaseline=false}this.onChangeHandler();t("component did update")})).then((()=>this.drawEndEvent.emit({chartID:this.chartID})))}shouldValidateLocalizationProps(){const t=I();const s=t.i18Next.language;const i=t.i18Next.getResourceBundle(s);const h=t.numeral.localeData();if(this.shouldValidateLocalization&&!this.localization.skipValidation){this.shouldValidateLocalization=false;jt(this.chartID,Object.assign(Object.assign({},this.localization),{language:i,numeralLocale:h}))}}shouldValidateAccessibilityProps(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;It(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickEvent:this.suppressEvents?undefined:this.clickEvent.emit}})}}setDimensions(){this.padding=typeof this.padding==="string"?Lt(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}getLanguageString(){return z(this.localization)}setLocalizationConfig(){j(this.localization)}prepareScales(){if(this.nest){this.interpolating=this.nest;const t=this.x.domain();const s=this.x.range();const i=this.y.domain();const h=this.y.range();this.interpolating.x=this.x.domain(t).range(s);this.interpolating.y=a().domain(i).range(h);this.interpolating.line=A().x((t=>this.interpolating.x(t[this.ordinalAccessor]))).y((t=>this.interpolating.y(t[this.valueAccessor]))).curve(this.curveOptions[this.lineCurve]||this.curveOptions["linear"]);this.interpolating.map=this.map}const t=w(this.data,(t=>parseFloat(t[this.valueAccessor])));const s=W(this.data,(t=>parseFloat(t[this.valueAccessor])));this.y=a().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:t-(s-t)*.1,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:s+(s-t)*.1]).range([this.innerPaddedHeight,0]);let i=[];if(this.data[0][this.ordinalAccessor]instanceof Date){const t=W(this.data,(t=>t[this.ordinalAccessor]));const s=w(this.data,(t=>t[this.ordinalAccessor]));const h=l.count(s,t);const e=h/12;this.x=c().domain([s,t]).range([0,this.innerPaddedWidth]);i=this.data.map((t=>t[this.ordinalAccessor].getTime())).filter(((t,s,i)=>i.indexOf(t)===s)).sort(((t,s)=>t-s));if(this.xAxis.unit){const i=this.time["time"+this.xAxis.unit];this.x.domain([i.offset(s,-1),i.offset(t,+1)])}else{this.x.domain([new Date(l.offset(s,-e)),new Date(l.offset(t,e))])}}else{this.x=e().domain(this.data.map((t=>t[this.ordinalAccessor]))).padding(.5).range([0,this.innerPaddedWidth]);i=this.data.map((t=>t[this.ordinalAccessor])).filter(((t,s,i)=>i.indexOf(t)===s))}this.xIndex=e().domain(i).range([0,i.length-1]);this.line=A().defined((t=>!isNaN(t[this.valueAccessor])&&t[this.valueAccessor]!==null)).x((t=>this.x(t[this.ordinalAccessor]))).y((t=>this.y(t[this.valueAccessor]))).curve(this.curveOptions[this.lineCurve]||this.curveOptions["linear"])}prepareData(){const t=this.data.filter((t=>{const s=this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`];if(s&&(this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly)&&!t["enter"]&&!t["exit"]){t["hidden"]=s["data-label-hidden"];t["auto-x"]=s.x;t["auto-y"]=s.y;t["auto-text-anchor"]=s["text-anchor"]}return!isNaN(t[this.valueAccessor])&&t[this.valueAccessor]!==null}));this.nest=r().key((t=>t[this.seriesAccessor])).entries(this.data);this.dotNest=r().key((t=>t[this.seriesAccessor])).entries(t);this.map=r().key((t=>t[this.seriesAccessor])).map(t)}prepareLabelData(){if(this.nest){let t=[];let s=[];let i=[];let h=[];this.nest.forEach((e=>{const a=e.values;const r=L(a,(t=>t[this.valueAccessor]));const l=a[r];const o=S(a,(t=>t[this.valueAccessor]));const n=a[o];const c=a.find((t=>t[this.valueAccessor]!=null));const u=[...a].reverse().find((t=>t[this.valueAccessor]!=null));t.push(l);s.push(n);i.push(c);h.push(u)}));this.displayOnlyLabelData={first:i,last:h,min:t,max:s}}}updateInterpolationData(){if(this.interpolating){this.dotNest.forEach((t=>{t.interpolate={};const s=this.interpolating.map.get(t.key);const i=t.values;if(!s){t.interpolate.start=i;t.interpolate.end=i}else{const h=Nt(s,i,this.ordinalAccessor);if(!h.length){t.interpolate.start=s;t.interpolate.end=i}else{t.interpolate.start=h[0];t.interpolate.end=h[1]}}}));let t=this.nest.length;this.nest.forEach((s=>{s.interpolate={};const i=this.interpolating.map.get(s.key);const h=s.values;if(!i){s.interpolate.start=h;s.interpolate.end=h}else{const e=Nt(i,h,this.ordinalAccessor);if(!e.length){s.interpolate.start=i;s.interpolate.end=h;t--}else{s.interpolate.start=e[0];s.interpolate.end=e[1]}}}));if(!t&&this.nest.length===this.interpolating.length){this.interpolating=false}}}setSubTitleElements(){Kt({root:this.subTitleG,subTitle:this.subTitle})}setColors(){this.rawColors=this.colors?mt(this.colors):wt(this.colorPalette,this.nest.length);this.textColors={};let t=this.rawColors;this.strokes={};if(!this.accessibility.hideStrokes){t=[]}this.rawColors.forEach((s=>{if(!this.accessibility.hideStrokes){const i=F(s);const h=i.length===2?i[1]:i[0];this.strokes[s.toLowerCase()]=h;t.push(h)}this.textColors[s.toLowerCase()]=K(s,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=F(this.hoverStyle.color);const s=t.length===2?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=s}this.textColors[this.hoverStyle.color.toLowerCase()]=K(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=F(this.clickStyle.color);const s=t.length===2?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=s}this.textColors[this.clickStyle.color.toLowerCase()]=K(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=t}innerScopeDataKeys(){const t=[];ut.singleAccessors.forEach((s=>{if(this[s]&&w(this.data,(t=>t[this[s]]))!==undefined){t.push(s)}}));const s=Object.assign(Object.assign({},ut),{singleAccessors:t});return Ot(this,s,"line-chart")}setTableData(){const t=this.innerScopeDataKeys();this.tableData=St(this.data,t);this.tableColumns=Object.keys(t)}addStrokeUnder(){const t=$({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t);this.seriesLabelG.attr("filter",t)}renderRootElements(){this.svg=d(this.lineChartEl).select(".visa-viz-d3-line-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.lineG=this.rootG.append("g").attr("class","line-group line-wrapper-group");this.seriesLabelG=this.rootG.append("g").attr("class","line-series-wrapper");this.dotG=this.rootG.append("g").attr("class","dot-group");this.labels=this.rootG.append("g").attr("class","line-dataLabel-group");this.legendG=d(this.lineChartEl).select(".line-legend").append("svg");this.subTitleG=d(this.lineChartEl).select(".line-sub-title");this.tooltipG=d(this.lineChartEl).select(".line-tooltip");this.referencesG=this.rootG.append("g").attr("class","line-reference-line-group")}reSetRoot(){const t=G({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:D});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);const s=G({selection:this.root,duration:this.duration,namespace:"root_reset",easing:D});s.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`);const i=G({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:D});i.attr("transform",`translate(${this.padding.left}, ${this.padding.top})`);nt(this.chartID,this.width)}setGlobalSelections(){const t=this.lineG.selectAll(".line-plot").data(this.nest,(t=>t.key));this.enter=t.enter().append("path");this.exit=t.exit();this.update=t.merge(this.enter);this.enterSize=this.enter.size();const s=this.dotG.selectAll(".line-dot-wrapper").data(this.dotNest,(t=>t.key));this.enterDotWrappers=s.enter().append("g");this.exitDotWrappers=s.exit();this.updateDotWrappers=s.merge(this.enterDotWrappers);const i=this.seriesLabelG.selectAll(".line-series-label").data(this.dotNest,(t=>t.key));this.seriesLabelEnter=i.enter().append("text");this.seriesLabelExit=i.exit();this.seriesLabelUpdate=i.merge(this.seriesLabelEnter);const h=this.labels.selectAll("g").data(this.dotNest,(t=>t.key));this.enteringLabelGroups=h.enter().append("g");this.exitingLabelGroups=h.exit();this.updatingLabelGroups=h.merge(this.enteringLabelGroups);if(this.interpolating){this.updateDotWrappers.selectAll("circle").remove();const t=this.updateDotWrappers.selectAll("circle").data((t=>t.interpolate.start));this.enterDots=t.enter().append("circle");this.exitDots=t.exit();this.updateDots=t.merge(this.enterDots);this.updatingLabelGroups.selectAll(".line-dataLabel").remove();const s=this.updatingLabelGroups.selectAll(".line-dataLabel").data((t=>t.interpolate.start));this.enteringLabels=s.enter().append("text");this.exitingLabels=s.exit();this.updatingLabels=s.merge(this.enteringLabels)}else{const t=this.updateDotWrappers.selectAll("circle").data((t=>t.values),(t=>t[this.ordinalAccessor]));this.enterDots=t.enter().append("circle");this.exitDots=t.exit();this.updateDots=t.merge(this.enterDots);this.enterSize=this.enterDots.size();this.exitSize=this.exitDots.size();const s=this.updatingLabelGroups.selectAll(".line-dataLabel").data((t=>t.values),(t=>t[this.ordinalAccessor]));this.enteringLabels=s.enter().append("text");this.exitingLabels=s.exit();this.updatingLabels=s.merge(this.enteringLabels)}}setTestingAttributes(){if(this.unitTest){d(this.lineChartEl).select(".visa-viz-d3-line-container").attr("data-testid","chart-container");d(this.lineChartEl).select(".line-main-title").attr("data-testid","main-title");d(this.lineChartEl).select(".line-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.gridG.attr("data-testid","grid-group");this.referencesG.attr("data-testid","reference-line-group");this.lineG.attr("data-testid","line-group");this.update.attr("data-testid","line").attr("data-id",(t=>`line-${t.key}`));this.seriesLabelG.attr("data-testid","line-series-label-container");this.seriesLabelUpdate.attr("data-testid","line-series-label").attr("data-id",(t=>`line-series-label-${t.key}`));this.dotG.attr("data-testid","marker-group");this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",(t=>`marker-series-${t.key}`));this.updateDots.attr("data-testid","marker").attr("data-id",(t=>`marker-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`));this.labels.attr("data-testid","dataLabel-group-container");this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",(t=>`dataLabel-group-${t.key}`));this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(t=>`dataLabel-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`));this.svg.select("defs").attr("data-testid","pattern-defs")}else{d(this.lineChartEl).select(".visa-viz-d3-line-container").attr("data-testid",null);d(this.lineChartEl).select(".line-main-title").attr("data-testid",null);d(this.lineChartEl).select(".line-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.gridG.attr("data-testid",null);this.referencesG.attr("data-testid",null);this.lineG.attr("data-testid",null);this.update.attr("data-testid",null).attr("data-id",null);this.seriesLabelG.attr("data-testid",null);this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null);this.dotG.attr("data-testid",null);this.updateDotWrappers.attr("data-testid",null).attr("data-id",null);this.updateDots.attr("data-testid",null).attr("data-id",null);this.labels.attr("data-testid",null);this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null);this.updatingLabels.attr("data-testid",null).attr("data-id",null);this.svg.select("defs").attr("data-testid",null)}}drawXAxis(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.ordinalAccessor]?this.dataKeyNames[this.ordinalAccessor]:this.xAxis.label;const s=this.innerPaddedWidth/this.nest[0].values.length*.7;bt({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?s:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:t,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})}drawYAxis(){const t=this.yAxis.label&&this.yAxis.label!==""?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.valueAccessor]?this.dataKeyNames[this.valueAccessor]:this.yAxis.label;bt({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?this.padding.left:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:t,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})}setXAxisAccessibility(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.ordinalAccessor]?this.dataKeyNames[this.ordinalAccessor]:this.xAxis.label;ht({rootEle:this.lineChartEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x,xAxisLabel:t?t:""})}setYAxisAccessibility(){const t=this.yAxis.label&&this.yAxis.label!==""?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.valueAccessor]?this.dataKeyNames[this.valueAccessor]:this.yAxis.label;et({rootEle:this.lineChartEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y,yAxisLabel:t?t:""})}drawBaseline(){bt({root:this.gridG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0)||-1,hide:!this.showBaselineX,duration:this.duration})}drawXGrid(){gt(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){gt(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterLines(){this.enter.interrupt();this.enter.attr("class","line-plot entering").attr("d",(t=>this.line(t.values))).attr("data-d",(t=>this.line(t.values))).attr("data-translate-x",this.margin.left+this.padding.left);this.enter.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onHoverHandler(t.values[0],i[s],false)}}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null).attr("stroke-dasharray",((t,s,i)=>{t.linelength=i[s].getTotalLength();return t.linelength+" "+t.linelength})).attr("stroke-dashoffset",(t=>t.linelength)).attr("stroke-width",.1).transition("enter").duration(this.duration).ease(D).attr("stroke-dashoffset",0).attr("stroke-width",(t=>this.calculateStrokeWidth(t,true))).call(Pt,(()=>{this.enter.attr("stroke-dasharray",this.handleStrokeDasharray)}))}updateLines(){this.update.interrupt();this.update.transition("opacity").ease(D).duration(this.duration).attr("opacity",(t=>{const s=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;if(!this.seriesInteraction){return s}else if(this.secondaryLines.keys.includes(t.key)){return dt(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}else{return dt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}}))}exitLines(){this.exit.attr("stroke-dasharray",((t,s,i)=>{t.linelength=i[s].getTotalLength();return t.linelength+" "+t.linelength})).transition("exit").ease(D).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",(t=>t.linelength)).attr("stroke-width",.1).remove()}drawLines(){if(this.interpolating){this.update.attr("d",((t,s,i)=>{if(d(i[s]).classed("entering")){return this.line(t.values)}return this.interpolating.line(t.interpolate.start)}))}this.update.attr("stroke",this.handleLineStroke).attr("fill","none").attr("data-d",(t=>this.interpolating?this.line(t.interpolate.end):this.line(t.values))).attr("data-translate-x",this.margin.left+this.padding.left).transition("update").ease(D).duration(this.duration).attr("d",(t=>this.interpolating?this.line(t.interpolate.end):this.line(t.values))).call(Pt,(()=>{this.update.classed("entering",false).attr("d",(t=>this.line(t.values))).attr("stroke-dasharray",this.handleStrokeDasharray)}))}enterPoints(){this.enterDotWrappers.interrupt();this.enterDots.interrupt();this.enterDotWrappers.attr("class","line-dot-wrapper").attr("fill",((t,s)=>this.rawColors[s]||this.rawColors[0])).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onHoverHandler(t.values[0],i[s],false)}}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null).each(((t,s,i)=>{M(i[s])}));this.enterDots.each(((t,s,i)=>{M(i[s])})).attr("stroke",this.handleDotStroke).attr("cursor",!this.suppressEvents?this.cursor:null).attr("data-fill",true).attr("data-translate-x",this.margin.left+this.padding.left).on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s],true):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);if(this.interpolating){this.enterDots.attr("cx",(t=>this.interpolating.x(t[this.ordinalAccessor]))).attr("cy",(t=>this.interpolating.y(t[this.valueAccessor]))).attr("r",(t=>t.enter?0:ft(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):pt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2));this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",(t=>this.x(t[this.ordinalAccessor]))).attr("cy",(t=>this.y(t[this.valueAccessor]))).classed("entering",true).attr("opacity",0)}this.updateDotWrappers.order();this.updateDots.order()}updatePoints(){this.updateDotWrappers.interrupt();this.updateDots.interrupt();const t=this.showDots?1:0;this.updateDotWrappers.attr("opacity",(t=>{const s=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return s}));if(this.interpolating){this.updateDots.attr("opacity",(t=>{this.exitSize+=t.exit?1:0;this.enterSize+=t.enter?1:0;return t.enter?0:1}));this.updateDots=this.updateDotWrappers.selectAll("circle").data((t=>t.interpolate.end)).classed("exiting",(t=>t.exit));this.updateDots.transition("opacity").ease(D).duration(((t,s,i)=>{if(d(i[s]).classed("entering")){return this.duration/2}return this.duration})).delay(((t,s,i)=>{if(d(i[s]).classed("entering")){return this.duration*.75*(s/(i.length-1))}return 0})).attr("opacity",(s=>dt(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))).attr("data-index",(t=>this.xIndex(t[this.ordinalAccessor]instanceof Date?t[this.ordinalAccessor].getTime():t[this.ordinalAccessor])))}else{this.updateDots.transition("opacity").ease(D).duration(this.duration).attr("opacity",(s=>dt(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))).attr("data-index",(t=>this.xIndex(t[this.ordinalAccessor]instanceof Date?t[this.ordinalAccessor].getTime():t[this.ordinalAccessor])))}}exitPoints(){this.exitDots.interrupt();this.exitDots.transition("exit").ease(D).duration(this.duration).attr("opacity",0).attr("r",0);this.exitDotWrappers.selectAll("circle").each((t=>{t.exitWholeGroup=true})).transition("exit").ease(D).duration(this.duration/2).delay(((t,s,i)=>this.duration-this.duration*(s/(i.length-1)))).attr("opacity",0).attr("r",0);this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay(((t,s,i)=>this.duration-this.duration*(s/(i.length-1)))).ease(D).call(Pt,(()=>{const t=lt(this.rootG.node());this.exitDots.remove();this.exitDotWrappers.remove();this.svg.selectAll(".exiting").remove();this.updateDots=this.updateDotWrappers.selectAll("circle");this.updatingLabels=this.updatingLabelGroups.selectAll(".line-dataLabel");this.setChartCountAccessibility();this.setGroupAccessibilityID();this.setGeometryAriaLabels();rt({parentGNode:this.rootG.node(),focusDidExist:t})}))}drawPoints(){this.updateDotWrappers.transition("update").ease(D).duration(this.hoverHighlight||this.clickHighlight?0:this.duration);let t;if(this.interpolating){t=this.updateDots.attr("data-cx",(t=>this.x(t[this.ordinalAccessor]))).attr("data-cy",(t=>this.y(t[this.valueAccessor]))).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-r",(t=>t.exit?0:ft(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):pt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).transition("update").ease(D).duration(((t,s,i)=>{if(d(i[s]).classed("entering")){return this.duration/2}return this.duration})).delay(((t,s,i)=>{if(d(i[s]).classed("entering")){return this.duration*.75*(s/(i.length-1))}return 0})).attr("r",(t=>t.exit?0:ft(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):pt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2))}else{t=this.updateDots.attr("r",(t=>ft(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):pt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("data-cx",(t=>this.x(t[this.ordinalAccessor]))).attr("data-cy",(t=>this.y(t[this.valueAccessor]))).attr("data-translate-x",this.padding.left+this.margin.left).attr("data-r",(t=>ft(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):pt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).transition("update").ease(D).duration(this.duration)}this.updateDots.attr("stroke",this.handleDotStroke);t.attr("cx",(t=>this.x(t[this.ordinalAccessor]))).attr("cy",(t=>this.y(t[this.valueAccessor]))).call(Pt,(()=>{this.updateDots.classed("entering",false).each((t=>{t.enter=false}));rt({parentGNode:this.rootG.node()});this.transitionEndEvent.emit({chartID:this.chartID})}))}updateStrokePattern(){this.update.attr("stroke-dasharray",this.handleStrokeDasharray)}updateDotRadius(){this.updateDots.each(((t,s,i)=>{const h=d(i[s]);if(!t.enter&&!h.classed("entering")&&!t.exit){h.attr("r",(()=>ft(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):pt(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2))}})).attr("stroke",this.handleDotStroke)}setSelectedClass(){this.updateDots.classed("highlight",((t,s,i)=>{let h=dt(t,true,false,"",this.clickHighlight,this.innerInteractionKeys);h=this.clickHighlight&&this.clickHighlight.length?h:false;const e=this.accessibility.elementsAreInterface;ot(i[s],h,e);return h}))}validateSeriesLabels(){this.labelDetails=Object.assign({},this.seriesLabel);if(!this.labelDetails.placement){this.labelDetails.placement=""}if(!this.labelDetails.label||!this.labelDetails.label.length){this.labelDetails.label=""}this.isRight=this.labelDetails.placement!=="left"}enterSeriesLabels(){this.seriesLabelEnter.interrupt();this.seriesLabelEnter.attr("opacity",(t=>{const s=!this.seriesLabel.visible?0:this.secondaryLines.keys.includes(t.key)&&(!this.secondaryLines.showSeriesLabel||this.secondaryLines.opacity<1)?0:1;if(!this.seriesInteraction){return s}else{return dt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON}})).attr("class","line-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onHoverHandler(t.values[0],i[s],false)}}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor]):this.y(t.values[0][this.valueAccessor]))).attr("text-anchor",this.isRight?"start":"end").attr("dx",this.isRight?"0.1em":"-0.1em").attr("dy","0.3em")}updateSeriesLabels(){this.seriesLabelUpdate.interrupt();this.seriesLabelUpdate.transition("opacity").ease(D).duration(this.duration).attr("opacity",(t=>{const s=!this.seriesLabel.visible?0:this.secondaryLines.keys.includes(t.key)&&(!this.secondaryLines.showSeriesLabel||this.secondaryLines.opacity<1)?0:1;if(!this.seriesInteraction){return s}else{return dt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1}}))}exitSeriesLabels(){this.seriesLabelExit.transition("exit").ease(D).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(){const t=this.labelDetails.placement!=="auto"&&this.labelDetails.collisionHideOnly;this.seriesLabelUpdate.text(((t,s)=>this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showSeriesLabel?"":this.labelDetails.label?this.labelDetails.label[s]:!t.key||t.key==="undefined"?"":t.key));const s=this.seriesLabelUpdate.style("visibility",((t,s,i)=>this.labelDetails.placement==="auto"||this.labelDetails.collisionHideOnly?d(i[s]).style("visibility"):null)).attr("data-x",this.isRight?this.innerPaddedWidth+10:0).attr("data-y",((t,s,i)=>{const h=i[s];const e=getComputedStyle(h);const a=parseFloat(e.fontSize);const r=Math.max(a-1,1);return this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor])+.3*r:this.y(t.values[0][this.valueAccessor])+.3*r})).attr("data-translate-x",this.padding.left+this.margin.left).attr("dx",this.isRight?"0.1em":"-0.1em").attr("dy","0.3em").attr("data-text-anchor",this.isRight?"start":"end").attr("data-use-dx",t).attr("data-use-dy",t).transition("update").ease(D).duration(this.duration);if(this.labelDetails.visible&&(this.labelDetails.placement==="auto"||this.labelDetails.collisionHideOnly)){this.bitmaps=Ft({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,1,1],accessors:["key"],size:[zt(this.width,0),zt(this.innerPaddedHeight,0)],hideOnly:this.labelDetails.visible&&t});if(t){s.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor]):this.y(t.values[0][this.valueAccessor]))).attr("dx",this.isRight?"0.1em":"-0.1em").attr("dy","0.3em")}}else{s.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor]):this.y(t.values[0][this.valueAccessor]))).attr("dx",this.isRight?"0.1em":"-0.1em").attr("dy","0.3em")}}enterDataLabels(){this.enteringLabelGroups.interrupt();this.enteringLabelGroups.attr("class","line-label-wrapper").attr("opacity",0).attr("fill",((t,s)=>this.rawColors[s]||this.rawColors[0]));this.enteringLabels.attr("fill",this.handleTextFill);if(this.interpolating){const t=this.enteringLabels.attr("class","line-dataLabel").attr("opacity",Number.EPSILON);Ct({root:t,xScale:this.interpolating.x,yScale:this.interpolating.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"line"});this.updatingLabels.attr("opacity",(t=>t.enter?Number.EPSILON:dt(t,yt(this.dataLabel.visible,this.dataLabel.displayOnly,t,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]),this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:yt(this.dataLabel.visible,this.dataLabel.displayOnly,t,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor])));const s=this.enteringLabelGroups.selectAll(".line-dataLabel").attr("opacity",Number.EPSILON).classed("entering",true);Ct({root:s,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"line"})}else{const t=this.enteringLabels.attr("opacity",Number.EPSILON).attr("class","line-dataLabel");Ct({root:t,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"line"})}if(this.dataLabel.placement==="auto"){this.updatingLabels.each(((t,s,i)=>{if(!t.enter&&!t.exit&&!t.hidden&&(t["auto-x"]||t["auto-x"]===0)&&(t["auto-y"]||t["auto-y"]===0)){d(i[s]).attr("x",+d(i[s]).attr("x")+(+t["auto-x"]||0)).attr("y",+d(i[s]).attr("y")+(+t["auto-y"]||0)).attr("text-anchor",t["auto-text-anchor"])}}))}}updateDataLabels(){this.updatingLabelGroups.interrupt("opacity");this.updatingLabelGroups.attr("opacity",(t=>{const s=!this.dataLabel.visible?0:this.secondaryLines.keys.includes(t.key)&&(!this.secondaryLines.showDataLabel||this.secondaryLines.opacity<1)?0:1;return s}));if(this.interpolating){this.updatingLabels=this.updatingLabelGroups.selectAll(".line-dataLabel").data((t=>t.interpolate.end)).classed("exiting",(t=>t.exit));this.updatingLabels.transition("opacity").ease(D).duration(((t,s,i)=>{if(d(i[s]).classed("entering")){return this.duration/2}return this.duration})).delay(((t,s,i)=>{if(d(i[s]).classed("entering")){return this.duration*.75*(s/(i.length-1))}return 0})).attr("opacity",((t,s,i)=>{const h=t.exit?0:dt(t,yt(this.dataLabel.visible,this.dataLabel.displayOnly,t,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]),this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:yt(this.dataLabel.visible,this.dataLabel.displayOnly,t,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]);const e=+d(i[s].parentNode).attr("opacity");d(i[s]).attr("data-hidden",e===0||h===0?"true":null);return h}))}else{this.updatingLabels.attr("opacity",((t,s,i)=>{const h=dt(t,yt(this.dataLabel.visible,this.dataLabel.displayOnly,t,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]),this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:yt(this.dataLabel.visible,this.dataLabel.displayOnly,t,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]);const e=+d(i[s].parentNode).attr("opacity");d(i[s]).attr("data-hidden",e===0||h===0?"true":null);return h}))}}exitDataLabels(){this.exitingLabels.interrupt();this.exitingLabels.attr("data-hidden","true").transition("exit").ease(D).duration(this.duration).attr("opacity",0).remove();this.exitingLabelGroups.attr("data-hidden","true").selectAll(".line-dataLabel").transition("exit").ease(D).duration(this.duration/2).delay(((t,s,i)=>this.duration-this.duration*(s/(i.length-1)))).attr("opacity",0).call(Pt,(()=>{this.exitingLabelGroups.remove()}))}drawDataLabels(){const t=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;let s=this.updatingLabels.text((t=>At(t,this.innerLabelAccessor,this.dataLabel.format)));if(this.interpolating){s=this.updatingLabels.style("visibility",((t,s,i)=>this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly?t.hidden?"hidden":d(i[s]).style("visibility"):null)).attr("data-x",(t=>this.x(t[this.ordinalAccessor]))).attr("data-y",(t=>this.y(t[this.valueAccessor]))).attr("data-translate-x",this.margin.left+this.padding.left).transition("update").ease(D).duration(((t,s,i)=>{if(d(i[s]).classed("entering")){return this.duration/2}return this.duration})).delay(((t,s,i)=>{if(d(i[s]).classed("entering")){return this.duration*.75*(s/(i.length-1))}return 0}))}else{s=this.updatingLabels.style("visibility",((t,s,i)=>this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly?t.hidden?"hidden":d(i[s]).style("visibility"):null)).attr("data-x",(t=>this.x(t[this.ordinalAccessor]))).attr("data-y",(t=>this.y(t[this.valueAccessor]))).attr("data-translate-x",this.margin.left+this.padding.left).transition("update").ease(D).duration(this.duration)}const i=this.dataLabel&&this.dataLabel.collisionPlacement;const h=t?["middle"]:i&&this.collisionSettings[i]?this.collisionSettings[i].validPositions:this.collisionSettings["all"].validPositions;const e=t?[1]:i&&this.collisionSettings[i]?this.collisionSettings[i].offsets:this.collisionSettings["all"].offsets;this.bitmaps=Ct({root:s,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"line",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",labelSelection:s,avoidMarks:[this.updateDots,this.update],validPositions:h,offsets:e,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[zt(this.width,0),zt(this.innerPaddedHeight,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}});s.call(Pt,(()=>{this.hiddenHash={};this.updatingLabels.each(((t,s,i)=>{this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":d(i[s]).attr("data-label-hidden")==="true",x:+d(i[s]).attr("x")-+d(i[s]).attr("data-x"),y:+d(i[s]).attr("y")-+d(i[s]).attr("data-y"),"text-anchor":d(i[s]).attr("text-anchor")}}))}))}updateStrokeWidth(){this.update.attr("stroke-width",(t=>this.calculateStrokeWidth(t,true)));this.updateDots.attr("stroke",this.handleDotStroke)}updateColors(){this.updateDotWrappers.attr("fill",((t,s)=>this.rawColors[s]||this.rawColors[0]));this.updateDots.attr("stroke",this.handleDotStroke);this.update.attr("stroke",this.handleLineStroke);this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill);this.updatingLabelGroups.attr("fill",((t,s)=>this.rawColors[s]||this.rawColors[0]));this.updatingLabels.attr("fill",this.handleTextFill)}setLabelOpacity(){const t=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;const s=this.dataLabel.placement==="auto"||t;const i=this.dataLabel&&this.dataLabel.collisionPlacement;this.updatingLabelGroups.attr("opacity",(t=>{const s=!this.dataLabel.visible?0:this.secondaryLines.keys.includes(t.key)&&(!this.secondaryLines.showDataLabel||this.secondaryLines.opacity<1)?0:1;return s}));if(this.interpolating){this.updatingLabels.each(((s,i,h)=>{const e=d(h[i]);const a=+e.attr("opacity");const r=e.style("visibility");if(!s.enter&&!e.classed("entering")&&!s.exit){e.attr("opacity",(()=>{const l=dt(s,yt(this.dataLabel.visible,this.dataLabel.displayOnly,s,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]),this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:yt(this.dataLabel.visible,this.dataLabel.displayOnly,s,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]);const o=+d(h[i].parentNode).attr("opacity");e.attr("data-hidden",o===0||l===0?"true":null);if((l===1&&r==="hidden"||a!==l)&&(this.dataLabel.placement==="auto"||t)){if(l===1){d(h[i]).classed("collision-added",true).style("visibility",null)}else{d(h[i]).classed("collision-removed",true)}}return l}))}}))}else{this.updatingLabels.attr("opacity",((s,i,h)=>{const e=+d(h[i]).attr("opacity");const a=d(h[i]).style("visibility");const r=dt(s,yt(this.dataLabel.visible,this.dataLabel.displayOnly,s,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]),this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:yt(this.dataLabel.visible,this.dataLabel.displayOnly,s,this.displayOnlyLabelData,[this.ordinalAccessor,this.seriesAccessor]);const l=+d(h[i].parentNode).attr("opacity");d(h[i]).attr("data-hidden",l===0||r===0?"true":null);if((r===1&&a==="hidden"||e!==r)&&(this.dataLabel.placement==="auto"||t)){if(r===1){d(h[i]).classed("collision-added",true).style("visibility",null)}else{d(h[i]).classed("collision-removed",true)}}return r}))}if(s){const s=this.updatingLabels.filter(((t,s,i)=>d(i[s]).classed("collision-added"))).transition().duration(0);const h=this.updatingLabels.filter(((t,s,i)=>d(i[s]).classed("collision-removed")));const e=t?["middle"]:i&&this.collisionSettings[i]?this.collisionSettings[i].validPositions:this.collisionSettings["all"].validPositions;const a=t?[1]:i&&this.collisionSettings[i]?this.collisionSettings[i].offsets:this.collisionSettings["all"].offsets;if(h.size()>0){this.bitmaps=Ft({bitmaps:this.bitmaps,labelSelection:h,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[zt(this.width,0),zt(this.innerPaddedHeight,0)],hideOnly:false,removeOnly:true});h.classed("collision-removed",false)}if(s.size()>0){this.bitmaps=Ct({root:s,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"line",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[this.updateDots,this.update],validPositions:e,offsets:a,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[zt(this.width,0),zt(this.innerPaddedHeight,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:true}});s.call(Pt,(()=>{this.updatingLabels.each(((t,s,i)=>{d(i[s]).classed("collision-added",false);this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":d(i[s]).attr("data-label-hidden")==="true",x:+d(i[s]).attr("x")-+d(i[s]).attr("data-x"),y:+d(i[s]).attr("y")-+d(i[s]).attr("data-y"),"text-anchor":d(i[s]).attr("text-anchor")}}))}))}}}setSeriesLabelOpacity(){const t=this.labelDetails.placement!=="auto"&&this.labelDetails.collisionHideOnly;const s=this.labelDetails.placement==="auto"||t;this.seriesLabelUpdate.interrupt("opacity");this.seriesLabelUpdate.attr("opacity",((s,i,h)=>{const e=+d(h[i]).attr("opacity");const a=d(h[i]).style("visibility");const r=!this.seriesLabel.visible?0:this.secondaryLines.keys.includes(s.key)&&(!this.secondaryLines.showSeriesLabel||this.secondaryLines.opacity<1)?0:1;if(!this.seriesInteraction){d(h[i]).attr("data-hidden",r===0?"true":null);return r}else{const l=dt(s.values[0],r,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;d(h[i]).attr("data-hidden",l===0?"true":null);if((l===1&&a==="hidden"||e!==l)&&(this.labelDetails.placement==="auto"||t)){if(l===1){d(h[i]).classed("collision-added",true).style("visibility",null)}else{d(h[i]).classed("collision-removed",true)}}return l}}));if(s){const s=this.seriesLabelUpdate.filter(((t,s,i)=>d(i[s]).classed("collision-added"))).attr("data-text-anchor",((t,s,i)=>d(i[s]).attr("collision-text-anchor")||d(i[s]).attr("data-text-anchor"))).attr("collision-text-anchor",null);const i=this.seriesLabelUpdate.filter(((t,s,i)=>d(i[s]).classed("collision-removed"))).attr("data-use-dx",t).attr("data-use-dy",t).attr("keep-data-y",t).attr("collision-text-anchor",((t,s,i)=>d(i[s]).attr("data-text-anchor"))).attr("data-text-anchor",null);if(i.size()>0){this.bitmaps=Ft({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[zt(this.width,0),zt(this.innerPaddedHeight,0)],hideOnly:false,removeOnly:true});i.classed("collision-removed",false).attr("keep-data-y",null)}if(s.size()>0){if(this.labelDetails.visible&&(this.labelDetails.placement==="auto"||this.labelDetails.collisionHideOnly)){this.bitmaps=Ft({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,1,1],accessors:["key"],size:[zt(this.width,0),zt(this.innerPaddedHeight,0)],hideOnly:this.labelDetails.visible&&t,suppressMarkDraw:true});if(t){s.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor]):this.y(t.values[0][this.valueAccessor]))).attr("dx",this.isRight?"0.1em":"-0.1em").attr("dy","0.3em")}}s.classed("collision-added",false)}}}updateInteractionState(){this.update.interrupt("opacity");const t=this.showDots?1:0;this.update.attr("opacity",(t=>{const s=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;if(!this.seriesInteraction){return s}else if(this.secondaryLines.keys.includes(t.key)){return dt(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}else{return dt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}}));this.updateDotWrappers.attr("opacity",(t=>{const s=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return s}));this.updateDots.each(((s,i,h)=>{const e=d(h[i]);if(!s.enter&&!e.classed("entering")&&!s.exit){e.attr("opacity",(()=>dt(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)))}}));rt({parentGNode:this.rootG.node()});xt({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}updateCursor(){this.update.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updateDotWrappers.attr("cursor",!this.suppressEvents?this.cursor:null);this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updatingLabels.attr("cursor",!this.suppressEvents?this.cursor:null)}drawReferenceLines(){$t({groupName:"line",root:this.referencesG,referenceLines:this.referenceLines,referenceStyle:this.referenceStyle,innerPaddedWidth:this.innerPaddedWidth,innerPaddedHeight:this.innerPaddedHeight,duration:this.duration,x:this.x,y:this.y,unitTest:this.unitTest})}drawAnnotations(){ct({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){at(this.getLanguageString(),this.lineChartEl,this.annotations,this.referenceLines)}drawLegendElements(){const t=this.seriesAccessor===O.seriesAccessor&&this.nest&&this.nest.length===1&&this.nest[0].key==="undefined";vt({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:!this.accessibility.hideTextures?this.dashPatterns:null,margin:this.margin,padding:this.padding,duration:this.duration,type:"line",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible&&!t||!this.legend||!this.seriesAccessor),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){d(this.lineChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.hoverEvent.emit({data:t.values[0],target:i[s]})}}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?()=>this.onMouseOutHandler():null)}setLegendCursor(){d(this.lineChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)}bindInteractivity(){this.update.on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onHoverHandler(t.values[0],i[s],false)}}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null);this.updateDots.on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s],true):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);this.dotG.selectAll(".line-dot-wrapper").on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onHoverHandler(t.values[0],i[s],false)}}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null);this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onHoverHandler(t.values[0],i[s],false)}}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null);this.updatingLabels.on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s],true):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null)}setTagLevels(){this.topLevel=H(this.highestHeadingLevel);this.bottomLevel=H(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){q({language:this.getLanguageString(),rootEle:this.lineChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"line-chart",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled,hideDataTable:this.accessibility.hideDataTableButton});this.shouldRedrawWrapper=false}setParentSVGAccessibility(){X({chartTag:"line-chart",language:this.getLanguageString(),node:this.svg.node(),title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:this.innerScopeDataKeys(),dataKeyNames:this.dataKeyNames,groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.updateDots.each(((t,s,i)=>{M(i[s])}))}setGeometryAriaLabels(){const t=this.innerScopeDataKeys();this.updateDots.each(((s,i,h)=>{R({chartTag:"line-chart",language:this.getLanguageString(),node:h[i],geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupName:"line",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});B({node:h[i],uniqueID:this.chartID})}))}setGroupAccessibilityID(){this.updateDotWrappers.each(((t,s,i)=>{B({node:i[s],uniqueID:this.chartID})}))}setChartAccessibilityTitle(){_(this.getLanguageString(),this.lineChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){Y(this.getLanguageString(),this.lineChartEl,this.subTitle)}setChartAccessibilityLongDescription(){U(this.getLanguageString(),this.lineChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){J(this.getLanguageString(),this.lineChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){Q(this.getLanguageString(),this.lineChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){Z(this.getLanguageString(),this.lineChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){tt(this.getLanguageString(),this.lineChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){it({rootEle:this.lineChartEl,parentGNode:this.dotG.node(),chartTag:"line-chart",geomType:"point",groupName:"line"})}setChartAccessibilityStructureNotes(){st(this.getLanguageString(),this.lineChartEl,this.accessibility.structureNotes)}onChangeHandler(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){const t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.interpolating=false;this.updated=false;this.enterSize=0;this.exitSize=0}onClickHandler(t,s){this.clickEvent.emit({data:t,target:s})}onHoverHandler(t,s,i){Tt(this.chartID,true);this.hoverEvent.emit({data:t,target:s});if(this.showTooltip&&i){this.eventsTooltip({data:t,evt:f,isToShow:true})}}onMouseOutHandler(){Tt(this.chartID,false);this.mouseOutEvent.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}}setTooltipInitialStyle(){Dt(this.tooltipG)}eventsTooltip({data:t,evt:s,isToShow:i}){kt({root:this.tooltipG,data:t,event:s,isToShow:i,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,dataKeyNames:this.dataKeyNames,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"line"})}render(){this.drawStartEvent.emit({chartID:this.chartID});this.init();if(this.shouldSetLocalizationConfig){this.setLocalizationConfig();this.shouldSetLocalizationConfig=false}if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateLabelData){this.prepareLabelData();this.shouldUpdateLabelData=false}if(this.shouldUpdateInterpolationData){this.updateInterpolationData();this.shouldUpdateInterpolationData=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.shouldValidate=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateSeriesLabels){this.validateSeriesLabels();this.shouldValidateSeriesLabels=false}return i("div",{key:"32f50d9a9b72780567bb703bbb9c73b6c723c40f",class:"o-layout"},i("div",{key:"f1ad34d4b7e6a6c9ede289425e8c8ce899d1a9fc",class:"o-layout--chart"},i(this.topLevel,{key:"15f50ade0c0ee996bf32213981cfc82e269870da",class:"line-main-title vcl-main-title"},this.mainTitle),i(this.bottomLevel,{key:"9622da80983e75a0612025d0583214a8c93215fe",class:"visa-ui-text--instructions line-sub-title vcl-sub-title"}),i("div",{key:"c57516115116ba6f26a812fd22b18b5fdd217ea7",class:"line-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),i("keyboard-instructions",{key:"a4a78c6b7785038157dda2068ec96c0dce152c01",uniqueID:this.chartID,geomType:"point",groupName:"line",language:this.getLanguageString(),chartTag:"line-chart",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),i("div",{key:"9d520b1e1dcad04654925cb6be0ebe69c95a863b",class:"visa-viz-d3-line-container"}),i("div",{key:"78ec230ea7823ff47f18f14d7acdc733cbf7043c",class:"line-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),i("data-table",{key:"9960d35b4c81f9228456867122f8371c3a29c2bc",uniqueID:this.chartID,isCompact:true,language:this.getLanguageString(),tableColumns:this.tableColumns,dataKeyNames:this.dataKeyNames,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(O);let s=0;const i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(s=0;s<t.length;s++){const h=!i[t[s]]?false:this[t[s]]===i[t[s]].exception;this[t[s]]=this[t[s]]||h?this[t[s]]:O[t[s]]}}get lineChartEl(){return h(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],lineCurve:["lineCurveWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],localization:["localizationWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],dataKeyNames:["dataKeyNamesWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}};window["VisaChartsLibOSSLicenses"]=Wt();Ht.style=E;export{Ht as line_chart};
//# sourceMappingURL=p-4a24fd92.entry.js.map