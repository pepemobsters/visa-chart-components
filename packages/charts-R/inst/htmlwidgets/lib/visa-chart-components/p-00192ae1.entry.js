/**
 * Copyright (c) 2024 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as s,h as i,g as h}from"./p-b0ab226b.js";import{p as e}from"./p-bb2c1516.js";import{n as a,l as r}from"./p-42dcf457.js";import{t as l,a as o,b as n,s as c}from"./p-e3c165be.js";import{U as u,s as f,e as d}from"./p-5fcd3c02.js";import{v as b}from"./p-b5f7528a.js";import{t as p,a as m,s as y,b as g,c as v}from"./p-09f6650c.js";import{m as x,a as L}from"./p-848274b2.js";import{m as k}from"./p-f9c89fe4.js";import{m as $}from"./p-e1d72334.js";import{c as A}from"./p-3f5e41ff.js";import"./p-b6ae930f.js";import"./p-6e7316e2.js";const{propDefaultValues:W}=u;class w{}w.mainTitle="Dumbbell Plot Title";w.subTitle=W.subTitle.text;w.height=300;w.width=650;w.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};w.padding={top:20,bottom:50,right:50,left:50};w.localization=W.localization;w.ordinalAccessor="date";w.valueAccessor="value";w.seriesAccessor="category";w.focusMarker={key:"",sizeFromBar:12};w.marker={visible:true,type:"dot",sizeFromBar:8};w.barStyle={opacity:1,width:1,colorRule:"default"};w.differenceLabel={visible:false,placement:"left",calculation:"difference",format:"0[.][0][0]a",collisionHideOnly:false};w.layout=W.layout;w.accessibility=W.accessibility;w.animationConfig=W.animationConfig;w.highestHeadingLevel=W.highestHeadingLevel;w.sortOrder=W.sortOrder;w.xAxis=W.xAxisDate;w.yAxis=W.yAxis;w.showBaselineX=W.showBaselineFalse;w.showBaselineY=W.showBaselineFalse;w.wrapLabel=W.wrapLabel;w.colorPalette=W.colorPaletteCategorical;w.hoverStyle=W.hoverStyle;w.clickStyle=W.clickStyle;w.referenceStyle=W.referenceStyle;w.cursor=W.cursor;w.roundedCorner=W.roundedCorner;w.barIntervalRatio=W.barIntervalRatio;w.hoverOpacity=W.hoverOpacity;w.dataLabel=W.dataLabelEnds;w.legend=W.hiddenLegend;w.tooltipLabel=W.tooltipLabel;w.showTooltip=W.showTooltip;w.suppressEvents=W.suppressEvents;w.referenceLines=W.referenceLines;w.annotations=W.annotations;w.clickHighlight=W.clickHighlight;w.seriesLabel=W.seriesLabel;const S=".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}dumbbell-plot{cursor:default}dumbbell-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}dumbbell-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}dumbbell-plot .hidden{display:none}dumbbell-plot .axis{font-size:12px}dumbbell-plot .axis text{fill:#767676}dumbbell-plot .axis-label{text-anchor:middle;font:1rem sans-serif}dumbbell-plot .axis-mark{color:transparent;stroke-width:2px;opacity:1}dumbbell-plot .axis path{stroke:black}dumbbell-plot .x.axis path{stroke:transparent}dumbbell-plot .y.axis path{stroke:transparent}dumbbell-plot .grid line{stroke:#c9c9c9;stroke-opacity:0.6}dumbbell-plot .grid path{stroke-width:0;stroke:#767676}dumbbell-plot .dumbbell-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}dumbbell-plot .dumbbell-group__inactive{opacity:0}dumbbell-plot .dumbbell-group .dot{stroke:#ffffff}dumbbell-plot .dumbbell-group .dumbbell-series-label{font-size:1em}dumbbell-plot .dumbbell-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .dumbbell-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .annotations{pointer-events:none}dumbbell-plot .annotations .handle{pointer-events:all}";const D=S;const{getGlobalInstances:T,configLocalization:O,getActiveLanguageString:C,getAccessibleStrokes:z,ensureTextContrast:I,createTextStrokeFilter:M,createUrl:E,initializeDescriptionRoot:j,initializeElementAccess:P,setElementFocusHandler:_,setElementAccessID:F,setAccessibilityController:N,hideNonessentialGroups:K,setAccessTitle:G,setAccessSubtitle:H,setAccessLongDescription:X,setAccessExecutiveSummary:Y,setAccessPurpose:B,setAccessContext:q,setAccessStatistics:V,setAccessChartCounts:R,setAccessXAxis:U,setAccessYAxis:J,setAccessStructure:Q,setAccessAnnotation:Z,retainAccessFocus:tt,checkAccessFocus:st,setElementInteractionAccessState:it,setAccessibilityDescriptionWidth:ht,drawTooltip:et,annotate:at,chartAccessors:rt,checkInteraction:lt,checkClicked:ot,checkHovered:nt,checkLabelDisplayOnly:ct,convertVisaColor:ut,drawAxis:ft,drawGrid:dt,drawLegend:bt,setLegendInteractionState:pt,formatDataLabel:mt,getColors:yt,getLicenses:gt,getPadding:vt,getScopedData:xt,initTooltipStyle:Lt,overrideTitleTooltip:kt,placeDataLabels:$t,scopeDataKeys:At,transitionEndAll:Wt,validateAccessibilityProps:wt,validateLocalizationProps:St,findTagLevel:Dt,prepareRenderChange:Tt,roundTo:Ot,getTextWidth:Ct,resolveLabelCollision:zt,setSubTitle:It,setReferenceLine:Mt}=u;const Et=class{constructor(i){t(this,i);this.clickEvent=s(this,"clickEvent",7);this.hoverEvent=s(this,"hoverEvent",7);this.mouseOutEvent=s(this,"mouseOutEvent",7);this.initialLoadEvent=s(this,"initialLoadEvent",7);this.initialLoadEndEvent=s(this,"initialLoadEndEvent",7);this.drawStartEvent=s(this,"drawStartEvent",7);this.drawEndEvent=s(this,"drawEndEvent",7);this.transitionEndEvent=s(this,"transitionEndEvent",7);this.shouldValidateAccessibility=true;this.shouldValidateLocalization=true;this.updated=true;this.time={timemillisecond:l,timesecond:o,timeminute:n,timehour:p,timeday:m,timeweek:y,timemonth:g,timeyear:v};this.shouldUpdateLayout=false;this.shouldValidate=false;this.shouldUpdateAnnotations=false;this.shouldUpdateReferenceLines=false;this.shouldResetRoot=false;this.shouldUpdateXAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYAxis=false;this.shouldUpdateYGrid=false;this.shouldUpdateScales=false;this.shouldUpdateBaseline=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldSetColors=false;this.shouldSetSubTitle=false;this.shouldUpdateLegend=false;this.shouldSetGlobalSelections=false;this.shouldSetSeriesSelections=false;this.shouldSetTestingAttributes=false;this.shouldUpdateData=false;this.shouldEnterUpdateExit=false;this.shouldEnterUpdateExitMarkers=false;this.shouldUpdateMarkerOpacity=false;this.shouldUpdateGeometries=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateDifferenceLabels=false;this.shouldUpdateLabels=false;this.shouldValidateInteractionKeys=false;this.shouldUpdateLabelData=false;this.shouldUpdateTableData=false;this.shouldValidateDataLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldAddStrokeUnder=false;this.shouldUpdateBaselineX=false;this.shouldUpdateBaselineY=false;this.shouldUpdateLegendData=false;this.shouldUpdateMarkerIDs=false;this.shouldValidateLayout=false;this.shouldValidateSeriesLabelPlacement=false;this.shouldValidateDiffLabelPlacement=false;this.shouldBindInteractivity=false;this.shouldBindLegendInteractivity=false;this.shouldBindSeriesInteractivity=false;this.shouldUpdateCursor=false;this.shouldSetLegendCursor=false;this.shouldSetSeriesCursor=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetDifferenceLabelOpacity=false;this.shouldSetSelectionClass=false;this.shouldDrawInteractionState=false;this.shouldRenderMarkerGroup=false;this.shouldUpdateBarStyle=false;this.shouldUpdateMarkerSize=false;this.shouldUpdateDiffLabelColor=false;this.shouldUpdateMarkerStyle=false;this.shouldDrawMarkerGeometries=false;this.shouldUpdateMarkerData=false;this.shouldUpdateSeriesData=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityAttributes=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetLocalizationConfig=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.handleMarkerColors=(t,s,i)=>{const h=this.rawColors[t.referenceIndex]||this.rawColors[0];const e=s<2&&this.clickHighlight.length?this.clickStyle.color||h:s<4?h:this.hoverStyle.color||h;const a=this.colorArr[t.referenceIndex]||this.colorArr[0];const r=s<2&&this.clickHighlight.length?this.clickStyle.color||a:s<4?a:this.hoverStyle.color||a;f(i[s]).attr("fill",r);return!this.accessibility.hideStrokes?this.strokes[e.toLowerCase()]:r};this.handleSeriesLabelColors=(t,s)=>{let i;let h;if(this.seriesInteraction){i=nt(t,this.hoverHighlight,this.innerInteractionKeys);h=ot(t,this.clickHighlight,this.innerInteractionKeys)}const e=this.rawColors[s]||this.rawColors[0];const a=this.seriesInteraction?h&&this.clickHighlight.length?this.clickStyle.color||e:i&&this.hoverHighlight?this.hoverStyle.color||e:e:e;return this.textColors[a.toLowerCase()]};this.handleLabelColors=(t,s)=>{const i=nt(t,this.hoverHighlight,this.innerInteractionKeys);const h=ot(t,this.clickHighlight,this.innerInteractionKeys);const e=this.rawColors[s]||this.rawColors[0];const a=h&&this.clickHighlight.length?this.clickStyle.color||e:i&&this.hoverHighlight?this.hoverStyle.color||e:e;return this.textColors[a.toLowerCase()]};this.handleBarColors=(t,s,i)=>{t.focusMarker=false;if(t.values[0][this.seriesAccessor]===this.focusMarker.key){t.focusMarker=0}else if(t.values[1][this.seriesAccessor]===this.focusMarker.key){t.focusMarker=1}const h=ot(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&ot(t.values[1],this.clickHighlight,this.innerInteractionKeys);const e=nt(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&nt(t.values[1],this.hoverHighlight,this.innerInteractionKeys);const a=this.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?this.rawColors[t.focusMarker]:this.barStyle.colorRule==="greaterValue"?this.rawColors[t.greaterIndex]:this.rawColors[2];const r=h&&this.clickHighlight.length?this.clickStyle.color||a:e&&this.hoverHighlight?this.hoverStyle.color||a:a;const l=this.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?this.colorArr[t.focusMarker]:this.barStyle.colorRule==="greaterValue"?this.colorArr[t.greaterIndex]:this.colorArr[2];const o=h&&this.clickHighlight.length?this.clickStyle.color||l:e&&this.hoverHighlight?this.hoverStyle.color||l:l;f(i[s]).attr("fill",o);return!this.accessibility.hideStrokes?this.strokes[r.toLowerCase()]:o};this.handleBarOpacity=(t,s,i)=>{const h=lt(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys);const e=lt(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys);const a=h&&e?this.barStyle.opacity:this.hoverOpacity;f(i[s]).attr("stroke-opacity",a);return a};this.setBarSize=(t,s,i)=>{const h=ot(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&ot(t.values[1],this.clickHighlight,this.innerInteractionKeys);const e=nt(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&nt(t.values[1],this.hoverHighlight,this.innerInteractionKeys);const a=this.dumbbellInteraction?h?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:e?parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width:this.barStyle.width;const r=this.x(t.values[0][this.xAccessor]);const l=this.y(t.values[0][this.yAccessor]);const o=this.x(t.values[1][this.xAccessor]);const n=this.y(t.values[1][this.yAccessor]);const c=this.isVertical?l>n?.001:-.001:0;const u=!this.isVertical?r>o?.001:-.001:0;const d=this.isVertical?a/2:0;const b=!this.isVertical?a/2:0;f(i[s]).attr("data-barSize",a).attr("data-centerX1",(t=>this.x(t.values[0][this.xAccessor]))).attr("data-centerY1",(t=>this.y(t.values[0][this.yAccessor]))).attr("data-centerX2",(t=>this.x(t.values[1][this.xAccessor]))).attr("data-centerY2",(t=>this.y(t.values[1][this.yAccessor])));return`M ${r+u} ${l+c} L ${r} ${l} L ${r+d} ${l+b} L ${o+d} ${n+b} L ${o} ${n} L ${o-d} ${n-b} L ${r-d} ${l-b} L ${r} ${l} L ${r+d} ${l+b} L ${o+d} ${n+b} L ${o} ${n} L ${o-u} ${n-c}`};this.setDiffLabelColor=t=>{t.focusMarker=false;if(t.values[0][this.seriesAccessor]===this.focusMarker.key){t.focusMarker=0}else if(t.values[1][this.seriesAccessor]===this.focusMarker.key){t.focusMarker=1}const s=this.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?this.rawColors[t.focusMarker]:this.barStyle.colorRule==="greaterValue"?this.rawColors[t.greaterIndex]:this.rawColors[2];let i;let h;if(this.dumbbellInteraction){h=ot(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&ot(t.values[1],this.clickHighlight,this.innerInteractionKeys);i=nt(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&nt(t.values[1],this.hoverHighlight,this.innerInteractionKeys)}const e=this.dumbbellInteraction?h&&this.clickHighlight.length?this.clickStyle.color||s:i&&this.hoverHighlight?this.hoverStyle.color||s:s:s;return this.textColors[e.toLowerCase()]};this.mainTitle=w.mainTitle;this.subTitle=w.subTitle;this.height=w.height;this.width=w.width;this.margin=w.margin;this.padding=w.padding;this.highestHeadingLevel=w.highestHeadingLevel;this.data=undefined;this.uniqueID=undefined;this.localization=w.localization;this.ordinalAccessor=w.ordinalAccessor;this.valueAccessor=w.valueAccessor;this.seriesAccessor=w.seriesAccessor;this.sortOrder=w.sortOrder;this.xAxis=w.xAxis;this.yAxis=w.yAxis;this.wrapLabel=w.wrapLabel;this.layout=w.layout;this.showBaselineX=w.showBaselineX;this.showBaselineY=w.showBaselineY;this.colorPalette=w.colorPalette;this.colors=undefined;this.hoverStyle=w.hoverStyle;this.hoverOpacity=w.hoverOpacity;this.animationConfig=w.animationConfig;this.clickStyle=w.clickStyle;this.referenceStyle=w.referenceStyle;this.cursor=w.cursor;this.focusMarker=w.focusMarker;this.marker=w.marker;this.barStyle=w.barStyle;this.dataLabel=w.dataLabel;this.dataKeyNames=undefined;this.seriesLabel=w.seriesLabel;this.differenceLabel=w.differenceLabel;this.showTooltip=w.showTooltip;this.tooltipLabel=w.tooltipLabel;this.accessibility=w.accessibility;this.legend=w.legend;this.annotations=w.annotations;this.maxValueOverride=undefined;this.minValueOverride=undefined;this.referenceLines=w.referenceLines;this.suppressEvents=w.suppressEvents;this.hoverHighlight=undefined;this.clickHighlight=w.clickHighlight;this.interactionKeys=undefined;this.unitTest=false}mainTitleWatcher(t,s){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}subTitleWatcher(t,s){this.shouldSetSubTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true}dimensionWatcher(t,s){this.shouldUpdateLayout=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true}dataWatcher(t,s){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateLabelData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateLegendData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateBarStyle=true;this.shouldSetColors=true}idWatcher(t,s){console.error("Change detected in prop uniqueID from value "+s+" to value "+t+". This prop cannot be changed after component has loaded.")}headingWatcher(t,s){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldSetAnnotationAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}ordinalAccessorWatcher(t,s){this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldUpdateGeometries=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}}valueAccessorWatcher(t,s){this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true}seriesAccessorWatcher(t,s){this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateLegendData=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateLegend=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateTableData=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}}sortWatcher(t,s){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateLabelData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true}xAxisWatcher(t,s){const i=t&&t.gridVisible;const h=s&&s.gridVisible;const e=t&&t.tickInterval?t.tickInterval:0;const a=s&&s.tickInterval?s.tickInterval:0;const r=t&&t.format?t.format:false;const l=s&&s.format?s.format:false;const o=t&&t.unit?t.unit:false;const n=s&&s.unit?s.unit:false;if(i!==h||e!==a){this.shouldUpdateXGrid=true}if(r!==l||o!==n){this.shouldUpdateScales=true;if(o!==n){this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true}}this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true}yAxisWatcher(t,s){const i=t&&t.gridVisible;const h=s&&s.gridVisible;const e=t&&t.tickInterval?t.tickInterval:0;const a=s&&s.tickInterval?s.tickInterval:0;if(i!==h||e!==a){this.shouldUpdateYGrid=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true}wrapLabelWatcher(t,s){this.shouldCheckLabelAxis=true}layoutWatcher(t,s){this.shouldValidateLayout=true;this.shouldValidateDataLabelPlacement=true;this.shouldValidateSeriesLabelPlacement=true;this.shouldUpdateSeriesData=true;this.shouldValidateDiffLabelPlacement=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true}showBaselineXWatcher(t,s){this.shouldUpdateBaselineX=true}showBaselineYWatcher(t,s){this.shouldUpdateBaselineY=true}paletteWatcher(t,s){this.shouldUpdateMarkerIDs=true;this.shouldSetColors=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerStyle=true;this.shouldUpdateLegend=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDiffLabelColor=true}hoverStyleWatcher(t,s){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true}clickStyleWatcher(t,s){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true}hoverOpacityWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true}cursorWatcher(t,s){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldSetSeriesCursor=true}focusMarkerWatcher(t,s){this.shouldDrawMarkerGeometries=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateLabels=true;const i=t&&t.sizeFromBar?t.sizeFromBar:0;const h=s&&s.sizeFromBar?s.sizeFromBar:0;if(i!==h){this.shouldUpdateMarkerSize=true}const e=t&&t.key?t.key:false;const a=s&&s.key?s.key:false;if(e!==a){this.shouldUpdateDiffLabelColor=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateBarStyle=true}}markerWatcher(t,s){const i=t&&t.visible;const h=s&&s.visible;if(i!==h){this.shouldUpdateMarkerOpacity=true}const e=t&&t.type?t.type:false;const a=s&&s.type?s.type:false;if(e!==a){this.shouldRenderMarkerGroup=true;this.shouldEnterUpdateExitMarkers=true}this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;const r=t&&t.sizeFromBar?t.sizeFromBar:0;const l=s&&s.sizeFromBar?s.sizeFromBar:0;if(r!==l){this.shouldUpdateMarkerSize=true}}barStyleWatcher(t,s){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateDiffLabelColor=true;this.shouldDrawInteractionState=true;const i=t&&t.width?t.width:0;const h=s&&s.width?s.width:0;if(i!==h){this.shouldDrawInteractionState=true;this.shouldUpdateMarkerData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateSeriesLabels=true}}dataLabelWatcher(t,s){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;const i=t&&t.placement?t.placement:false;const h=s&&s.placement?s.placement:false;const e=t&&t.visible;const a=s&&s.visible;const r=t&&t.labelAccessor?t.labelAccessor:false;const l=s&&s.labelAccessor?s.labelAccessor:false;const o=t&&t.displayOnly;const n=s&&s.displayOnly;if(e!==a){this.shouldSetLabelOpacity=true}if(i!==h){this.shouldValidateDataLabelPlacement=true}if(o!==n){this.shouldUpdateLabelData=true;this.shouldSetLabelOpacity=true}if(r!==l){this.shouldValidateDataLabelAccessor=true}}seriesLabelWatcher(t,s){this.shouldValidateSeriesLabelPlacement=true;this.shouldUpdateSeriesLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateTableData=true;const i=t&&t.visible;const h=s&&s.visible;if(i!==h){this.shouldSetSeriesLabelOpacity=true}const e=t&&t.placement?t.placement:false;const a=s&&s.placement?s.placement:false;if(e!==a){this.shouldUpdateSeriesData=true;this.shouldSetSeriesSelections=true}}differenceLabelWatcher(t,s){this.shouldUpdateDifferenceLabels=true;this.shouldUpdateDiffLabelColor=true;this.shouldAddStrokeUnder=true;this.shouldUpdateTableData=true;const i=t&&t.visible;const h=s&&s.visible;if(i!==h){this.shouldSetDifferenceLabelOpacity=true}const e=t&&t.placement?t.placement:false;const a=s&&s.placement?s.placement:false;if(e!==a){this.shouldValidateDiffLabelPlacement=true}}showTooltipWatcher(t,s){this.shouldDrawInteractionState=true}tooltipLabelWatcher(t,s){this.shouldUpdateTableData=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true}accessibilityWatcher(t,s){this.shouldValidate=true;const i=t&&t.title?t.title:false;const h=s&&s.title?s.title:false;if(i!==h){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}const e=t&&t.executiveSummary?t.executiveSummary:false;const a=s&&s.executiveSummary?s.executiveSummary:false;if(e!==a){this.shouldSetChartAccessibilityExecutiveSummary=true}const r=t&&t.purpose?t.purpose:false;const l=s&&s.purpose?s.purpose:false;if(r!==l){this.shouldSetChartAccessibilityPurpose=true}const o=t&&t.longDescription?t.longDescription:false;const n=s&&s.longDescription?s.longDescription:false;if(o!==n){this.shouldSetChartAccessibilityLongDescription=true}const c=t&&t.contextExplanation?t.contextExplanation:false;const u=s&&s.contextExplanation?s.contextExplanation:false;if(c!==u){this.shouldSetChartAccessibilityContext=true}const f=t&&t.statisticalNotes?t.statisticalNotes:false;const d=s&&s.statisticalNotes?s.statisticalNotes:false;if(f!==d){this.shouldSetChartAccessibilityStatisticalNotes=true}const b=t&&t.structureNotes?t.structureNotes:false;const p=s&&s.structureNotes?s.structureNotes:false;if(b!==p){this.shouldSetChartAccessibilityStructureNotes=true}const m=t&&t.includeDataKeyNames;const y=s&&s.includeDataKeyNames;const g=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;const v=s&&s.elementDescriptionAccessor?s.elementDescriptionAccessor:false;if(m!==y||g!==v){if(m!==y){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}const x=t&&t.hideStrokes?t.hideStrokes:false;const L=s&&s.hideStrokes?s.hideStrokes:false;if(x!==L){this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerStyle=true;this.shouldAddStrokeUnder=true;this.shouldUpdateLegend=true}const k=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;const $=s&&s.keyboardNavConfig&&s.keyboardNavConfig.disabled?s.keyboardNavConfig.disabled:false;const A=t&&t.elementsAreInterface?t.elementsAreInterface:false;const W=s&&s.elementsAreInterface?s.elementsAreInterface:false;if(k!==$||A!==W){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(A!==W){this.shouldSetSelectionClass=true}}localizationWatcher(t,s){this.shouldValidate=true;const i=t&&t.language?t.language:false;const h=s&&s.language?s.language:false;if(i!==h){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldValidateDataLabelAccessor=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}const e=t&&t.numeralLocale?t.numeralLocale:false;const a=s&&s.numeralLocale?s.numeralLocale:false;if(e!==a){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldValidateDataLabelAccessor=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}}legendWatcher(t,s){this.shouldUpdateLegend=true;const i=t&&t.interactive;const h=s&&s.interactive;if(i!==h){this.shouldBindLegendInteractivity=true;this.shouldSetLegendCursor=true}}annotationsWatcher(t,s){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true}valueOverrideWatcher(t,s){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldCheckValueAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true}referenceWatcher(t,s){this.shouldUpdateReferenceLines=true}suppressWatcher(t,s){this.shouldBindInteractivity=true;this.shouldBindLegendInteractivity=true;this.shouldBindSeriesInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldSetSeriesCursor=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}hoverWatcher(t,s){this.shouldUpdateMarkerIDs=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true}clickWatcher(t,s){this.shouldUpdateMarkerIDs=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true}interactionWatcher(t,s){this.shouldValidateInteractionKeys=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true;const i=t&&t.length===1?t[0]===this.seriesAccessor:false;const h=s&&s.length===1?s[0]===this.seriesAccessor:false;if(i!==h){this.shouldBindSeriesInteractivity=true;this.shouldSetSeriesCursor=true;this.shouldBindLegendInteractivity=true;this.shouldSetLegendCursor=true}}dataKeyNamesWatcher(t,s){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetGeometryAriaLabels=true}unitTestWatcher(t,s){this.shouldSetTestingAttributes=true}componentWillLoad(){const t=this.uniqueID||"dumbbell-plot-"+b();this.initialLoadEvent.emit({chartID:t});return new Promise((s=>{this.duration=0;this.chartID=t;this.dumbbellPlotEl.id=this.chartID;this.setLocalizationConfig();this.setTagLevels();this.checkIfSafari();this.validateLayout();this.validateDataLabelPlacement();this.validateSeriesLabelPlacement();this.validateDiffLabelPlacement();this.validateInteractionKeys();this.prepareData();this.prepareMarkerData();this.prepareSeriesData();this.prepareLegendData();this.prepareLabelData();this.setLayoutData();this.prepareScales();this.validateDataLabelAccessor();this.setTableData();this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.setColors();s("component will load")}))}componentWillUpdate(){return new Promise((t=>{t("component will update")}))}componentDidLoad(){return new Promise((t=>{this.defaults=true;this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.renderRootElements();this.setTooltipInitialStyle();this.setChartDescriptionWrapper();this.setChartAccessibilityTitle();this.setChartAccessibilitySubtitle();this.setChartAccessibilityLongDescription();this.setChartAccessibilityExecutiveSummary();this.setChartAccessibilityPurpose();this.setChartAccessibilityContext();this.setChartAccessibilityStatisticalNotes();this.setChartAccessibilityStructureNotes();this.setParentSVGAccessibility();this.reSetRoot();this.setSubTitleElements();this.drawXGrid();this.drawYGrid();this.renderMarkerGroup();this.setGlobalSelections();this.setTestingAttributes();this.enterMarkerGeometries();this.updateMarkerGeometries();this.exitMarkerGeometries();this.updateMarkerSize();this.enterDumbbells();this.updateDumbbells();this.exitDumbbells();this.enterSeriesLabels();this.updateSeriesLabels();this.exitSeriesLabels();this.enterDataLabels();this.updateDataLabels();this.exitDataLabels();this.enterDifferenceLabels();this.updateDifferenceLabels();this.exitDifferenceLabels();this.updateMarkerIds();this.drawDumbbells();this.updateInteractionState();this.setChartCountAccessibility();this.setGeometryAccessibilityAttributes();this.setGeometryAriaLabels();this.drawLegendElements();this.drawDataLabels();this.drawSeriesLabels();this.drawDifferenceLabels();this.addStrokeUnder();this.drawReferenceLines();this.setSelectedClass();this.setLabelOpacity();this.bindLegendInteractivity();this.setLegendCursor();this.drawAnnotations();this.setAnnotationAccessibility();this.drawXAxis();this.setXAxisAccessibility();this.drawYAxis();this.setYAxisAccessibility();this.drawBaselineX();this.drawBaselineY();this.onChangeHandler();K(this.root.node(),this.dumbbellG.node());this.setGroupAccessibilityAttributes();this.setGroupAccessibilityID();this.defaults=false;t("component did load")})).then((()=>this.initialLoadEndEvent.emit({chartID:this.chartID})))}componentDidUpdate(){return new Promise((t=>{this.duration=!this.animationConfig||!this.animationConfig.disabled?750:0;if(this.shouldUpdateDescriptionWrapper){this.setChartDescriptionWrapper();this.shouldUpdateDescriptionWrapper=false}if(this.shouldSetChartAccessibilityCount){this.setChartCountAccessibility();this.shouldSetChartAccessibilityCount=false}if(this.shouldSetChartAccessibilityTitle){this.setChartAccessibilityTitle();this.shouldSetChartAccessibilityTitle=false}if(this.shouldSetChartAccessibilitySubtitle){this.setChartAccessibilitySubtitle();this.shouldSetChartAccessibilitySubtitle=false}if(this.shouldSetChartAccessibilityLongDescription){this.setChartAccessibilityLongDescription();this.shouldSetChartAccessibilityLongDescription=false}if(this.shouldSetChartAccessibilityExecutiveSummary){this.setChartAccessibilityExecutiveSummary();this.shouldSetChartAccessibilityExecutiveSummary=false}if(this.shouldSetChartAccessibilityPurpose){this.setChartAccessibilityPurpose();this.shouldSetChartAccessibilityPurpose=false}if(this.shouldSetChartAccessibilityContext){this.setChartAccessibilityContext();this.shouldSetChartAccessibilityContext=false}if(this.shouldSetChartAccessibilityStatisticalNotes){this.setChartAccessibilityStatisticalNotes();this.shouldSetChartAccessibilityStatisticalNotes=false}if(this.shouldSetChartAccessibilityStructureNotes){this.setChartAccessibilityStructureNotes();this.shouldSetChartAccessibilityStructureNotes=false}if(this.shouldSetParentSVGAccessibility){this.setParentSVGAccessibility();this.shouldSetParentSVGAccessibility=false}if(this.shouldResetRoot){this.reSetRoot();this.shouldResetRoot=false}if(this.shouldRenderMarkerGroup){this.renderMarkerGroup();this.shouldRenderMarkerGroup=false}if(this.shouldSetGlobalSelections){this.setGlobalSelections();this.shouldSetGlobalSelections=false}if(this.shouldSetSeriesSelections){this.setSeriesSelections();this.shouldSetSeriesSelections=false}if(this.shouldSetTestingAttributes){this.setTestingAttributes();this.shouldSetTestingAttributes=false}if(this.shouldSetSubTitle){this.setSubTitleElements();this.shouldSetSubTitle=false}if(this.shouldUpdateXGrid){this.drawXGrid();this.shouldUpdateXGrid=false}if(this.shouldUpdateYGrid){this.drawYGrid();this.shouldUpdateYGrid=false}if(this.shouldEnterUpdateExitMarkers){this.enterMarkerGeometries();this.updateMarkerGeometries();this.exitMarkerGeometries();this.shouldEnterUpdateExitMarkers=false;this.shouldUpdateMarkerOpacity=false}if(this.shouldUpdateMarkerOpacity){this.updateMarkerGeometries();this.shouldUpdateMarkerOpacity=false}if(this.shouldEnterUpdateExit){this.enterDumbbells();this.updateDumbbells();this.exitDumbbells();this.enterSeriesLabels();this.updateSeriesLabels();this.exitSeriesLabels();this.enterDataLabels();this.updateDataLabels();this.exitDataLabels();this.enterDifferenceLabels();this.updateDifferenceLabels();this.exitDifferenceLabels();this.shouldEnterUpdateExit=false}if(this.shouldUpdateMarkerIDs){this.updateMarkerIds();this.shouldUpdateMarkerIDs=false}if(this.shouldUpdateGeometries){this.drawDumbbells();this.shouldUpdateGeometries=false}if(this.shouldUpdateBarStyle){this.updateBarStyle();this.shouldUpdateBarStyle=false}if(this.shouldUpdateMarkerStyle){this.updateMarkerStyle();this.shouldUpdateMarkerStyle=false}if(this.shouldUpdateMarkerSize){this.updateMarkerSize();this.shouldUpdateMarkerSize=false}if(this.shouldDrawMarkerGeometries){this.drawMarkerGeometries();this.shouldDrawMarkerGeometries=false}if(this.shouldSetGeometryAccessibilityAttributes){this.setGeometryAccessibilityAttributes();this.shouldSetGeometryAccessibilityAttributes=false}if(this.shouldSetGeometryAriaLabels){this.setGeometryAriaLabels();this.shouldSetGeometryAriaLabels=false}if(this.shouldSetGroupAccessibilityLabel){this.setGroupAccessibilityID();this.shouldSetGroupAccessibilityLabel=false}if(this.shouldUpdateLegend){this.drawLegendElements();this.shouldUpdateLegend=false}if(this.shouldUpdateLabels){this.drawDataLabels();this.shouldUpdateLabels=false}if(this.shouldUpdateSeriesLabels){this.drawSeriesLabels();this.shouldUpdateSeriesLabels=false}if(this.shouldUpdateDifferenceLabels){this.drawDifferenceLabels();this.shouldUpdateDifferenceLabels=false}if(this.shouldAddStrokeUnder){this.addStrokeUnder();this.shouldAddStrokeUnder=false}if(this.shouldUpdateReferenceLines){this.drawReferenceLines();this.shouldUpdateReferenceLines=false}if(this.shouldSetLabelOpacity){this.setLabelOpacity();this.shouldSetLabelOpacity=false}if(this.shouldSetSeriesLabelOpacity){this.setSeriesLabelOpacity();this.shouldSetSeriesLabelOpacity=false}if(this.shouldSetDifferenceLabelOpacity){this.setDifferenceLabelOpacity();this.shouldSetDifferenceLabelOpacity=false}if(this.shouldUpdateDiffLabelColor){this.updateDiffLabelColor();this.shouldUpdateDiffLabelColor=false}if(this.shouldDrawInteractionState){this.updateInteractionState();this.shouldDrawInteractionState=false}if(this.shouldSetSelectionClass){this.setSelectedClass();this.shouldSetSelectionClass=false}if(this.shouldBindLegendInteractivity){this.bindLegendInteractivity();this.shouldBindLegendInteractivity=false}if(this.shouldBindSeriesInteractivity){this.bindSeriesInteractivity();this.shouldBindSeriesInteractivity=false}if(this.shouldSetLegendCursor){this.setLegendCursor();this.shouldSetLegendCursor=false}if(this.shouldSetSeriesCursor){this.setSeriesCursor();this.shouldSetSeriesCursor=false}if(this.shouldUpdateCursor){this.updateCursor();this.shouldUpdateCursor=false}if(this.shouldBindInteractivity){this.bindInteractivity();this.shouldBindInteractivity=false}if(this.shouldUpdateAnnotations){this.drawAnnotations();this.shouldUpdateAnnotations=false}if(this.shouldSetAnnotationAccessibility){this.setAnnotationAccessibility();this.shouldSetAnnotationAccessibility=false}if(this.shouldUpdateXAxis){this.drawXAxis();this.shouldUpdateXAxis=false}if(this.shouldSetXAxisAccessibility){this.setXAxisAccessibility();this.shouldSetXAxisAccessibility=false}if(this.shouldUpdateYAxis){this.drawYAxis();this.shouldUpdateYAxis=false}if(this.shouldSetYAxisAccessibility){this.setYAxisAccessibility();this.shouldSetYAxisAccessibility=false}if(this.shouldUpdateBaselineX){this.drawBaselineX();this.shouldUpdateBaseline=false}if(this.shouldUpdateBaselineY){this.drawBaselineY();this.shouldUpdateBaseline=false}this.onChangeHandler();t("component did update")})).then((()=>this.drawEndEvent.emit({chartID:this.chartID})))}shouldValidateLocalizationProps(){const t=T();const s=t.i18Next.language;const i=t.i18Next.getResourceBundle(s);const h=t.numeral.localeData();if(this.shouldValidateLocalization&&!this.localization.skipValidation){this.shouldValidateLocalization=false;St(this.chartID,Object.assign(Object.assign({},this.localization),{language:i,numeralLocale:h}))}}shouldValidateAccessibilityProps(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;wt(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickEvent:this.suppressEvents?undefined:this.clickEvent.emit}})}}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor;this.dumbbellInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.ordinalAccessor}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateLayout(){this.layoutOverride=!this.layout||this.data[0][this.ordinalAccessor]instanceof Date?"vertical":this.layout;this.isVertical=this.layoutOverride==="vertical"}validateDataLabelPlacement(){this.placement=this.dataLabel.placement;if(this.isVertical){if(this.placement!=="left"&&this.placement!=="right"&&this.placement!=="auto"){this.placement="ends"}}else{if(this.placement!=="top"&&this.placement!=="bottom"&&this.placement!=="auto"){this.placement="ends"}}}validateSeriesLabelPlacement(){this.seriesLabelDetails=Object.assign({},this.seriesLabel);if(!this.seriesLabelDetails.placement){this.seriesLabelDetails.placement=this.isVertical?"right":"top"}if(this.isVertical&&(this.seriesLabelDetails.placement!=="right"&&this.seriesLabelDetails.placement!=="left"&&this.seriesLabelDetails.placement!=="auto")){this.seriesLabelDetails.placement="right"}else if(!this.isVertical&&(this.seriesLabelDetails.placement!=="top"&&this.seriesLabelDetails.placement!=="bottom"&&this.seriesLabelDetails.placement!=="auto")){this.seriesLabelDetails.placement="top"}if(!this.seriesLabelDetails.label||!this.seriesLabelDetails.label.length){this.seriesLabelDetails.label=""}}validateDiffLabelPlacement(){this.diffLabelDetails=Object.assign({},this.differenceLabel);if(!this.diffLabelDetails.placement){this.diffLabelDetails.placement=this.isVertical?"left":"top"}if(this.isVertical&&(this.diffLabelDetails.placement!=="right"&&this.diffLabelDetails.placement!=="left"&&this.diffLabelDetails.placement!=="auto")){this.diffLabelDetails.placement="left"}else if(!this.isVertical&&(this.diffLabelDetails.placement!=="top"&&this.diffLabelDetails.placement!=="bottom"&&this.diffLabelDetails.placement!=="auto")){this.diffLabelDetails.placement="top"}}checkIfSafari(){this.url=E()}setSubTitleElements(){It({root:this.subTitleG,subTitle:this.subTitle})}setColors(){this.colors=this.colors?ut(this.colors):"";this.rawColors=this.colors||yt(this.colorPalette,3);this.colorArr=this.rawColors;this.textColors={};this.strokes={};this.rawColors.forEach((t=>{if(!this.accessibility.hideStrokes){const s=z(t);const i=s.length===2?s[1]:s[0];this.strokes[t.toLowerCase()]=i}this.textColors[t.toLowerCase()]=I(t,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=z(this.hoverStyle.color);const s=t.length===2?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=s}this.textColors[this.hoverStyle.color.toLowerCase()]=I(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=z(this.clickStyle.color);const s=t.length===2?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=s}this.textColors[this.clickStyle.color.toLowerCase()]=I(this.clickStyle.color,"#ffffff",4.5)}}getLanguageString(){return C(this.localization)}setLocalizationConfig(){O(this.localization)}setLayoutData(){this.padding=typeof this.padding==="string"?vt(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}setTableData(){const t=At(this,rt,"dumbbell-plot");this.tableData=xt(this.data,t);this.tableColumns=Object.keys(t)}prepareData(){const t=a().key((t=>t[this.ordinalAccessor])).entries(this.data);t.forEach((t=>{t.focusMarker=false;t.greaterIndex=1;let s="marker";let i="marker";if(t.values[0][this.seriesAccessor]===this.focusMarker.key){t.focusMarker=0;s="focusMarker"}else if(t.values[1][this.seriesAccessor]===this.focusMarker.key){t.focusMarker=1;i="focusMarker"}const h=ot(t.values[0],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:nt(t.values[0],this.hoverHighlight,this.innerInteractionKeys)?parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width;const e=ot(t.values[1],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:nt(t.values[1],this.hoverHighlight,this.innerInteractionKeys)?parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width;t.values[0].offset=t.focusMarker!==0&&!this.marker.visible?1:this.marker.type==="dot"?this[s].sizeFromBar*(h+1)/2:this.marker.type==="stroke"?this[s].sizeFromBar*(h+1)/5:!t.focusMarker?this[s].sizeFromBar*(h+1)/2:this[s].sizeFromBar*(h+1)/5;t.values[1].offset=t.focusMarker!==1&&!this.marker.visible?-1:this.marker.type==="dot"?-(this[i].sizeFromBar*(e+1))/2:this.marker.type==="stroke"?-(this[i].sizeFromBar*(e+1))/5:t.focusMarker?-(this[i].sizeFromBar*(e+1))/2:-(this[i].sizeFromBar*(e+1))/5;if(t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]){t.greaterIndex=0;t.values[0].offset=-t.values[0].offset;t.values[1].offset=-t.values[1].offset}}));const s=t=>{const s={absoluteDiff:"Absolute Difference ",difference:"Difference "};const i=this.differenceLabel&&this.differenceLabel.calculation&&s[this.differenceLabel.calculation]?this.differenceLabel.calculation:"difference";const h=this.differenceLabel&&this.differenceLabel.format&&this.differenceLabel.visible?this.differenceLabel.format:this.differenceLabel&&this.dataLabel.format&&this.dataLabel.visible?this.dataLabel.format:"0[.][0][0]a";return s[i]+mt(t,i,h)};this.nest=t.sort(((t,i)=>{t.difference=t.values[0][this.valueAccessor]-t.values[1][this.valueAccessor];i.difference=i.values[0][this.valueAccessor]-i.values[1][this.valueAccessor];t.absoluteDiff=Math.abs(t.difference);i.absoluteDiff=Math.abs(i.difference);t.middle=(t.values[0][this.valueAccessor]+t.values[1][this.valueAccessor])/2;i.middle=(i.values[0][this.valueAccessor]+i.values[1][this.valueAccessor])/2;t.message=s(t);i.message=s(i);const h=t.focusMarker!==false?t.focusMarker:0;return t.values[0][this.ordinalAccessor]instanceof Date?0:this.sortOrder==="asc"||this.sortOrder==="diffAsc"?t.difference-i.difference:this.sortOrder==="desc"||this.sortOrder==="diffDesc"?i.difference-t.difference:this.sortOrder==="focusAsc"?t.values[h][this.valueAccessor]-i.values[h][this.valueAccessor]:this.sortOrder==="focusDesc"?i.values[h][this.valueAccessor]-t.values[h][this.valueAccessor]:this.sortOrder==="absoluteDiffAsc"?t.absoluteDiff-i.absoluteDiff:this.sortOrder==="absoluteDiffDesc"?i.absoluteDiff-t.absoluteDiff:0}))}prepareMarkerData(){this.markerData=[];const t={focus:false,label:this.nest[0].values[0][this.seriesAccessor]};const s={focus:false,label:this.nest[0].values[1][this.seriesAccessor]};if(this.nest[0].focusMarker){s.focus=true}else if(this.nest[0].focusMarker===0){t.focus=true}const i=Object.assign(Object.assign({},t),{limitOpacity:true});const h=Object.assign(Object.assign({},s),{limitOpacity:true});const e=Object.assign({},t);const a=Object.assign({},s);this.markerData.push(t);this.markerData.push(s);this.markerData.push(i);this.markerData.push(h);this.markerData.push(e);this.markerData.push(a);let r=0;this.markerData.forEach((t=>{t.index=r;t.referenceIndex=r<2?r:r<4?r-2:r-4;r++}))}prepareSeriesData(){const t=this.seriesLabelDetails.placement==="auto";const s=this.isVertical?"right":"top";const i=t?true:this.seriesLabelDetails.placement.includes(s);const h={label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor],value:i?this.nest[this.nest.length-1].values[0][this.valueAccessor]:this.nest[0].values[0][this.valueAccessor]};const e={label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor],value:i?this.nest[this.nest.length-1].values[1][this.valueAccessor]:this.nest[0].values[1][this.valueAccessor]};this.seriesData=[h,e]}prepareLabelData(){if(this.nest){const t=x(this.nest,(t=>k(t.values,(t=>t[this.valueAccessor]))));const s=this.nest[t].values;const i=L(this.nest,(t=>$(t.values,(t=>t[this.valueAccessor]))));const h=this.nest[i].values;const e=this.nest.find((t=>t.values.find((t=>t[this.valueAccessor]!==null))));const a=e.values;const r=[...this.nest].reverse().find((t=>t.values.find((t=>t[this.valueAccessor]!=null))));const l=r.values;this.displayOnlyLabelData={first:a,last:l,min:s,max:h}}}prepareLegendData(){const t={label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor]};const s={label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor]};this.legendData=[t,s];this.ordinalLabel=this.legendData.map((t=>t.label))}prepareScales(){const t=k(this.data,(t=>parseFloat(t[this.valueAccessor])));const s=$(this.data,(t=>parseFloat(t[this.valueAccessor])));if(this.isVertical){this.xAccessor=this.ordinalAccessor;this.yAccessor=this.valueAccessor;this.y=r().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:t-(s-t)*.15,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:s+(s-t)*.15]).range([this.innerPaddedHeight,0]);if(this.data[0][this.ordinalAccessor]instanceof Date){const t=$(this.data,(t=>t[this.ordinalAccessor]));const s=k(this.data,(t=>t[this.ordinalAccessor]));this.x=c().domain([s,t]).range([0,this.innerPaddedWidth]);if(this.xAxis.unit){const i=this.time["time"+this.xAxis.unit];this.x.domain([i.offset(s,-1),i.offset(t,+1)])}}else{this.x=e().domain(this.nest.map((t=>t.key))).padding(.5).range([0,this.innerPaddedWidth])}}else if(!this.isVertical){this.xAccessor=this.valueAccessor;this.yAccessor=this.ordinalAccessor;this.x=r().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:t-(s-t)*.15,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:s+(s-t)*.15]).range([0,this.innerPaddedWidth]);this.y=e().domain(this.nest.map((t=>t.key))).padding(.5).range([this.innerPaddedHeight,0])}}addStrokeUnder(){const t=M({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.seriesLabelWrapper.selectAll("text").attr("filter",!this.accessibility.hideStrokes?t:null);this.diffLabelWrapper.attr("filter",!this.accessibility.hideStrokes?t:null);this.labels.attr("filter",!this.accessibility.hideStrokes?t:null);this.labels.attr("filter",!this.accessibility.hideStrokes?t:null);this.dumbbellG.attr("filter",!this.accessibility.hideStrokes?t:null)}renderRootElements(){this.svg=f(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.defs=this.rootG.append("defs");this.baselineG=this.rootG.append("g").attr("class","baseline-group");this.gridG=this.rootG.append("g").attr("class","gridline-group");this.dumbbellG=this.rootG.append("g").attr("class","dumbbell-group");this.seriesLabelWrapper=this.rootG.select(".dumbbell-series-wrapper");this.seriesLabelWrapper=this.rootG.append("g").attr("class","dumbbell-series-wrapper");this.diffLabelWrapper=this.rootG.select(".dumbbell-diff-label-wrapper");this.diffLabelWrapper=this.rootG.append("g").attr("class","dumbbell-diff-label-wrapper");this.legendG=f(this.dumbbellPlotEl).select(".dumbbell-legend").append("svg");this.subTitleG=f(this.dumbbellPlotEl).select(".dumbbell-sub-title");this.tooltipG=f(this.dumbbellPlotEl).select(".dumbbell-tooltip");this.labels=this.rootG.append("g").attr("class","dumbbell-dataLabel-group");this.referencesG=this.rootG.append("g").attr("class","dumbbell-reference-line-group")}renderMarkerGroup(){this.markerG=this.defs.select("."+this.marker.type+"markers");if(!this.markerG.node()){this.defs.selectAll("g").remove();this.markerG=this.defs.append("g").attr("class",this.marker.type+"markers")}}setSeriesSelections(){const t=this.seriesLabelWrapper.selectAll(".dumbbell-series-label").data(this.seriesData,(t=>t.label));this.enterSeriesLabel=t.enter().append("text");this.exitSeriesLabel=t.exit();this.updateSeriesLabel=t.merge(this.enterSeriesLabel)}setGlobalSelections(){const t=this.dumbbellG.selectAll(".dumbbell-plot").data(this.nest,(t=>t.key));this.enter=t.enter().append("path");this.exit=t.exit();this.update=t.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();const s=this.markerG.selectAll("marker").data(this.markerData,((t,s)=>t.label+s));this.enterMarkers=s.enter().append("marker");this.exitMarkers=s.exit();this.updateMarkers=s.merge(this.enterMarkers);this.setSeriesSelections();const i=this.diffLabelWrapper.selectAll(".dumbbell-diff-label").data(this.nest,(t=>t.key));this.enterDiffLabel=i.enter().append("text");this.exitDiffLabel=i.exit();this.updateDiffLabel=i.merge(this.enterDiffLabel);const h=this.labels.selectAll("g").data(this.nest,(t=>t.key));this.enterLabels=h.enter().append("g");this.exitLabels=h.exit();this.updateLabels=h.merge(this.enterLabels);const e=this.updateLabels.selectAll(".dumbbell-dataLabel").data((t=>[t.values[0],t.values[1]]),(t=>t[this.seriesAccessor]));this.enterLabelChildren=e.enter().append("text");this.exitLabelChildren=e.exit();this.updateLabelChildren=e.merge(this.enterLabelChildren)}setTestingAttributes(){if(this.unitTest){f(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid","chart-container");f(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid","main-title");f(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.dumbbellG.attr("data-testid","dumbbell-group");this.baselineG.attr("data-testid","baseline-group");this.referencesG.attr("data-testid","reference-line-group");this.updateLabels.attr("data-testid","dataLabel-wrapper");this.updateLabelChildren.attr("data-testid","dataLabel").attr("data-id",(t=>`label-${t[this.ordinalAccessor]}-${t[this.seriesAccessor]}`));this.updateDiffLabel.attr("data-testid","difference-label").attr("data-id",(t=>`difference-label-${t.key}`));this.updateSeriesLabel.attr("data-testid","series-label");this.updateMarkers.attr("data-testid","marker");this.update.attr("data-testid","line").attr("data-id",(t=>`line-${t.key}`))}else{f(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid",null);f(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid",null);f(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.dumbbellG.attr("data-testid",null);this.baselineG.attr("data-testid",null);this.referencesG.attr("data-testid",null);this.updateLabels.attr("data-testid",null);this.updateLabelChildren.attr("data-testid",null).attr("data-id",null);this.updateDiffLabel.attr("data-testid",null).attr("data-id",null);this.updateSeriesLabel.attr("data-testid",null);this.updateMarkers.attr("data-testid",null);this.update.attr("data-testid",null).attr("data-id",null)}}reSetRoot(){const t=Tt({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:A});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);const s=Tt({selection:this.root,duration:this.duration,namespace:"root_reset",easing:A});s.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`);const i=Tt({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:A});i.attr("transform",`translate(${this.padding.left}, ${this.padding.top})`);ht(this.chartID,this.width)}drawXAxis(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.xAccessor]?this.dataKeyNames[this.xAccessor]:this.xAxis.label;const s=this.innerPaddedWidth/this.nest.length*.7;ft({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?s:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:t,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration})}drawYAxis(){const t=this.yAxis.label&&this.yAxis.label!==""?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.yAccessor]?this.dataKeyNames[this.yAccessor]:this.yAxis.label;ft({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:t,padding:this.padding,hide:!this.yAxis.visible,duration:this.duration})}setXAxisAccessibility(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.xAccessor]?this.dataKeyNames[this.xAccessor]:this.xAxis.label;U({rootEle:this.dumbbellPlotEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x?this.x:false,xAxisLabel:t?t:""})}setYAxisAccessibility(){const t=this.yAxis.label&&this.yAxis.label!==""?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.yAccessor]?this.dataKeyNames[this.yAccessor]:this.yAxis.label;J({rootEle:this.dumbbellPlotEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y?this.y:false,yAxisLabel:t?t:""})}drawBaselineX(){ft({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,padding:this.padding,markOffset:this.x(0),hide:!this.isVertical?!this.showBaselineY:true,duration:this.duration})}drawBaselineY(){ft({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0),hide:this.isVertical?!this.showBaselineX:true,duration:this.duration})}drawXGrid(){dt(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.xAxis.gridVisible,this.xAxis.tickInterval,this.duration)}drawYGrid(){dt(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterMarkerGeometries(){this.enterMarkers.attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("id",(t=>this.generateId(t,t.index))).attr("class","marker-"+this.marker.type).attr("stroke",this.handleMarkerColors);if(this.marker.type==="dot"){this.enterMarkers.append("circle").attr("r",5)}else if(this.marker.type==="stroke"){this.enterMarkers.append("path")}else if(this.marker.type==="arrow"){this.enterMarkers.append("path")}this.updateMarkerSize(this.enterMarkers)}updateMarkerGeometries(){this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(t=>(this.marker.visible||t.focus)&&!t.limitOpacity?1:this.marker.visible||t.focus?this.hoverOpacity:0))}updateMarkerStyle(){this.updateMarkers.attr("stroke",this.handleMarkerColors)}exitMarkerGeometries(){this.exitMarkers.transition("exit").duration(this.duration).ease(A).remove()}enterDumbbells(){this.enter.interrupt();this.enter.attr("class","dumbbell-plot").attr("d",(t=>{const s=this.x(t.values[0][this.xAccessor]);const i=this.y(t.values[0][this.yAccessor]);const h=this.x(t.values[1][this.xAccessor]);const e=this.y(t.values[1][this.yAccessor]);const a=this.isVertical?i>e?.001:-.001:0;const r=!this.isVertical?s>h?.001:-.001:0;return`M ${s+r} ${i+a} L ${s} ${i} L ${s} ${i} L ${h} ${e} L ${h} ${e} L ${h} ${e} L ${s} ${i} L ${s} ${i} L ${s} ${i} L ${h} ${e} L ${h} ${e} L ${h-r} ${e-a}`})).attr("cursor",!this.suppressEvents?this.cursor:null).attr("opacity",0).each(((t,s,i)=>{P(i[s])})).on("click",!this.suppressEvents?(t,s,i)=>{if(t.values){const h=i[s];const e=d;const a=this.findMarkerIndex(t,h,e);this.onClickHandler(t.values[a],i[s])}}:null).on("mouseover",!this.suppressEvents?(t,s,i)=>{let h=t;if(t.values){const e=i[s];const a=d;const r=this.findMarkerIndex(t,e,a);kt(this.chartID,true);h=t.values[r];this.hoverEvent.emit({data:h,target:i[s]})}this.showTooltip?this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?h:t,evt:d,isToShow:true}):""}:null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity);this.update.order()}updateBarStyle(){this.update.attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity)}updateMarkerSize(t){const s=t||this.updateMarkers;s.each(((t,s,i)=>{const h=f(i[s]);const e=s<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):s<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+"");const a=t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar;const r=this.marker.type==="dot"?1:this.marker.type==="stroke"?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&t.referenceIndex===0?1:2;const l=a*r*(e+1);const o=l?10/l:0;h.attr("viewBox",`0 0 ${10+o} ${10+o}`).attr("refX",5+o/2).attr("refY",5+o/2).attr("stroke-width",o).attr("markerWidth",l).attr("markerHeight",l);if(this.marker.type==="dot"){h.select("circle").attr("cx",5+o/2).attr("cy",5+o/2)}else if(this.marker.type==="stroke"){h.select("path").attr("d",`M 4.5 ${0+o/2} L 4.5 ${10+o/2} L 6 ${10+o/2} L 6 ${0+o/2} z`)}else if(this.marker.type==="arrow"){h.select("path").attr("transform",t.focus&&this.focusMarker.key&&t.referenceIndex===1?`rotate(180,${5+o/2},${5+o/2})`:null).attr("d",t.focus&&this.focusMarker.key||!this.focusMarker.key&&t.referenceIndex===0?`M ${0+o/2} ${5+o/4} L ${10+o/2} ${0+o/2} L ${10+o/2} ${10+o/2} z`:`M 4.5 ${0+o/2} L 4.5 ${10+o/2} L 6 ${10+o/2} L 6 ${0+o/2} z`)}}))}drawMarkerGeometries(){this.updateMarkers.selectAll(".marker-"+this.marker.type).data((t=>[t]));if(this.marker.type==="arrow"){this.updateMarkers.selectAll("path").attr("d",((t,s,i)=>{const h=s<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):s<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+"");const e=t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar;const a=this.marker.type==="dot"?1:this.marker.type==="stroke"?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&t.referenceIndex===0?1:2;const r=e*a*(h+1);const l=r?10/r:0;f(i[s]).attr("transform",t.focus&&this.focusMarker.key&&t.referenceIndex===1?`rotate(180,${5+l/2},${5+l/2})`:null);return t.focus&&this.focusMarker.key||!this.focusMarker.key&&t.referenceIndex===0?`M ${0+l/2} ${5+l/4} L ${10+l/2} ${0+l/2} L ${10+l/2} ${10+l/2} z`:`M 4.5 ${0+l/2} L 4.5 ${10+l/2} L 6 ${10+l/2} L 6 ${0+l/2} z`}))}}updateDumbbells(){this.update.interrupt();this.enter.transition("opacity").duration(this.duration).ease(A).attr("opacity",1)}exitDumbbells(){this.exit.interrupt();this.exit.transition("exit").ease(A).duration(this.duration/2).attr("opacity",0).attr("d",((t,s,i)=>{const h=f(i[s]);const e=+h.attr("data-centerX1");const a=+h.attr("data-centerY1");const r=+h.attr("data-centerX2");const l=+h.attr("data-centerY2");const o=this.isVertical?a>l?.001:-.001:0;const n=!this.isVertical?e>r?.001:-.001:0;return`M ${e+n} ${a+o} L ${e} ${a} L ${e} ${a} L ${r} ${l} L ${r} ${l} L ${r} ${l} L ${e} ${a} L ${e} ${a} L ${e} ${a} L ${r} ${l} L ${r} ${l} L ${r-n} ${l-o}`}));this.update.transition("accessibilityAfterExit").duration(this.duration).ease(A).call(Wt,(()=>{const t=st(this.rootG.node());this.exit.remove();this.setChartCountAccessibility();this.setGroupAccessibilityID();this.setGeometryAriaLabels();tt({parentGNode:this.rootG.node(),focusDidExist:t})}))}drawDumbbells(){this.update.classed("moving",((t,s,i)=>{const h=f(i[s]);const e=ot(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&ot(t.values[1],this.clickHighlight,this.innerInteractionKeys);const a=nt(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&nt(t.values[1],this.hoverHighlight,this.innerInteractionKeys);const r=this.dumbbellInteraction?e?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:a?parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width:this.barStyle.width;const l=this.x(t.values[0][this.xAccessor]);const o=this.y(t.values[0][this.yAccessor]);const n=this.x(t.values[1][this.xAccessor]);const c=this.y(t.values[1][this.yAccessor]);const u=+h.attr("data-barSize");const d=+h.attr("data-centerX1");const b=+h.attr("data-centerY1");const p=+h.attr("data-centerX2");const m=+h.attr("data-centerY2");return r!==u||l!==d||o!==b||n!==p||c!==m})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-d",this.setBarSize).transition("update").ease(A).duration(this.duration).attr("d",this.setBarSize).call(Wt,(()=>{this.update.classed("moving",false);tt({parentGNode:this.rootG.node()});this.transitionEndEvent.emit({chartID:this.chartID})}))}updateMarkerIds(){this.updateMarkers.attr("id",(t=>this.generateId(t,t.index)));this.update.attr("marker-start",(t=>{const s=lt(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys);const i=nt(t.values[0],this.hoverHighlight,this.innerInteractionKeys);const h=ot(t.values[0],this.clickHighlight,this.innerInteractionKeys);const e=i&&!h?this.updateMarkers._groups[0][4].id:h||s?this.updateMarkers._groups[0][0].id:this.updateMarkers._groups[0][2].id;return this.url+e+")"})).attr("marker-end",(t=>{const s=lt(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys);const i=nt(t.values[1],this.hoverHighlight,this.innerInteractionKeys);const h=ot(t.values[1],this.clickHighlight,this.innerInteractionKeys);const e=i&&!h?this.updateMarkers._groups[0][5].id:h||s?this.updateMarkers._groups[0][1].id:this.updateMarkers._groups[0][3].id;return this.url+e+")"}))}updateInteractionState(){this.update.interrupt("opacity");this.updateLabelChildren.interrupt("opacity");this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(t=>(this.marker.visible||t.focus)&&!t.limitOpacity?1:this.marker.visible||t.focus?this.hoverOpacity:0));this.update.attr("opacity",1).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity).each(((t,s,i)=>{const h=f(i[s]);if(!h.classed("moving")){h.attr("d",this.setBarSize)}}));this.drawDataLabels(true);if(this.seriesLabelDetails.visible&&(this.seriesLabelDetails.placement==="auto"||this.seriesLabelDetails.collisionHideOnly)){this.drawSeriesLabels(true)}if(this.diffLabelDetails.visible&&(this.diffLabelDetails.placement==="auto"||this.diffLabelDetails.collisionHideOnly)){this.drawDifferenceLabels(true)}tt({parentGNode:this.rootG.node()});pt({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}enterSeriesLabels(){this.enterSeriesLabel.interrupt();const t=this.seriesLabelDetails.placement==="auto";const s=this.isVertical?"right":"top";const i=t?true:this.seriesLabelDetails.placement.includes(s);this.enterSeriesLabel.attr("opacity",(t=>{const s=!this.seriesLabelDetails.visible?0:1;if(!this.seriesInteraction){return s}else{return lt(t,s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON}})).attr("class","dumbbell-series-label").attr("fill",this.handleSeriesLabelColors).attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>this.onHoverHandler(t,i[s],false):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null).attr("text-anchor",this.isVertical&&i?"start":this.isVertical?"end":"middle").attr("x",(t=>this.isVertical&&i?this.innerPaddedWidth:!this.isVertical?this.x(t.value):0)).attr("y",(t=>this.isVertical?this.y(t.value):!this.isVertical&&!i?this.innerPaddedHeight:0)).attr("dx",this.isVertical&&i?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}updateSeriesLabels(){this.updateSeriesLabel.interrupt();this.updateSeriesLabel.transition("opacity_series_labels").ease(A).duration(this.duration).attr("opacity",(t=>{const s=!this.seriesLabelDetails.visible?0:1;if(!this.seriesInteraction){return s}else{return lt(t,s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1}}))}exitSeriesLabels(){this.exitSeriesLabel.transition("exit_series_labels").ease(A).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(t){const s=this.seriesLabelDetails.placement==="auto";const i=this.isVertical?"right":"top";const h=s?true:this.seriesLabelDetails.placement.includes(i);const e=!s&&this.seriesLabelDetails.collisionHideOnly;const a=this.updateSeriesLabel.text(((t,s)=>this.seriesLabelDetails.label?this.seriesLabelDetails.label[s]:t.label)).style("visibility",((t,i,h)=>s||this.seriesLabelDetails.collisionHideOnly?f(h[i]).style("visibility"):null)).attr("fill",this.handleSeriesLabelColors).attr("data-x",(t=>this.isVertical&&h?this.innerPaddedWidth:!this.isVertical?this.x(t.value):0)).attr("data-y",((t,s,i)=>{const e=i[s];const a=getComputedStyle(e);const r=parseFloat(a.fontSize);const l=Math.max(r-1,1);return this.isVertical?this.y(t.value)+.3*l:!this.isVertical&&!h?this.innerPaddedHeight:0})).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",e).attr("data-use-dy",e).attr("data-text-anchor",this.isVertical&&h?"start":this.isVertical?"end":"middle").attr("dx",this.isVertical&&h?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em").transition("update_series_labels").ease(A).duration((()=>{if(t){return 0}return this.duration}));if(this.seriesLabelDetails.visible&&(this.seriesLabelDetails.placement==="auto"||this.seriesLabelDetails.collisionHideOnly)){this.bitmaps=zt({bitmaps:this.bitmaps,labelSelection:a,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:[this.seriesAccessor],size:[Ot(this.width,0),Ot(this.height,0)],hideOnly:this.seriesLabelDetails.visible&&this.seriesLabelDetails.collisionHideOnly&&this.seriesLabelDetails.placement!=="auto"});if(e){a.attr("text-anchor",this.isVertical&&h?"start":this.isVertical?"end":"middle").attr("x",(t=>this.isVertical&&h?this.innerPaddedWidth:!this.isVertical?this.x(t.value):0)).attr("y",(t=>this.isVertical?this.y(t.value):!this.isVertical&&!h?this.innerPaddedHeight:0)).attr("dx",this.isVertical&&h?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}}else{a.attr("text-anchor",this.isVertical&&h?"start":this.isVertical?"end":"middle").attr("x",(t=>this.isVertical&&h?this.innerPaddedWidth:!this.isVertical?this.x(t.value):0)).attr("y",(t=>this.isVertical?this.y(t.value):!this.isVertical&&!h?this.innerPaddedHeight:0)).attr("dx",this.isVertical&&h?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}}setSeriesLabelOpacity(){this.updateSeriesLabel.interrupt("opacity_series_labels");this.updateSeriesLabel.attr("opacity",(t=>{const s=!this.seriesLabelDetails.visible?0:1;if(!this.seriesInteraction){return s}else{return lt(t,s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1}}))}enterDifferenceLabels(){this.enterDiffLabel.interrupt();const t=this.isVertical?"left":"top";const s=this.diffLabelDetails.placement.includes(t);this.enterDiffLabel.attr("class","dumbbell-diff-label").attr("opacity",(t=>{const s=this.differenceLabel.visible?1:0;if(!this.dumbbellInteraction){return s}else{return lt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON}})).attr("fill",this.setDiffLabelColor).attr("cursor",!this.suppressEvents&&this.dumbbellInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?(t,s,i)=>this.onHoverHandler(t,i[s],true):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null).attr("x",(t=>this.isVertical?this.x(t.values[0][this.ordinalAccessor]):this.x(t.middle))).attr("y",(t=>!this.isVertical&&s?this.y(t.key)-this.barStyle.width/2-4:!this.isVertical?this.y(t.key)+this.barStyle.width/2+4:this.y(t.middle))).attr("dx",this.isVertical&&s?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&s?"0":!this.isVertical?"0.6em":"0.3em")}updateDifferenceLabels(){this.updateDiffLabel.interrupt();this.updateDiffLabel.transition("opacity_diff_labels").ease(A).duration(this.duration).attr("opacity",(t=>{const s=this.differenceLabel.visible?1:0;if(!this.dumbbellInteraction){return s}else{return lt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1}}))}exitDifferenceLabels(){this.exitDiffLabel.transition("exit_diff_label").ease(A).duration(this.duration).attr("opacity",0).remove()}drawDifferenceLabels(t){const s=this.diffLabelDetails.placement==="auto";const i=this.isVertical?"left":"top";const h=s?true:this.diffLabelDetails.placement.includes(i);const e=!s&&this.differenceLabel.collisionHideOnly;const a=this.updateDiffLabel.text((t=>mt(t,this.differenceLabel.calculation,this.differenceLabel.format))).style("visibility",((t,i,h)=>s||this.differenceLabel.collisionHideOnly?f(h[i]).style("visibility"):null)).attr("data-x",(t=>this.isVertical?this.x(t.values[0][this.ordinalAccessor]):this.x(t.middle))).attr("data-y",(t=>!this.isVertical&&h?this.y(t.key)-this.barStyle.width/2-4:!this.isVertical?this.y(t.key)+this.barStyle.width/2+4:this.y(t.middle))).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",e).attr("data-use-dy",e).attr("dx",this.isVertical&&h?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&h?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",((t,i,e)=>s&&f(e[i]).attr("text-anchor")?f(e[i]).attr("text-anchor"):this.isVertical&&h?"end":this.isVertical?"start":"middle")).transition("update_diff_label").ease(A).duration((()=>{if(t){return 0}return this.duration}));if(this.differenceLabel.visible&&(this.diffLabelDetails.placement==="auto"||this.differenceLabel.collisionHideOnly)){const t=e?["middle"]:this.isVertical?["left","right"]:["top","bottom"];const s=e?[this.barStyle.width/2+4]:[this.barStyle.width/2+4,this.barStyle.width/2+4];this.bitmaps=zt({bitmaps:this.bitmaps,labelSelection:a,avoidMarks:[this.update],validPositions:t,offsets:s,accessors:["key"],size:[Ot(this.width,0),Ot(this.height,0)],hideOnly:this.differenceLabel.visible&&this.differenceLabel.collisionHideOnly&&this.diffLabelDetails.placement!=="auto"});if(e){a.attr("x",(t=>this.isVertical?this.x(t.values[0][this.ordinalAccessor]):this.x(t.middle))).attr("y",(t=>!this.isVertical&&h?this.y(t.key)-this.barStyle.width/2-4:!this.isVertical?this.y(t.key)+this.barStyle.width/2+4:this.y(t.middle))).attr("dx",this.isVertical&&h?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&h?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",this.isVertical&&h?"end":this.isVertical?"start":"middle")}}else{a.attr("x",(t=>this.isVertical?this.x(t.values[0][this.ordinalAccessor]):this.x(t.middle))).attr("y",(t=>!this.isVertical&&h?this.y(t.key)-this.barStyle.width/2-4:!this.isVertical?this.y(t.key)+this.barStyle.width/2+4:this.y(t.middle))).attr("dx",this.isVertical&&h?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&h?"0":!this.isVertical?"0.6em":"0.3em").attr("text-anchor",this.isVertical&&h?"end":this.isVertical?"start":"middle")}}enterDataLabels(){this.enterLabels.interrupt();this.enterLabels.attr("class","dumbbell-label-wrapper").attr("opacity",0).attr("fill",this.handleLabelColors);this.enterLabelChildren.attr("class","dumbbell-dataLabel").attr("opacity",(t=>lt(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON)).attr("fill",this.handleLabelColors).attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null).on("click",!this.suppressEvents&&this.dataLabel.visible?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?(t,s,i)=>this.onHoverHandler(t,i[s],true):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null);$t({root:this.enterLabelChildren,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})}setDifferenceLabelOpacity(){this.updateDiffLabel.interrupt("opacity_diff_labels");this.updateDiffLabel.attr("opacity",(t=>{const s=this.differenceLabel.visible?1:0;if(!this.dumbbellInteraction){return s}else{return lt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1}}))}updateDataLabels(){this.updateLabelChildren.classed("transitioning",true);this.updateLabels.transition("opacity").ease(A).duration(this.duration).attr("opacity",(()=>{const t=!this.dataLabel.visible?0:1;return t})).call(Wt,(()=>{this.updateLabelChildren.classed("transitioning",false)}))}exitDataLabels(){this.exitLabels.interrupt();this.exitLabels.selectAll(".dumbbell-dataLabel").transition("exit").ease(A).duration(this.duration/2).attr("opacity",0).call(Wt,(()=>{this.exitLabels.remove()}));this.exitLabelChildren.transition("exit_dataLabel").ease(A).duration(this.duration).attr("opacity",0).remove()}drawDataLabels(t){const s=this.placement==="auto";const i=this.placement!=="auto"&&this.dataLabel.collisionHideOnly;this.updateLabelChildren.text((t=>mt(t,this.innerLabelAccessor,this.dataLabel.format)));const h=this.updateLabelChildren.attr("fill",this.handleLabelColors).style("visibility",((t,i,h)=>s||this.dataLabel.collisionHideOnly?f(h[i]).style("visibility"):null)).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-use-dx",i).attr("data-use-dy",i).attr("dx",(t=>this.isVertical?"0.0em":t.offset>=0?"-0.1em":"0.1em")).attr("dy",(t=>this.isVertical&&t.offset>=0?"0.9em":this.isVertical?"-0.3em":"0.0em")).attr("data-y",((t,s,i)=>{const h=i[s];const e=getComputedStyle(h);const a=parseFloat(e.fontSize);const r=Math.max(a-1,1);const l=Ct(h.textContent,a,true,e.fontFamily);const o=this.layoutOverride!=="horizontal"?0:t.offset>=0?-l/2:l/2;const n=this.layoutOverride!=="vertical"?-r/2:t.offset>=0?r/2:-r+-r/2;f(h).attr("data-x",(t=>(this.isVertical?this.x(t[this.ordinalAccessor]):this.x(t[this.valueAccessor])-t.offset)+o));return this.isVertical?this.y(t[this.valueAccessor])+t.offset+n:this.y(t[this.ordinalAccessor])+n})).attr("data-offset",(t=>t.offset)).transition("update_dataLabel").ease(A).duration((()=>{if(t){return 0}return this.duration}));this.bitmaps=$t({root:h,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData,avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.placement==="auto",labelSelection:h,avoidMarks:[this.update],validPositions:["middle"],offsets:[1],accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[Ot(this.width,0),Ot(this.height,0)],boundsScope:"centroid",hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}})}updateDiffLabelColor(){this.updateDiffLabel.attr("fill",this.setDiffLabelColor)}setLabelOpacity(){this.updateLabels.attr("opacity",this.dataLabel.visible?1:0);this.updateLabelChildren.attr("opacity",(t=>lt(t,ct(this.dataLabel.visible,this.dataLabel.displayOnly,t,this.displayOnlyLabelData,[this.ordinalAccessor]),this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:ct(this.dataLabel.visible,this.dataLabel.displayOnly,t,this.displayOnlyLabelData,[this.ordinalAccessor])))}updateMarkerOpacity(){this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(t=>(this.marker.visible||t.focus)&&!t.limitOpacity?1:this.marker.visible||t.focus?this.hoverOpacity:0))}drawReferenceLines(){Mt({groupName:"dumbbell",root:this.referencesG,referenceLines:this.referenceLines,referenceStyle:this.referenceStyle,innerPaddedWidth:this.innerPaddedWidth,innerPaddedHeight:this.innerPaddedHeight,duration:this.duration,layout:this.layout,x:this.x,y:this.y,unitTest:this.unitTest})}setSelectedClass(){this.update.classed("highlight",((t,s,i)=>{const h=lt(t.values[0],1,0,{},this.clickHighlight,this.innerInteractionKeys);const e=lt(t.values[1],1,0,{},this.clickHighlight,this.innerInteractionKeys);let a=h||e;a=this.clickHighlight&&this.clickHighlight.length?a:false;const r=this.accessibility.elementsAreInterface;it(i[s],a,r);return a}))}drawAnnotations(){at({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.layoutOverride!=="horizontal"?this.ordinalAccessor:this.valueAccessor,yScale:this.y,yAccessor:this.layoutOverride!=="horizontal"?this.valueAccessor:this.ordinalAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){Z(this.getLanguageString(),this.dumbbellPlotEl,this.annotations,this.referenceLines)}setTagLevels(){this.topLevel=Dt(this.highestHeadingLevel);this.bottomLevel=Dt(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){j({language:this.getLanguageString(),rootEle:this.dumbbellPlotEl,title:this.accessibility.title||this.mainTitle,chartTag:"dumbbell-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled,hideDataTable:this.accessibility.hideDataTableButton});this.shouldRedrawWrapper=false}setParentSVGAccessibility(){const t=At(this,rt,"dumbbell-plot");delete t[this.ordinalAccessor];N({chartTag:"dumbbell-plot",language:this.getLanguageString(),node:this.svg.node(),title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupKeys:["message"],nested:"values",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each(((t,s,i)=>{P(i[s])}))}setGeometryAriaLabels(){const t=At(this,rt,"dumbbell-plot");delete t[this.ordinalAccessor];this.update.each(((s,i,h)=>{_({chartTag:"dumbbell-plot",language:this.getLanguageString(),node:h[i],geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupKeys:["message"],nested:["values"],uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});F({node:h[i],uniqueID:this.chartID})}))}setGroupAccessibilityAttributes(){P(this.dumbbellG.node())}setGroupAccessibilityID(){this.dumbbellG.each(((t,s,i)=>{F({node:i[s],uniqueID:this.chartID})}))}setChartAccessibilityTitle(){G(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){H(this.getLanguageString(),this.dumbbellPlotEl,this.subTitle)}setChartAccessibilityLongDescription(){X(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){Y(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){B(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.purpose)}setChartAccessibilityContext(){q(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){V(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){R({rootEle:this.dumbbellPlotEl,parentGNode:this.dumbbellG.node(),chartTag:"dumbbell-plot",geomType:"dumbbell"})}setChartAccessibilityStructureNotes(){Q(this.getLanguageString(),this.dumbbellPlotEl,this.accessibility.structureNotes)}onChangeHandler(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){const t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0}onClickHandler(t,s){this.clickEvent.emit({data:t,target:s})}onHoverHandler(t,s,i){kt(this.chartID,true);this.hoverEvent.emit({data:t,target:s});if(this.showTooltip&&i){this.eventsTooltip({data:t,evt:d,isToShow:true})}}onMouseOutHandler(){kt(this.chartID,false);this.mouseOutEvent.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}}setTooltipInitialStyle(){Lt(this.tooltipG)}eventsTooltip({data:t,evt:s,isToShow:i}){et({root:this.tooltipG,data:t,event:s,isToShow:i,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,dataKeyNames:this.dataKeyNames,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,diffLabelDetails:this.diffLabelDetails,chartType:"dumbbell"})}updateCursor(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateDiffLabel.attr("cursor",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?this.cursor:null);this.updateLabelChildren.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)}drawLegendElements(){bt({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:!this.accessibility.hideStrokes?this.rawColors:null,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,label:this.legend.labels||this.ordinalLabel,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){f(this.dumbbellPlotEl).selectAll(".legend").on("click",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s],false):null).on("mouseout",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){f(this.dumbbellPlotEl).selectAll(".legend").style("cursor",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?this.cursor:null)}setSeriesCursor(){this.updateSeriesLabel.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null)}bindSeriesInteractivity(){this.updateSeriesLabel.on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>this.onHoverHandler(t,i[s],false):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null)}bindInteractivity(){this.update.on("click",!this.suppressEvents?(t,s,i)=>{if(t.values){const h=i[s];const e=d;const a=this.findMarkerIndex(t,h,e);this.onClickHandler(t.values[a],i[s])}}:null).on("mouseover",!this.suppressEvents?(t,s,i)=>{let h=t;if(t.values){const e=i[s];const a=d;const r=this.findMarkerIndex(t,e,a);kt(this.chartID,true);h=t.values[r];this.hoverEvent.emit({data:h,target:i[s]})}this.showTooltip?this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?h:t,evt:d,isToShow:true}):""}:null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);this.updateLabelChildren.on("click",!this.suppressEvents&&this.dataLabel.visible?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?(t,s,i)=>this.onHoverHandler(t,i[s],true):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null);this.updateDiffLabel.on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?(t,s,i)=>this.onHoverHandler(t,i[s],true):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null)}findMarkerIndex(t,s,i){const h=this.isVertical?this.findPosition(s,i)[1]:this.findPosition(s,i)[0];const e=this.isVertical?"Y":"X";const a=+f(s).attr("data-center"+e+"1");const r=+f(s).attr("data-center"+e+"2");const l=(r-a)/2+a;const o=t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]?0:1;return h<=l?0+o:1-o}findPosition(t,s){const i=t.ownerSVGElement||t;let h=i.createSVGPoint();h.x=s.clientX;h.y=s.clientY;h=h.matrixTransform(t.getScreenCTM().inverse());return[h.x,h.y]}generateId(t,s){let i=this.marker.type==="dot"?1:this.marker.type==="stroke"?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&t.referenceIndex===0?1:2;i=t.focus?this.focusMarker.sizeFromBar*i:this.marker.sizeFromBar*i;const h=this.marker.visible||t.focus?1:0;const e=this.rawColors[t.referenceIndex][0]==="#"?this.rawColors[t.referenceIndex].substring(1):this.rawColors[t.referenceIndex];let a=(s<2&&this.clickHighlight.length?this.clickStyle.strokeWidth:s<4?this.barStyle.width:this.hoverStyle.strokeWidth).toString();a=""+a;a=a.replace(/\D/g,"n");const r="marker-"+this.chartID+s+this.marker.type+i+e+a+h;return r}render(){this.drawStartEvent.emit({chartID:this.chartID});this.init();if(this.shouldSetLocalizationConfig){this.setLocalizationConfig();this.shouldSetLocalizationConfig=false}if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.shouldValidate=false}if(this.shouldValidateLayout){this.validateLayout()}if(this.shouldValidateDataLabelPlacement){this.validateDataLabelPlacement();this.shouldValidateDataLabelPlacement=false}if(this.shouldValidateSeriesLabelPlacement){this.validateSeriesLabelPlacement();this.shouldValidateSeriesLabelPlacement=false}if(this.shouldValidateDiffLabelPlacement){this.validateDiffLabelPlacement();this.shouldValidateDiffLabelPlacement=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldUpdateLayout){this.setLayoutData();this.shouldUpdateLayout=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateMarkerData){this.prepareMarkerData();this.shouldUpdateMarkerData=false}if(this.shouldUpdateSeriesData){this.prepareSeriesData();this.shouldUpdateSeriesData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldUpdateLabelData){this.prepareLabelData();this.shouldUpdateLabelData=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"||this.layoutOverride){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"||this.layoutOverride){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}return i("div",{key:"3e861b45de729d51af481b46a06a00dbbfd0faa5",class:"o-layout"},i("div",{key:"e8fef1eddbdd83eea783def0cd9ad3d37ea0504f",class:"o-layout--chart"},i(this.topLevel,{key:"81dbd711c7d18056f2f5c3dfc6d2675889082fb2",class:"dumbbell-main-title vcl-main-title","data-testid":"main-title"},this.mainTitle),i(this.bottomLevel,{key:"909dc87b7a6ebf71e47036d1495486fb329ad297",class:"visa-ui-text--instructions dumbbell-sub-title vcl-sub-title","data-testid":"sub-title"}),i("div",{key:"90d982c02e3afc15f8f66161f35b3a1d51e68e70",class:"dumbbell-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),i("keyboard-instructions",{key:"df0cd6ac1c4729ef4b0deccb44183ab36b115678",uniqueID:this.chartID,language:this.getLanguageString(),geomType:"dumbbell",chartTag:"dumbbell-plot",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),i("div",{key:"b86e71babcbc1e299de311126596c828f9ebf456",class:"visa-viz-d3-dumbbell-container"}),i("div",{key:"1c690d6115e7fc1ba103fdac620960d0d35ab62a",class:"dumbbell-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),i("data-table",{key:"28b5ef8e6e0d4c75833b46f4c411885ddb724383",uniqueID:this.chartID,unitTest:this.unitTest,language:this.getLanguageString(),isCompact:true,tableColumns:this.tableColumns,data:this.tableData,dataKeyNames:this.dataKeyNames,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(w);let s=0;const i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},dotRadius:{exception:0},hoverOpacity:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(s=0;s<t.length;s++){const h=!i[t[s]]?false:this[t[s]]===i[t[s]].exception;this[t[s]]=this[t[s]]||h?this[t[s]]:w[t[s]]}}get dumbbellPlotEl(){return h(this)}static get watchers(){return{mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],seriesAccessor:["seriesAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],layout:["layoutWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colorPalette:["paletteWatcher"],colors:["paletteWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],hoverOpacity:["hoverOpacityWatcher"],cursor:["cursorWatcher"],focusMarker:["focusMarkerWatcher"],marker:["markerWatcher"],barStyle:["barStyleWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],differenceLabel:["differenceLabelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],localization:["localizationWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],referenceStyle:["referenceWatcher"],referenceLines:["referenceWatcher"],suppressEvents:["suppressWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],interactionKeys:["interactionWatcher"],dataKeyNames:["dataKeyNamesWatcher"],unitTest:["unitTestWatcher"]}}};window["VisaChartsLibOSSLicenses"]=gt();Et.style=D;export{Et as dumbbell_plot};
//# sourceMappingURL=p-00192ae1.entry.js.map