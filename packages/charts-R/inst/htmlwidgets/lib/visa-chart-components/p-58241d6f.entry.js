/**
 * Copyright (c) 2024 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as s,h as i,g as h}from"./p-b0ab226b.js";import{p as e}from"./p-bb2c1516.js";import{n as a,l as r}from"./p-42dcf457.js";import{U as l,s as o,e as n}from"./p-5fcd3c02.js";import{v as c}from"./p-b5f7528a.js";import{t as u,a as d,s as f,b as p,c as y}from"./p-09f6650c.js";import{c as m,a as b,l as g}from"./p-67f05ac6.js";import{b as v,a as x}from"./p-50f1a99e.js";import{m as k}from"./p-f9c89fe4.js";import{m as A}from"./p-e1d72334.js";import{c as w}from"./p-3f5e41ff.js";import"./p-b6ae930f.js";import"./p-6e7316e2.js";import"./p-fa69d97e.js";import"./p-4f683f50.js";import"./p-c79b22e7.js";const{propDefaultValues:W}=l;class L{}L.mainTitle="Parallel Plot Title";L.subTitle=W.subTitle.text;L.height=300;L.width=500;L.margin={top:300*.01,bottom:300*.01,right:500*.01,left:500*.01};L.padding={top:20,bottom:50,right:100,left:75};L.localization=W.localization;L.ordinalAccessor="label";L.valueAccessor="value";L.seriesAccessor="series";L.accessibility=W.accessibility;L.animationConfig=W.animationConfig;L.highestHeadingLevel=W.highestHeadingLevel;L.xAxis=W.xAxis;L.yAxis=W.yAxis;L.showBaselineX=W.showBaselineFalse;L.wrapLabel=W.wrapLabel;L.colorPalette=W.colorPaletteCategorical;L.hoverStyle=W.hoverStyle;L.clickStyle=W.clickStyle;L.strokeWidth=W.strokeWidth1;L.showDots=W.showDots;L.dotRadius=W.dotRadius4;L.lineCurve=W.lineCurve;L.hoverOpacity=W.hoverOpacity;L.cursor=W.cursor;L.dataLabel=W.dataLabelBottomRight;L.seriesLabel=W.seriesLabel;L.legend=W.hiddenLegend;L.tooltipLabel=W.tooltipLabel;L.secondaryLines=W.secondaryLines;L.showTooltip=W.showTooltip;L.suppressEvents=W.suppressEvents;L.annotations=W.annotations;L.clickHighlight=W.clickHighlight;const S=".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}parallel-plot{cursor:default}parallel-plot .annotations{pointer-events:none}parallel-plot .annotations .handle{pointer-events:all}parallel-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}parallel-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}parallel-plot .hidden{display:none}parallel-plot .axis{font-size:12px}parallel-plot .axis text{fill:#767676}parallel-plot .axis-label{text-anchor:middle;font:1rem sans-serif}parallel-plot .axis path{stroke:#767676}parallel-plot .grid line{stroke:#767676;shape-rendering:crispEdges}parallel-plot .grid path{stroke-width:0;stroke:#767676}parallel-plot .grid.left line{stroke-dasharray:4, 4;stroke-opacity:0.6}parallel-plot .parallel-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}parallel-plot .parallel-group__inactive{opacity:0}parallel-plot .parallel-group .parallel-plot{fill:none}parallel-plot .parallel-group .dot{stroke:#ffffff}parallel-plot .parallel-group .parallel-series-label{font-size:1em}parallel-plot .parallel-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}parallel-plot .parallel-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}";const T=S;const{getGlobalInstances:C,configLocalization:D,getActiveLanguageString:O,getAccessibleStrokes:P,ensureTextContrast:I,createTextStrokeFilter:E,findTagLevel:N,prepareRenderChange:j,initializeDescriptionRoot:z,initializeElementAccess:F,setElementFocusHandler:K,setElementAccessID:$,setAccessibilityController:H,hideNonessentialGroups:G,setAccessTitle:M,setAccessSubtitle:q,setAccessLongDescription:R,setAccessExecutiveSummary:X,setAccessPurpose:B,setAccessContext:Y,setAccessStatistics:V,setAccessChartCounts:_,setAccessXAxis:U,setAccessYAxis:J,setAccessStructure:Q,setAccessAnnotation:Z,retainAccessFocus:tt,checkAccessFocus:st,setElementInteractionAccessState:it,setAccessibilityDescriptionWidth:ht,annotate:et,chartAccessors:at,checkInteraction:rt,checkClicked:lt,checkHovered:ot,convertVisaColor:nt,drawAxis:ct,drawGrid:ut,drawLegend:dt,setLegendInteractionState:ft,drawTooltip:pt,formatDataLabel:yt,getColors:mt,getLicenses:bt,getPadding:gt,getScopedData:vt,initTooltipStyle:xt,overrideTitleTooltip:kt,placeDataLabels:At,resolveLines:wt,scopeDataKeys:Wt,transitionEndAll:Lt,visaColors:St,validateAccessibilityProps:Tt,validateLocalizationProps:Ct,roundTo:Dt,getTextWidth:Ot,resolveLabelCollision:Pt,setSubTitle:It}=l;const Et=class{constructor(i){t(this,i);this.clickEvent=s(this,"clickEvent",7);this.hoverEvent=s(this,"hoverEvent",7);this.mouseOutEvent=s(this,"mouseOutEvent",7);this.initialLoadEvent=s(this,"initialLoadEvent",7);this.initialLoadEndEvent=s(this,"initialLoadEndEvent",7);this.drawStartEvent=s(this,"drawStartEvent",7);this.drawEndEvent=s(this,"drawEndEvent",7);this.transitionEndEvent=s(this,"transitionEndEvent",7);this.shouldValidateAccessibility=true;this.shouldValidateLocalization=true;this.updated=true;this.enterSize=0;this.exitSize=0;this.time={timehour:u,timeday:d,timeweek:f,timemonth:p,timeyear:y};this.curveOptions={linear:m,bumpX:v,bumpY:x,catmullRom:b};this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateScales=false;this.shouldUpdateTableData=false;this.shouldUpdateLabels=false;this.shouldUpdateAnnotations=false;this.shouldDrawInteractionState=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldSetColors=false;this.shouldSetSubTitle=false;this.shouldUpdateLines=false;this.shouldUpdatePoints=false;this.shouldUpdateLegend=false;this.shouldBindInteractivity=false;this.shouldUpdateLegendInteractivity=false;this.shouldResetRoot=false;this.shouldUpdateBaseline=false;this.shouldValidateInteractionKeys=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetLegendCursor=false;this.shouldAddStrokeUnder=false;this.shouldValidateSeriesLabels=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateColors=false;this.shouldUpdateStrokeWidth=false;this.shouldUpdateInterpolationData=false;this.shouldSetScaleUsed=false;this.shouldUpdateDotRadius=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldUpdateDashPatterns=false;this.shouldValidateDataLabelAccessor=false;this.shouldSetLocalizationConfig=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.b=",";this.short="2,2";this.med="4,2";this.long="8,2";this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long];this.hiddenHash={};this.collisionSettings={all:{validPositions:["top","bottom","left","right","bottom-right","bottom-left","top-left","top-right"],offsets:[3,2,4,4,1,1,1,1]},top:{validPositions:["top","top-left","top-right"],offsets:[3,1,1]},middle:{validPositions:["left","right"],offsets:[4,4]},bottom:{validPositions:["bottom","bottom-left","bottom-right"],offsets:[2,1,1]},right:{validPositions:["right","top-right","bottom-right"],offsets:[4,1,1]},left:{validPositions:["left","top-left","bottom-left"],offsets:[4,1,1]}};this.dynamicY=t=>{if(this.yAxis.scales==="individual"){return this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor])}return this.y(t[this.valueAccessor])};this.interpolateDynamicY=t=>{if(this.yAxis.scales==="individual"){return this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor])}return this.interpolating.y(t[this.valueAccessor])};this.handleDotStroke=(t,s,i)=>{if(!this.accessibility.hideStrokes){const h=this.clickHighlight&&this.clickHighlight.length>0&&lt(t,this.clickHighlight,this.innerInteractionKeys);const e=this.hoverHighlight&&ot(t,this.hoverHighlight,this.innerInteractionKeys);const a=o(i[s].parentNode).attr("fill");const r=h&&this.clickStyle.color?St[this.clickStyle.color]||this.clickStyle.color:h?a:e&&this.hoverStyle.color?St[this.hoverStyle.color]||this.hoverStyle.color:a;o(i[s]).attr("stroke-width",this.calculateStrokeWidth(t));o(i[s]).attr("fill",r);return this.strokes[r.toLowerCase()]}return null};this.handleLineStroke=(t,s)=>{const i=this.colorArr[s]||this.colorArr[0];const h=t.values[0];const e=lt(h,this.clickHighlight,this.innerInteractionKeys);const a=ot(h,this.hoverHighlight,this.innerInteractionKeys);return this.seriesInteraction?e&&this.clickStyle.color?this.strokes[(St[this.clickStyle.color]||this.clickStyle.color).toLowerCase()]:e?i:a&&this.hoverStyle.color?this.strokes[(St[this.hoverStyle.color]||this.hoverStyle.color).toLowerCase()]:i:i};this.handleSeriesTextFill=(t,s)=>{const i=this.rawColors[s]||this.rawColors[0];const h=t.values[0];const e=lt(h,this.clickHighlight,this.innerInteractionKeys);const a=ot(h,this.hoverHighlight,this.innerInteractionKeys);const r=this.seriesInteraction?e&&this.clickStyle.color?St[this.clickStyle.color]||this.clickStyle.color:e?i:a&&this.hoverStyle.color?St[this.hoverStyle.color]||this.hoverStyle.color:i:i;return this.textColors[r.toLowerCase()]};this.handleTextFill=(t,s,i)=>{const h=this.clickHighlight&&this.clickHighlight.length>0&&lt(t,this.clickHighlight,this.innerInteractionKeys);const e=this.hoverHighlight&&ot(t,this.hoverHighlight,this.innerInteractionKeys);const a=o(i[s].parentNode).attr("fill");const r=h&&this.clickStyle.color?St[this.clickStyle.color]||this.clickStyle.color:h?a:e&&this.hoverStyle.color?St[this.hoverStyle.color]||this.hoverStyle.color:a;return this.textColors[r.toLowerCase()]};this.calculateStrokeWidth=(t,s)=>{const i=!s?t:t.values[0];return!s||this.seriesInteraction?lt(i,this.clickHighlight,this.innerInteractionKeys)?this.clickStyle.strokeWidth||this.strokeWidth:ot(i,this.hoverHighlight,this.innerInteractionKeys)?this.hoverStyle.strokeWidth||this.strokeWidth:!this.secondaryLines.keys.includes(i[this.seriesAccessor])?this.strokeWidth:1:!this.secondaryLines.keys.includes(i[this.seriesAccessor])?this.strokeWidth:1};this.handleStrokeDasharray=(t,s)=>this.secondaryLines.keys.includes(t.key)?this.short:!this.accessibility.hideTextures?this.dashPatterns[s]:"";this.mainTitle=L.mainTitle;this.subTitle=L.subTitle;this.height=L.height;this.width=L.width;this.highestHeadingLevel=L.highestHeadingLevel;this.margin=L.margin;this.padding=L.padding;this.data=undefined;this.uniqueID=undefined;this.localization=L.localization;this.ordinalAccessor=L.ordinalAccessor;this.valueAccessor=L.valueAccessor;this.seriesAccessor=L.seriesAccessor;this.xAxis=L.xAxis;this.yAxis=L.yAxis;this.wrapLabel=L.wrapLabel;this.showBaselineX=L.showBaselineX;this.colorPalette=L.colorPalette;this.colors=undefined;this.hoverStyle=L.hoverStyle;this.clickStyle=L.clickStyle;this.cursor=L.cursor;this.hoverOpacity=L.hoverOpacity;this.animationConfig=L.animationConfig;this.strokeWidth=L.strokeWidth;this.showDots=L.showDots;this.dotRadius=L.dotRadius;this.lineCurve=L.lineCurve;this.dataLabel=L.dataLabel;this.dataKeyNames=undefined;this.showTooltip=L.showTooltip;this.tooltipLabel=L.tooltipLabel;this.accessibility=L.accessibility;this.legend=L.legend;this.annotations=L.annotations;this.seriesLabel=L.seriesLabel;this.maxValueOverride=undefined;this.minValueOverride=undefined;this.secondaryLines=L.secondaryLines;this.suppressEvents=L.suppressEvents;this.hoverHighlight=undefined;this.clickHighlight=L.clickHighlight;this.interactionKeys=undefined;this.unitTest=false}dataWatcher(t,s){this.updated=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldUpdateDotRadius=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true}idWatcher(t,s){console.error("Change detected in prop uniqueID from value "+s+" to value "+t+". This prop cannot be changed after component has loaded.")}headingWatcher(t,s){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}titleWatcher(t,s){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}subtitleWatcher(t,s){this.shouldSetSubTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true}dimensionWatcher(t,s){this.shouldSetDimensions=true;this.shouldResetRoot=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true}seriesAccessorWatcher(t,s){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldValidate=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateTableData=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldUpdateLabels=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true}ordinalAccessorWatcher(t,s){this.shouldSetGlobalSelections=true;this.shouldUpdateTableData=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true}valueAccessorWatcher(t,s){this.shouldUpdateTableData=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGlobalSelections=true}xAxisWatcher(t,s){this.shouldUpdateXAxis=true;const i=t&&t.gridVisible;const h=s&&s.gridVisible;const e=t&&t.tickInterval?t.tickInterval:0;const a=s&&s.tickInterval?s.tickInterval:0;if(i!==h||e!==a){this.shouldUpdateXGrid=true}this.shouldSetXAxisAccessibility=true}yAxisWatcher(t,s){const i=t&&t.scales?t.scales:false;const h=s&&s.scales?s.scales:false;if(i!==h){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;const e=t&&t.gridVisible;const a=s&&s.gridVisible;const r=t&&t.tickInterval?t.tickInterval:0;const l=s&&s.tickInterval?s.tickInterval:0;if(e!==a||r!==l){this.shouldUpdateYGrid=true}}wrapLabelWatcher(t,s){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true}showBaselineXWatcher(t,s){this.shouldUpdateBaseline=true}paletteWatcher(t,s){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true}colorsWatcher(t,s){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true}clickStyleWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldSetColors=true}hoverStyleWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldSetColors=true}cursorWatcher(t,s){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true}strokeWidthWatcher(t,s){this.shouldUpdateStrokeWidth=true}showDotsWatcher(t,s){this.shouldDrawInteractionState=true}dotRadiusWatcher(t,s){this.shouldUpdateDotRadius=true}lineCurveWatcher(t,s){this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;console.warn("Change detected in prop lineCurve from value "+t+" to value "+s+". Transition effects for this prop have not been implemented.")}hoverOpacityWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true}dataLabelWatcher(t,s){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;const i=t&&t.visible;const h=s&&s.visible;const e=t&&t.placement?t.placement:false;const a=s&&s.placement?s.placement:false;const r=t&&t.labelAccessor?t.labelAccessor:false;const l=s&&s.labelAccessor?s.labelAccessor:false;if(i!==h){this.shouldSetLabelOpacity=true}if(e!==a){this.shouldUpdateSeriesLabels=true}if(r!==l){this.shouldValidateDataLabelAccessor=true}}seriesLabelWatcher(t,s){this.shouldUpdateSeriesLabels=true;this.shouldUpdateTableData=true;this.shouldValidateSeriesLabels=true;const i=t&&t.visible;const h=s&&s.visible;if(i!==h){this.shouldSetSeriesLabelOpacity=true}}tooltipLabelWatcher(t,s){this.shouldUpdateTableData=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true}showTooltipWatcher(t,s){}accessibilityWatcher(t,s){this.shouldValidate=true;const i=t&&t.title?t.title:false;const h=s&&s.title?s.title:false;if(i!==h){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}const e=t&&t.executiveSummary?t.executiveSummary:false;const a=s&&s.executiveSummary?s.executiveSummary:false;if(e!==a){this.shouldSetChartAccessibilityExecutiveSummary=true}const r=t&&t.purpose?t.purpose:false;const l=s&&s.purpose?s.purpose:false;if(r!==l){this.shouldSetChartAccessibilityPurpose=true}const o=t&&t.longDescription?t.longDescription:false;const n=s&&s.longDescription?s.longDescription:false;if(o!==n){this.shouldSetChartAccessibilityLongDescription=true}const c=t&&t.contextExplanation?t.contextExplanation:false;const u=s&&s.contextExplanation?s.contextExplanation:false;if(c!==u){this.shouldSetChartAccessibilityContext=true}const d=t&&t.statisticalNotes?t.statisticalNotes:false;const f=s&&s.statisticalNotes?s.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}const p=t&&t.structureNotes?t.structureNotes:false;const y=s&&s.structureNotes?s.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}const m=t&&t.includeDataKeyNames;const b=s&&s.includeDataKeyNames;const g=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;const v=s&&s.elementDescriptionAccessor?s.elementDescriptionAccessor:false;if(m!==b||g!==v){if(m!==b){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}const x=t&&t.showSmallLabels?t.showSmallLabels:false;const k=s&&s.showSmallLabels?s.showSmallLabels:false;if(x!==k){this.shouldSetLabelOpacity=true}const A=t&&t.hideStrokes?t.hideStrokes:false;const w=s&&s.hideStrokes?s.hideStrokes:false;if(A!==w){this.shouldUpdateStrokeWidth=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true}const W=t&&t.hideTextures?t.hideTextures:false;const L=s&&s.hideTextures?s.hideTextures:false;if(W!==L){this.shouldUpdateDashPatterns=true;this.shouldUpdateLegend=true}const S=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;const T=s&&s.keyboardNavConfig&&s.keyboardNavConfig.disabled?s.keyboardNavConfig.disabled:false;const C=t&&t.elementsAreInterface?t.elementsAreInterface:false;const D=s&&s.elementsAreInterface?s.elementsAreInterface:false;if(S!==T||C!==D){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(C!==D){this.shouldSetSelectionClass=true}}localizationWatcher(t,s){this.shouldValidate=true;const i=t&&t.language?t.language:false;const h=s&&s.language?s.language:false;if(i!==h){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldValidateDataLabelAccessor=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}const e=t&&t.numeralLocale?t.numeralLocale:false;const a=s&&s.numeralLocale?s.numeralLocale:false;if(e!==a){this.shouldSetLocalizationConfig=true;this.shouldUpdateTableData=true;this.shouldValidateDataLabelAccessor=true;this.shouldRedrawWrapper=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}}legendWatcher(t,s){this.shouldUpdateLegend=true;const i=t&&t.interactive;const h=s&&s.interactive;if(i!==h){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}}annotationsWatcher(t,s){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true}valueOverrideWatcher(t,s){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true}secondaryLinesWatcher(t,s){const i=t&&t.showDataLabel;const h=s&&s.showDataLabel;const e=t&&t.showSeriesLabel;const a=s&&s.showSeriesLabel;const r=t&&t.keys?t.keys:false;const l=s&&s.keys?s.keys:false;const o=t&&t.opacity?t.opacity:0;const n=s&&s.opacity?s.opacity:0;if(r!==l){this.shouldUpdateLines=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true}if(i!==h){this.shouldSetLabelOpacity=true}if(e!==a){this.shouldUpdateLabels=true}if(o!==n){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true}}clickWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true}hoverWatcher(t,s){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true}interactionWatcher(t,s){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true}dataKeyNamesWatcher(t,s){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetGeometryAriaLabels=true}suppressWatcher(t,s){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetSubTitle=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}unitTestWatcher(t,s){this.shouldSetTestingAttributes=true}componentWillLoad(){const t=this.uniqueID||"parallel-plot-"+c();this.initialLoadEvent.emit({chartID:t});return new Promise((s=>{this.duration=0;this.defaults=true;this.chartID=t;this.parallelChartEl.id=this.chartID;this.setLocalizationConfig();this.setTagLevels();this.setDimensions();this.setScaleUsed();this.prepareScales();this.prepareData();this.updateInterpolationData();this.validateInteractionKeys();this.validateSeriesLabels();this.validateDataLabelAccessor();this.setTableData();this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.setColors();s("component will load")}))}componentWillUpdate(){return new Promise((t=>{t("component will update")}))}componentDidLoad(){return new Promise((t=>{this.renderRootElements();this.renderChartRootElemets();this.setChartDescriptionWrapper();this.setChartAccessibilityTitle();this.setChartAccessibilitySubtitle();this.setChartAccessibilityLongDescription();this.setChartAccessibilityExecutiveSummary();this.setChartAccessibilityPurpose();this.setChartAccessibilityContext();this.setChartAccessibilityStatisticalNotes();this.setChartAccessibilityStructureNotes();this.setParentSVGAccessibility();this.reSetRoot();this.setSubTitleElements();this.drawXGrid();this.drawYGrid();this.setGlobalSelections();this.setTestingAttributes();this.drawXAxis();this.setXAxisAccessibility();this.enterYAxis();this.exitYAxis();this.drawYAxis();this.setYAxisAccessibility();this.enterChartLines();this.updateChartLines();this.exitChartLines();this.enterPoints();this.updatePoints();this.exitPoints();this.drawChartLines();this.drawPoints();this.enterSeriesLabels();this.updateSeriesLabels();this.exitSeriesLabels();this.enterDataLabels();this.updateDataLabels();this.exitDataLabels();this.setChartCountAccessibility();this.setGeometryAccessibilityAttributes();this.setGeometryAriaLabels();this.drawLegendElements();this.drawDataLabels();this.drawSeriesLabels();this.addStrokeUnder();this.setSelectedClass();this.updateCursor();this.bindInteractivity();this.setLegendCursor();this.bindLegendInteractivity();this.drawBaseline();this.drawAnnotations();this.setAnnotationAccessibility();G(this.root.node(),this.dotG.node());this.setGroupAccessibilityID();this.onChangeHandler();this.defaults=false;t("component did load")})).then((()=>this.initialLoadEndEvent.emit({chartID:this.chartID})))}componentDidUpdate(){return new Promise((t=>{this.duration=!this.animationConfig||!this.animationConfig.disabled?750:0;if(this.shouldUpdateDescriptionWrapper){this.setChartDescriptionWrapper();this.shouldUpdateDescriptionWrapper=false}if(this.shouldSetChartAccessibilityCount){this.setChartCountAccessibility();this.shouldSetChartAccessibilityCount=false}if(this.shouldSetChartAccessibilityTitle){this.setChartAccessibilityTitle();this.shouldSetChartAccessibilityTitle=false}if(this.shouldSetChartAccessibilitySubtitle){this.setChartAccessibilitySubtitle();this.shouldSetChartAccessibilitySubtitle=false}if(this.shouldSetChartAccessibilityLongDescription){this.setChartAccessibilityLongDescription();this.shouldSetChartAccessibilityLongDescription=false}if(this.shouldSetChartAccessibilityExecutiveSummary){this.setChartAccessibilityExecutiveSummary();this.shouldSetChartAccessibilityExecutiveSummary=false}if(this.shouldSetChartAccessibilityPurpose){this.setChartAccessibilityPurpose();this.shouldSetChartAccessibilityPurpose=false}if(this.shouldSetChartAccessibilityContext){this.setChartAccessibilityContext();this.shouldSetChartAccessibilityContext=false}if(this.shouldSetChartAccessibilityStatisticalNotes){this.setChartAccessibilityStatisticalNotes();this.shouldSetChartAccessibilityStatisticalNotes=false}if(this.shouldSetChartAccessibilityStructureNotes){this.setChartAccessibilityStructureNotes();this.shouldSetChartAccessibilityStructureNotes=false}if(this.shouldSetParentSVGAccessibility){this.setParentSVGAccessibility();this.shouldSetParentSVGAccessibility=false}if(this.shouldResetRoot){this.reSetRoot();this.shouldResetRoot=false}if(this.shouldUpdateXGrid){this.drawXGrid();this.shouldUpdateXGrid=false}if(this.shouldUpdateYGrid){this.drawYGrid();this.shouldUpdateYGrid=false}if(this.shouldSetGlobalSelections){this.setGlobalSelections();this.shouldSetGlobalSelections=false}if(this.shouldSetTestingAttributes){this.setTestingAttributes();this.shouldSetTestingAttributes=false}if(this.shouldSetSubTitle){this.setSubTitleElements();this.shouldSetSubTitle=false}if(this.shouldEnterUpdateExit){this.enterYAxis();this.exitYAxis();this.enterChartLines();this.updateChartLines();this.exitChartLines();this.enterPoints();this.updatePoints();this.exitPoints();this.enterSeriesLabels();this.updateSeriesLabels();this.exitSeriesLabels();this.enterDataLabels();this.updateDataLabels();this.exitDataLabels();this.shouldEnterUpdateExit=false}if(this.shouldUpdateXAxis){this.drawXAxis();this.shouldUpdateXAxis=false}if(this.shouldUpdateYAxis){this.drawYAxis();this.shouldUpdateYAxis=false}if(this.shouldSetXAxisAccessibility){this.setXAxisAccessibility();this.shouldSetXAxisAccessibility=false}if(this.shouldSetYAxisAccessibility){this.setYAxisAccessibility();this.shouldSetYAxisAccessibility=false}if(this.shouldUpdateLines){this.drawChartLines();this.shouldUpdateLines=false}if(this.shouldUpdatePoints){this.drawPoints();this.shouldUpdatePoints=false}if(this.shouldSetGeometryAccessibilityAttributes){this.setGeometryAccessibilityAttributes();this.shouldSetGeometryAccessibilityAttributes=false}if(this.shouldSetGeometryAriaLabels){this.setGeometryAriaLabels();this.shouldSetGeometryAriaLabels=false}if(this.shouldSetGroupAccessibilityLabel){this.setGroupAccessibilityID();this.shouldSetGroupAccessibilityLabel=false}if(this.shouldUpdateColors){this.updateColors();this.shouldUpdateColors=false}if(this.shouldUpdateLegend){this.drawLegendElements();this.shouldUpdateLegend=false}if(this.shouldUpdateLabels){this.drawDataLabels();this.shouldUpdateLabels=false}if(this.shouldUpdateSeriesLabels){this.drawSeriesLabels();this.shouldUpdateSeriesLabels=false}if(this.addStrokeUnder){this.addStrokeUnder();this.shouldAddStrokeUnder=false}if(this.shouldUpdateStrokeWidth){this.updateStrokeWidth();this.shouldUpdateStrokeWidth=false}if(this.shouldUpdateDotRadius){this.updateDotRadius();this.shouldUpdateDotRadius=false}if(this.shouldDrawInteractionState){this.updateInteractionState();this.shouldDrawInteractionState=false}if(this.shouldUpdateDashPatterns){this.updateStrokePattern();this.shouldUpdateDashPatterns=false}if(this.shouldSetLabelOpacity){this.setLabelOpacity();this.shouldSetLabelOpacity=false}if(this.shouldSetSeriesLabelOpacity){this.setSeriesLabelOpacity();this.shouldSetSeriesLabelOpacity=false}if(this.shouldSetSelectionClass){this.setSelectedClass();this.shouldSetSelectionClass=false}if(this.shouldUpdateLegendInteractivity){this.bindLegendInteractivity();this.shouldUpdateLegendInteractivity=false}if(this.shouldSetLegendCursor){this.setLegendCursor();this.shouldSetLegendCursor=false}if(this.shouldUpdateCursor){this.updateCursor();this.shouldUpdateCursor=false}if(this.shouldBindInteractivity){this.bindInteractivity();this.shouldBindInteractivity=false}if(this.shouldUpdateAnnotations){this.drawAnnotations();this.shouldUpdateAnnotations=false}if(this.shouldSetAnnotationAccessibility){this.setAnnotationAccessibility();this.shouldSetAnnotationAccessibility=false}if(this.shouldUpdateBaseline){this.drawBaseline();this.shouldUpdateBaseline=false}this.onChangeHandler();t("component did update")})).then((()=>this.drawEndEvent.emit({chartID:this.chartID})))}shouldValidateLocalizationProps(){const t=C();const s=t.i18Next.language;const i=t.i18Next.getResourceBundle(s);const h=t.numeral.localeData();if(this.shouldValidateLocalization&&!this.localization.skipValidation){this.shouldValidateLocalization=false;Ct(this.chartID,Object.assign(Object.assign({},this.localization),{language:i,numeralLocale:h}))}}shouldValidateAccessibilityProps(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;Tt(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickEvent:this.suppressEvents?undefined:this.clickEvent.emit}})}}setDimensions(){this.padding=typeof this.padding==="string"?gt(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor}getLanguageString(){return O(this.localization)}setLocalizationConfig(){D(this.localization)}setSubTitleElements(){It({root:this.subTitleG,subTitle:this.subTitle})}setColors(){this.rawColors=this.colors?nt(this.colors):mt(this.colorPalette,this.nest.length);this.textColors={};let t=this.rawColors;this.strokes={};if(!this.accessibility.hideStrokes){t=[]}this.rawColors.forEach((s=>{if(!this.accessibility.hideStrokes){const i=P(s);const h=i.length===2?i[1]:i[0];this.strokes[s.toLowerCase()]=h;t.push(h)}this.textColors[s.toLowerCase()]=I(s,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=P(this.hoverStyle.color);const s=t.length===2?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=s}this.textColors[this.hoverStyle.color.toLowerCase()]=I(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=P(this.clickStyle.color);const s=t.length===2?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=s}this.textColors[this.clickStyle.color.toLowerCase()]=I(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=t}innerScopeDataKeys(){const t=[];at.singleAccessors.forEach((s=>{if(this[s]&&k(this.data,(t=>t[this[s]]))!==undefined){t.push(s)}}));const s=Object.assign(Object.assign({},at),{singleAccessors:t});return Wt(this,s,"parallel-plot")}setTableData(){const t=this.innerScopeDataKeys();this.tableData=vt(this.data,t);this.tableColumns=Object.keys(t)}prepareData(){this.multiYScale={};this.data.map((t=>{const s=this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`];if(s&&(this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly)&&!t["enter"]&&!t["exit"]){t["hidden"]=s["data-label-hidden"];t["auto-x"]=s.x;t["auto-y"]=s.y;t["auto-text-anchor"]=s["text-anchor"]}}));this.nest=a().key((t=>{if(!this.multiYScale[t[this.ordinalAccessor]]){this.multiYScale[t[this.ordinalAccessor]]={min:Infinity,max:0}}if(this.multiYScale[t[this.ordinalAccessor]].min>t[this.valueAccessor]){this.multiYScale[t[this.ordinalAccessor]].min=t[this.valueAccessor]}if(this.multiYScale[t[this.ordinalAccessor]].max<t[this.valueAccessor]){this.multiYScale[t[this.ordinalAccessor]].max=t[this.valueAccessor]}return t[this.seriesAccessor]})).entries(this.data);this.map=a().key((t=>t[this.seriesAccessor])).map(this.data);const t=Object.keys(this.multiYScale);t.forEach((t=>{const s=this.multiYScale[t];const i=this.innerPaddedHeight*.05;s.y=r().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:s.min,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:s.max]).range([this.innerPaddedHeight-i,0+i]);s.ticks=[s.y.invert(this.innerPaddedHeight),s.y.invert(0)]}))}updateInterpolationData(){if(this.interpolating){let t=this.nest.length;this.nest.forEach((s=>{s.interpolate={};const i=this.interpolating.map.get(s.key);const h=s.values;if(!i){s.interpolate.start=h;s.interpolate.end=h}else{const e=wt(i,h,this.ordinalAccessor);if(!e.length){s.interpolate.start=i;s.interpolate.end=h;t--}else{s.interpolate.start=e[0];s.interpolate.end=e[1]}}}));if(!t&&this.nest.length===this.interpolating.length){this.interpolating=false}}}prepareScales(){if(this.nest){this.interpolating=this.nest;const t=this.x.domain();const s=this.x.range();const i=this.y.domain();const h=this.y.range();this.interpolating.scales=this.scalesUsed;this.interpolating.multiYScale=Object.assign({},this.multiYScale);this.interpolating.x=this.x.domain(t).range(s);this.interpolating.y=r().domain(i).range(h);this.interpolating.line=g().x((t=>this.interpolating.x(t[this.ordinalAccessor]))).y((t=>{if(this.interpolating.scales==="individual"){return this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor])}return this.interpolating.y(t[this.valueAccessor])})).curve(this.curveOptions[this.lineCurve]||this.curveOptions["linear"]);this.interpolating.map=this.map}this.extent={};this.extent.minValue=k(this.data,(t=>parseFloat(t[this.valueAccessor])));this.extent.maxValue=A(this.data,(t=>parseFloat(t[this.valueAccessor])));let t=0+this.innerPaddedHeight*.05;let s=this.innerPaddedHeight-this.innerPaddedHeight*.05;if(this.yAxis.scales==="preNormalized"){this.extent.minValue=0;this.extent.maxValue=1;t=0;s=this.innerPaddedHeight}this.extent.minValue=this.minValueOverride||this.minValueOverride===0?this.minValueOverride:this.extent.minValue;this.extent.maxValue=this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:this.extent.maxValue;t=this.minValueOverride||this.minValueOverride===0?this.minValueOverride:t;s=this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:s;this.y=r().domain([this.extent.minValue,this.extent.maxValue]).range([s,t]);this.x=e().domain(this.data.map((t=>t[this.ordinalAccessor]))).range([0,this.innerPaddedWidth]);this.line=g().x((t=>this.x(t[this.ordinalAccessor]))).y((t=>{if(this.yAxis.scales==="individual"){return this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor])}return this.y(t[this.valueAccessor])})).curve(this.curveOptions[this.lineCurve]||this.curveOptions["linear"])}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel&&this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateSeriesLabels(){this.labelDetails=Object.assign({},this.seriesLabel);if(!this.labelDetails.placement){this.labelDetails.placement=""}if(!this.labelDetails.label||!this.labelDetails.label.length){this.labelDetails.label=""}this.isRight=this.labelDetails.placement!=="left"}setScaleUsed(){this.scalesUsed=this.yAxis.scales}renderRootElements(){this.svg=o(this.parallelChartEl).select(".visa-viz-d3-parallel-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group")}renderChartRootElemets(){this.yGroup=this.rootG.append("g").attr("class","y-scales-group");this.parallelLineG=this.rootG.append("g").attr("class","parallel-group parallel-line-group");this.dotG=this.rootG.append("g").attr("class","parallel-group");this.seriesLabelG=this.rootG.append("g").attr("class","parallel-series-wrapper");this.labels=this.rootG.append("g").attr("class","parallel-dataLabel-group");this.legendG=o(this.parallelChartEl).select(".parallel-legend").append("svg");this.subTitleG=o(this.parallelChartEl).select(".parallel-sub-title");this.tooltipG=o(this.parallelChartEl).select(".parallel-tooltip");this.setTooltipInitialStyle()}reSetRoot(){const t=j({selection:this.svg,duration:this.duration,namespace:"root_reset",easing:w});t.attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);const s=j({selection:this.root,duration:this.duration,namespace:"root_reset",easing:w});s.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`);const i=j({selection:this.rootG,duration:this.duration,namespace:"root_reset",easing:w});i.attr("transform",`translate(${this.padding.left}, ${this.padding.top})`);ht(this.chartID,this.width)}setGlobalSelections(){const t=Object.keys(this.multiYScale);const s=this.yGroup.selectAll(".y-wrapper").data(t,(t=>t));this.yEnter=s.enter().append("g");this.yExit=s.exit();this.yUpdate=s.merge(this.yEnter);const i=this.parallelLineG.selectAll(".parallel-plot").data(this.nest,(t=>t.key));this.enterLines=i.enter().append("path");this.exitLines=i.exit();this.updateLines=i.merge(this.enterLines);this.enterSize=this.enterLines.size();const h=this.dotG.selectAll(".parallel-dot-wrapper").data(this.nest,(t=>t.key));this.enterDotWrappers=h.enter().append("g");this.exitDotWrappers=h.exit();this.updateDotWrappers=h.merge(this.enterDotWrappers);const e=this.seriesLabelG.selectAll(".parallel-series-label").data(this.nest,(t=>t.key));this.seriesLabelEnter=e.enter().append("text");this.seriesLabelExit=e.exit();this.seriesLabelUpdate=e.merge(this.seriesLabelEnter);const a=this.labels.selectAll("g").data(this.nest,(t=>t.key));this.enteringLabelGroups=a.enter().append("g");this.exitingLabelGroups=a.exit();this.updatingLabelGroups=a.merge(this.enteringLabelGroups);if(this.interpolating){this.updateDotWrappers.selectAll("circle").remove();const t=this.updateDotWrappers.selectAll("circle").data((t=>t.interpolate.start));this.enterDots=t.enter().append("circle");this.exitDots=t.exit();this.updateDots=t.merge(this.enterDots);this.updatingLabelGroups.selectAll(".parallel-dataLabel").remove();const s=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((t=>t.interpolate.start));this.enteringLabels=s.enter().append("text");this.updatingLabels=s.merge(this.enteringLabels)}else{const t=this.updateDotWrappers.selectAll("circle").data((t=>t.values),(t=>t[this.ordinalAccessor]));this.enterDots=t.enter().append("circle");this.exitDots=t.exit();this.updateDots=t.merge(this.enterDots);this.enterSize=this.enterDots.size();this.exitSize=this.exitDots.size();const s=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((t=>t.values),(t=>t[this.ordinalAccessor]));this.enteringLabels=s.enter().append("text");this.exitingLabels=s.exit();this.updatingLabels=s.merge(this.enteringLabels)}}setTestingAttributes(){if(this.unitTest){o(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid","chart-container");o(this.parallelChartEl).select(".parallel-main-title").attr("data-testid","main-title");o(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.gridG.attr("data-testid","grid-group");this.yGroup.attr("data-testid","y-scales-group");this.yUpdate.attr("data-testid","y-scale-wrapper");this.parallelLineG.attr("data-testid","parallel-line-group");this.updateLines.attr("data-testid","parallel-line").attr("data-id",(t=>`parallel-line-${t.key}`));this.seriesLabelG.attr("data-testid","parallel-series-label-container");this.seriesLabelUpdate.attr("data-testid","parallel-series-label").attr("data-id",(t=>`parallel-series-label-${t.key}`));this.dotG.attr("data-testid","marker-group");this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",(t=>`marker-series-${t.key}`));this.updateDots.attr("data-testid","marker").attr("data-id",(t=>`marker-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`));this.labels.attr("data-testid","dataLabel-group-container");this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",(t=>`dataLabel-group-${t.key}`));this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(t=>`dataLabel-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`));this.svg.select("defs").attr("data-testid","pattern-defs")}else{o(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid",null);o(this.parallelChartEl).select(".parallel-main-title").attr("data-testid",null);o(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.gridG.attr("data-testid",null);this.yGroup.attr("data-testid",null);this.yUpdate.attr("data-testid",null);this.parallelLineG.attr("data-testid",null);this.updateLines.attr("data-testid",null).attr("data-id",null);this.seriesLabelG.attr("data-testid",null);this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null);this.dotG.attr("data-testid",null);this.updateDotWrappers.attr("data-testid",null).attr("data-id",null);this.updateDots.attr("data-testid",null).attr("data-id",null);this.labels.attr("data-testid",null);this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null);this.updatingLabels.attr("data-testid",null).attr("data-id",null);this.svg.select("defs").attr("data-testid",null)}}drawXAxis(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.ordinalAccessor]?this.dataKeyNames[this.ordinalAccessor]:this.xAxis.label;const s=this.innerPaddedWidth/this.nest[0].values.length*.7;ct({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?s:"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:t,padding:this.padding,hide:!this.xAxis.visible,duration:this.duration,hidePath:true})}enterYAxis(){this.yEnter.attr("class","y-wrapper").attr("transform",(t=>"translate("+this.x(t)+",0)")).attr("opacity",0)}exitYAxis(){this.yExit.transition("exit").duration(this.duration).ease(w).attr("opacity",0).remove()}drawYAxis(){const t=this.yAxis.label&&this.yAxis.label!==""?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.valueAccessor]?this.dataKeyNames[this.valueAccessor]:this.yAxis.label;this.yUpdate.each(((s,i,h)=>{const e=this.yAxis.scales==="individual"?this.multiYScale[s].ticks:!this.yAxis.onlyTickExtents?this.yAxis.onlyTickExtents:[this.extent.minValue,this.extent.maxValue];const a=this.multiYScale[s].y.domain();const r=a[0]===a[1]?true:i===0||this.yAxis.scales==="individual"?!this.yAxis.visible:true;ct({root:o(h[i]),height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.yAxis.scales==="individual"?this.multiYScale[s].y:this.y,left:true,wrapLabel:this.wrapLabel?this.padding.left:"",format:this.yAxis.format,tickInterval:e?1:this.yAxis.tickInterval,label:this.yAxis.scales==="individual"||r?"":t,padding:this.padding,hide:r,hidePath:true,duration:this.duration,ticks:e})})).transition("update").duration(this.duration).ease(w).attr("transform",(t=>"translate("+this.x(t)+",0)")).attr("opacity",1)}setXAxisAccessibility(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.ordinalAccessor]?this.dataKeyNames[this.ordinalAccessor]:this.xAxis.label;U({rootEle:this.parallelChartEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x?this.x:false,xAxisLabel:t?t:""})}setYAxisAccessibility(){const t=this.xAxis.label||this.xAxis.label===""?this.xAxis.label:this.dataKeyNames&&this.dataKeyNames[this.ordinalAccessor]?this.dataKeyNames[this.ordinalAccessor]:this.xAxis.label;const s=this.yAxis.label&&this.yAxis.label!==""?this.yAxis.label:this.dataKeyNames&&this.dataKeyNames[this.valueAccessor]?this.dataKeyNames[this.valueAccessor]:this.yAxis.label;J({rootEle:this.parallelChartEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y?this.y:false,yAxisLabel:s?s:"",xAxisLabel:t?t:""})}drawBaseline(){ct({root:this.gridG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0),hide:!this.showBaselineX,duration:this.duration})}drawXGrid(){ut(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,false,this.xAxis.tickInterval,this.duration)}drawYGrid(){ut(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval,this.duration)}enterChartLines(){this.enterLines.interrupt();this.enterLines.attr("class","parallel-plot entering").attr("d",(t=>this.line(t.values))).attr("data-d",(t=>this.line(t.values))).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top);this.enterLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onHoverHandler(t.values[0],i[s])}}:null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null).attr("stroke-dasharray",((t,s,i)=>{t.linelength=i[s].getTotalLength();return t.linelength+" "+t.linelength})).attr("stroke",this.handleLineStroke).attr("fill","none").attr("stroke-width",.1)}updateChartLines(){this.updateLines.interrupt();this.updateLines.transition().duration(this.duration).ease(w).attr("stroke-dashoffset",0).attr("stroke-width",(t=>this.calculateStrokeWidth(t,true))).call(Lt,(()=>{this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}));this.updateLines.transition("opacity").ease(w).duration(this.duration).attr("opacity",(t=>{const s=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;if(!this.seriesInteraction){return s}else if(this.secondaryLines.keys.includes(t.key)){return rt(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}else{return rt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}}))}exitChartLines(){this.exitLines.interrupt();this.exitLines.attr("stroke-dasharray",((t,s,i)=>{t.linelength=i[s].getTotalLength();return t.linelength+" "+t.linelength})).transition("exit").ease(w).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",(t=>t.linelength)).attr("stroke-width",.1).remove()}drawChartLines(){if(this.interpolating){this.updateLines.attr("d",((t,s,i)=>{if(o(i[s]).classed("entering")){return this.line(t.values)}return this.interpolating.line(t.interpolate.start)}))}this.updateLines.attr("stroke-width",(t=>this.calculateStrokeWidth(t,true))).attr("stroke-dashoffset",(t=>t.linelength)).attr("data-d",(t=>this.interpolating?this.line(t.interpolate.end):this.line(t.values))).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(w).duration(this.duration).attr("d",(t=>this.interpolating?this.line(t.interpolate.end):this.line(t.values))).call(Lt,(()=>{this.updateLines.classed("entering",false).attr("data-d",(t=>this.line(t.values))).attr("d",(t=>this.line(t.values))).attr("stroke-dasharray",this.handleStrokeDasharray)}))}enterPoints(){this.enterDots.interrupt();this.enterDotWrappers.attr("class","parallel-dot-wrapper").attr("opacity",0).attr("fill",((t,s)=>this.rawColors[s]||this.rawColors[0])).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onSeriesHoverHandler(t.values[0],i[s])}}:null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null).each(((t,s,i)=>{F(i[s])}));this.enterDots.each(((t,s,i)=>{F(i[s])})).attr("stroke",this.handleDotStroke).attr("cursor",!this.suppressEvents?this.cursor:null).attr("data-fill",true).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s]):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);if(this.interpolating){this.enterDots.attr("cx",(t=>this.interpolating.x(t[this.ordinalAccessor]))).attr("cy",this.interpolateDynamicY).attr("r",(t=>t.enter?0:lt(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):ot(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("stroke-width",(t=>this.calculateStrokeWidth(t)));this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",(t=>this.x(t[this.ordinalAccessor]))).attr("cy",this.dynamicY).attr("opacity",0)}this.updateDotWrappers.order();this.updateDots.order()}updatePoints(){this.updateDots.interrupt();const t=this.showDots?1:0;this.updateDots.attr("tabindex",((t,s)=>s===0?"0":"-1"));this.updateDotWrappers.attr("opacity",(s=>{const i=this.secondaryLines.keys.includes(s.key)?this.secondaryLines.opacity:t;return i}));if(this.interpolating){this.updateDots.attr("opacity",(t=>{this.exitSize+=t.exit?1:0;this.enterSize+=t.enter?1:0;return t.enter?0:1}));this.updateDots=this.updateDotWrappers.selectAll("circle").data((t=>t.interpolate.end)).classed("exiting",(t=>t.exit));this.enterDotWrappers.selectAll("circle").each((t=>{t.enterWholeGroup=true}));this.updateDots.transition("opacity").ease(w).duration((t=>{if(t.enterWholeGroup){return this.duration/2}return this.duration})).delay(((t,s,i)=>{if(t.enterWholeGroup){return this.duration*.75*(s/(i.length-1))}return 0})).attr("opacity",(s=>rt(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)))}else{this.updateDots.transition("opacity").ease(w).duration(this.duration).attr("opacity",(s=>rt(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)))}}exitPoints(){this.exitDots.interrupt();this.exitDots.transition("exit").ease(w).duration(this.duration).attr("opacity",0).attr("r",0);this.exitDotWrappers.selectAll("circle").each((t=>{t.exitWholeGroup=true})).transition("exit").ease(w).duration(this.duration/2).delay(((t,s,i)=>this.duration-this.duration*(s/(i.length-1)))).attr("opacity",0).attr("r",0);this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay(((t,s,i)=>this.duration-this.duration*(s/(i.length-1)))).ease(w).call(Lt,(()=>{const t=st(this.rootG.node());this.exitDots.remove();this.exitDotWrappers.remove();this.svg.selectAll(".exiting").remove();this.updateDots=this.updateDotWrappers.selectAll("circle");this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel");this.setChartCountAccessibility();this.setGroupAccessibilityID();this.setGeometryAriaLabels();tt({parentGNode:this.rootG.node(),focusDidExist:t})}))}drawPoints(){let t;if(this.interpolating){t=this.updateDots.attr("data-cx",(t=>this.x(t[this.ordinalAccessor]))).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",(t=>t.exit?0:lt(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):ot(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).transition("update").ease(w).duration((t=>{if(t.enterWholeGroup){return this.duration/2}return this.duration})).delay(((t,s,i)=>{if(t.enterWholeGroup){return this.duration*.75*(s/(i.length-1))}return 0})).attr("r",(t=>t.exit?0:lt(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):ot(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("stroke-width",(t=>this.calculateStrokeWidth(t)))}else{t=this.updateDots.attr("data-cx",(t=>this.x(t[this.ordinalAccessor]))).attr("data-cy",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-r",(t=>lt(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):ot(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("r",(t=>lt(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):ot(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)).attr("stroke-width",(t=>this.calculateStrokeWidth(t))).transition("update").ease(w).duration(this.duration)}this.updateDots.attr("stroke",this.handleDotStroke);t.attr("cx",(t=>this.x(t[this.ordinalAccessor]))).attr("cy",this.dynamicY).call(Lt,(()=>{this.updateDots.each((t=>{t.enterWholeGroup=false;t.enter=false}));tt({parentGNode:this.rootG.node()});this.transitionEndEvent.emit({chartID:this.chartID})}))}enterSeriesLabels(){this.seriesLabelEnter.interrupt();this.seriesLabelEnter.attr("class","parallel-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onSeriesHoverHandler(t.values[0],i[s])}}:null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>{if(this.yAxis.scales==="individual"){return this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor])}return this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor]):this.y(t.values[0][this.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em").attr("text-anchor",this.isRight?"start":"end").attr("opacity",(t=>{const s=!this.seriesLabel.visible?0:this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return rt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:Number.EPSILON}))}updateSeriesLabels(){this.seriesLabelUpdate.interrupt();this.seriesLabelUpdate.transition("opacity").ease(w).duration(this.duration).attr("opacity",(t=>{const s=!this.seriesLabel.visible?0:this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;if(!this.seriesInteraction){return s}else if(this.secondaryLines.keys.includes(t.key)){return rt(t.values[0],s,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}else{return rt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}}))}exitSeriesLabels(){this.seriesLabelExit.interrupt();this.seriesLabelExit.transition("update").ease(w).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(){const t=this.labelDetails.placement!=="auto"&&this.labelDetails.collisionHideOnly;const s=this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill).text(((t,s)=>this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showSeriesLabel?"":this.labelDetails.label?this.labelDetails.label[s]:!t.key||t.key==="undefined"?"":t.key)).style("visibility",((t,s,i)=>this.labelDetails.placement==="auto"||this.labelDetails.collisionHideOnly?o(i[s]).style("visibility"):null)).attr("data-x",this.isRight?this.innerPaddedWidth+10:0).attr("data-y",((t,s,i)=>{const h=i[s];const e=getComputedStyle(h);const a=parseFloat(e.fontSize);const r=Math.max(a-1,1);if(this.yAxis.scales==="individual"){return this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor])}return this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor])+.4*r:this.y(t.values[0][this.valueAccessor])+.4*r})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em").attr("data-use-dx",t).attr("data-use-dy",t).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-text-anchor",this.isRight?"start":"end").transition("update").ease(w).duration(this.duration);if(this.labelDetails.visible&&(this.labelDetails.placement==="auto"||this.labelDetails.collisionHideOnly)){this.bitmaps=Pt({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[this.updateDots],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,4,4],accessors:["key"],size:[Dt(this.width,0),Dt(this.height,0)],hideOnly:this.labelDetails.visible&&t});if(t){s.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>{if(this.yAxis.scales==="individual"){return this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor])}return this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor]):this.y(t.values[0][this.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em")}}else{s.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>{if(this.yAxis.scales==="individual"){return this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor])}return this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor]):this.y(t.values[0][this.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em")}}enterDataLabels(){this.enteringLabels.interrupt();this.enteringLabelGroups.attr("class","parallel-label-wrapper").attr("opacity",0).attr("fill",((t,s)=>this.rawColors[s]||this.rawColors[0]));this.enteringLabels.attr("opacity",0).attr("fill",this.handleTextFill).attr("class","parallel-dataLabel").attr("cursor",!this.suppressEvents?this.cursor:null).on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s]):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);if(this.interpolating){const t=this.enteringLabels.attr("class","parallel-dataLabel").attr("opacity",Number.EPSILON);At({root:t,xScale:this.interpolating.x,yScale:this.interpolateDynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"});this.updatingLabels.attr("opacity",(t=>t.enter?Number.EPSILON:1));const s=this.enteringLabelGroups.selectAll(".parallel-dataLabel").attr("opacity",Number.EPSILON);At({root:s,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}else{const t=this.enteringLabels.attr("opacity",Number.EPSILON).attr("class","parallel-dataLabel");At({root:t,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}if(this.dataLabel.placement==="auto"){this.updatingLabels.each(((t,s,i)=>{if(!t.enter&&!t.exit&&!t.hidden&&(t["auto-x"]||t["auto-x"]===0)&&(t["auto-y"]||t["auto-y"]===0)){o(i[s]).attr("x",+o(i[s]).attr("x")+(+t["auto-x"]||0)).attr("y",+o(i[s]).attr("y")+(+t["auto-y"]||0)).attr("text-anchor",t["auto-text-anchor"])}}))}}updateDataLabels(){this.updatingLabelGroups.interrupt();this.updatingLabelGroups.attr("opacity",(t=>{const s=!this.dataLabel.visible?0:this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1;return s}));if(this.interpolating){this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((t=>t.interpolate.end)).classed("exiting",(t=>t.exit));this.enteringLabelGroups.each((t=>t.enterWholeGroup=true));this.updatingLabels.transition("opacity").ease(w).duration((t=>{if(t.enterWholeGroup){return this.duration/2}return this.duration})).delay(((t,s,i)=>{if(t.enterWholeGroup){return this.duration*.75*(s/(i.length-1))}return 0})).attr("opacity",((t,s,i)=>{const h=t.exit?0:rt(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;const e=+o(i[s].parentNode).attr("opacity");o(i[s]).attr("data-hidden",e===0||h===0?"true":null);return h}))}else{this.updatingLabels.attr("opacity",((t,s,i)=>{const h=t.exit?0:rt(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;const e=+o(i[s].parentNode).attr("opacity");o(i[s]).attr("data-hidden",e===0||h===0?"true":null);return h}))}}exitDataLabels(){this.exitingLabels.interrupt();this.exitingLabels.transition("exit").ease(w).duration(this.duration).attr("opacity",0).remove();this.exitingLabelGroups.selectAll(".parallel-dataLabel").transition("exit").ease(w).duration(this.duration/2).delay(((t,s,i)=>this.duration-this.duration*(s/(i.length-1)))).attr("opacity",0).call(Lt,(()=>{this.exitingLabelGroups.remove()}))}drawDataLabels(){const t=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;let s=this.updatingLabels.text((t=>yt(t,this.innerLabelAccessor,this.dataLabel.format)));if(this.interpolating){s=this.updatingLabels.style("visibility",((t,s,i)=>this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly?t.hidden?"hidden":o(i[s]).style("visibility"):null)).attr("data-x",(t=>this.interpolating.x(t[this.ordinalAccessor]))).attr("data-y",this.interpolateDynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(w).duration((t=>{if(t.enterWholeGroup){return this.duration/2}return this.duration})).delay(((t,s,i)=>{if(t.enterWholeGroup){return this.duration*.75*(s/(i.length-1))}return 0}))}else{s=this.updatingLabels.style("visibility",((t,s,i)=>this.dataLabel.placement==="auto"||this.dataLabel.collisionHideOnly?t.hidden?"hidden":o(i[s]).style("visibility"):null)).attr("data-x",(t=>this.x(t[this.ordinalAccessor]))).attr("data-y",this.dynamicY).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).transition("update").ease(w).duration(this.duration)}const i=this.gridG.selectAll("line").attr("data-y2",this.innerPaddedHeight).attr("data-y1",0).attr("data-translate-x",this.margin.left+this.padding.left).attr("data-translate-y",this.margin.top+this.padding.top).attr("data-x1",(t=>this.x(t))).attr("data-x2",(t=>this.x(t)));const h=this.yUpdate.selectAll(".y.axis").filter(((t,s,i)=>+o(i[s]).attr("opacity")>=1e-4)).selectAll("text").attr("data-fill",true).attr("data-y",(t=>this.y(t))).attr("data-width",((t,s,i)=>{const h=i[s];const e=getComputedStyle(h);const a=parseFloat(e.fontSize);const r=Math.max(a-1,1);const l=Ot(h.textContent,a,true,e.fontFamily);o(h).attr("data-x",+o(h).attr("x")).attr("data-translate-x",this.margin.left+this.padding.left-l).attr("data-translate-y",this.margin.top+this.padding.top-r/2).attr("data-height",r);return l}));const e=this.dataLabel&&this.dataLabel.collisionPlacement;const a=t?["middle"]:e&&this.collisionSettings[e]?this.collisionSettings[e].validPositions:this.collisionSettings["all"].validPositions;const r=t?[1]:e&&this.collisionSettings[e]?this.collisionSettings[e].offsets:this.collisionSettings["all"].offsets;this.bitmaps=At({root:s,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",labelSelection:s,avoidMarks:[h,i,this.updateLines,this.updateDots],validPositions:a,offsets:r,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[Dt(this.width,0),Dt(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly}});s.call(Lt,(()=>{this.hiddenHash={};this.updatingLabels.each(((t,s,i)=>{this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":o(i[s]).attr("data-label-hidden")==="true",x:+o(i[s]).attr("x")-+o(i[s]).attr("data-x"),y:+o(i[s]).attr("y")-+o(i[s]).attr("data-y"),"text-anchor":o(i[s]).attr("text-anchor")}}))}))}updateInteractionState(){this.updateLines.interrupt("opacity");this.updateLines.attr("opacity",(t=>{const s=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;if(!this.seriesInteraction){return s}else if(this.secondaryLines.keys.includes(t.key)){return rt(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}else{return rt(t.values[0],s,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)}}));const t=this.showDots?1:0;this.updateDotWrappers.attr("opacity",(s=>{const i=this.secondaryLines.keys.includes(s.key)?this.secondaryLines.opacity:t;return i}));this.updateDots.each(((s,i,h)=>{if(!s.enter&&!s.enterWholeGroup&&!s.exit&&!s.exitWholeGroup){o(h[i]).attr("opacity",(()=>rt(s,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)))}}));tt({parentGNode:this.rootG.node()});ft({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setSeriesLabelOpacity(){const t=this.labelDetails.placement!=="auto"&&this.labelDetails.collisionHideOnly;const s=this.labelDetails.placement==="auto"||t;this.seriesLabelUpdate.each(((s,i,h)=>{const e=o(h[i]);const a=+e.attr("opacity");const r=e.style("visibility");if(!e.classed("entering")){e.attr("opacity",(()=>{const l=(!this.seriesLabel.visible?0:this.secondaryLines.keys.includes(s.key)?this.secondaryLines.opacity:1)<1?0:1;const n=+o(h[i].parentNode).attr("opacity");e.attr("data-hidden",n===0||l===0?"true":null);if(!this.seriesInteraction){o(h[i]).attr("data-hidden",l===0?"true":null);if(a!==l&&(this.labelDetails.placement==="auto"||t)){if(l===1){o(h[i]).classed("collision-added",true).style("visibility",null)}else{o(h[i]).classed("collision-removed",true)}}return l}else if(this.secondaryLines.keys.includes(s.key)){const e=rt(s.values[0],l,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;o(h[i]).attr("data-hidden",e===0?"true":null);if((e===1&&r==="hidden"||a!==e)&&(this.labelDetails.placement==="auto"||t)){if(e===1){o(h[i]).classed("collision-added",true).style("visibility",null)}else{o(h[i]).classed("collision-removed",true)}}return e}else{const e=rt(s.values[0],l,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;o(h[i]).attr("data-hidden",e===0?"true":null);if((e===1&&r==="hidden"||a!==e)&&(this.labelDetails.placement==="auto"||t)){if(e===1){o(h[i]).classed("collision-added",true).style("visibility",null)}else{o(h[i]).classed("collision-removed",true)}}return e}}))}}));if(s){const s=this.seriesLabelUpdate.filter(((t,s,i)=>o(i[s]).classed("collision-added"))).attr("data-text-anchor",((t,s,i)=>o(i[s]).attr("collision-text-anchor")||o(i[s]).attr("data-text-anchor"))).attr("collision-text-anchor",null);const i=this.seriesLabelUpdate.filter(((t,s,i)=>o(i[s]).classed("collision-removed"))).attr("data-use-dx",t).attr("data-use-dy",t).attr("keep-data-y",t).attr("collision-text-anchor",((t,s,i)=>o(i[s]).attr("data-text-anchor"))).attr("data-text-anchor",null);if(i.size()>0){this.bitmaps=Pt({bitmaps:this.bitmaps,labelSelection:i,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Dt(this.width,0),Dt(this.height,0)],hideOnly:false,removeOnly:true});i.classed("collision-removed",false).attr("keep-data-y",null)}if(s.size()>0){this.bitmaps=Pt({bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[this.updateDots],validPositions:t?["middle"]:["middle","top","bottom"],offsets:t?[1]:[1,4,4],accessors:["key"],size:[Dt(this.width,0),Dt(this.height,0)],hideOnly:this.labelDetails.visible&&t});if(t){s.attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth+10:0).attr("y",(t=>{if(this.yAxis.scales==="individual"){return this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor])}return this.isRight?this.y(t.values[t.values.length-1][this.valueAccessor]):this.y(t.values[0][this.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.5em")}s.classed("collision-added",false)}}}setLabelOpacity(){const t=this.dataLabel.placement!=="auto"&&this.dataLabel.collisionHideOnly;const s=this.dataLabel.placement==="auto"||t;const i=this.dataLabel&&this.dataLabel.collisionPlacement;this.updatingLabelGroups.attr("opacity",(t=>(!this.dataLabel.visible?0:this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1)<1?0:1));this.updatingLabels.each(((s,i,h)=>{const e=+o(h[i]).attr("opacity");const a=o(h[i]).style("visibility");if(!s.enter&&!s.enterWholeGroup&&!s.exit&&!s.exitWholeGroup){o(h[i]).attr("opacity",(()=>{const r=rt(s,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1;const l=+o(h[i].parentNode).attr("opacity");o(h[i]).attr("data-hidden",l===0||r===0?"true":null);if((r===1&&a==="hidden"||e!==r)&&(this.dataLabel.placement==="auto"||t)){if(r===1){o(h[i]).classed("collision-added",true).style("visibility",null)}else{o(h[i]).classed("collision-removed",true)}}return r}))}}));if(s){const s=this.updatingLabels.filter(((t,s,i)=>o(i[s]).classed("collision-added"))).transition().duration(0);const h=this.updatingLabels.filter(((t,s,i)=>o(i[s]).classed("collision-removed"))).attr("data-use-dx",t).attr("data-use-dy",t);const e=t?["middle"]:i&&this.collisionSettings[i]?this.collisionSettings[i].validPositions:this.collisionSettings["all"].validPositions;const a=t?[1]:i&&this.collisionSettings[i]?this.collisionSettings[i].offsets:this.collisionSettings["all"].offsets;if(h.size()>0){this.bitmaps=Pt({bitmaps:this.bitmaps,labelSelection:h,avoidMarks:[],validPositions:["middle"],offsets:[1],accessors:["key"],size:[Dt(this.width,0),Dt(this.height,0)],hideOnly:false,removeOnly:true});h.classed("collision-removed",false)}if(s.size()>0){this.bitmaps=At({root:s,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel",avoidCollision:{runOccupancyBitmap:this.dataLabel.visible&&this.dataLabel.placement==="auto",bitmaps:this.bitmaps,labelSelection:s,avoidMarks:[this.updateLines,this.updateDots],validPositions:e,offsets:a,accessors:[this.ordinalAccessor,this.seriesAccessor,"key"],size:[Dt(this.width,0),Dt(this.height,0)],hideOnly:this.dataLabel.visible&&this.dataLabel.collisionHideOnly,suppressMarkDraw:true}});s.call(Lt,(()=>{this.updatingLabels.each(((t,s,i)=>{o(i[s]).classed("collision-added",false);this.hiddenHash[`${t[this.ordinalAccessor]}-${t[this.seriesAccessor]||"b"}`]={"data-label-hidden":o(i[s]).attr("data-label-hidden")==="true",x:+o(i[s]).attr("x")-+o(i[s]).attr("data-x"),y:+o(i[s]).attr("y")-+o(i[s]).attr("data-y"),"text-anchor":o(i[s]).attr("text-anchor")}}))}))}}}bindInteractivity(){this.updateLines.on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onHoverHandler(t.values[0],i[s])}}:null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);this.updateDots.on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s]):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);this.dotG.selectAll(".parallel-dot-wrapper").on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onSeriesHoverHandler(t.values[0],i[s])}}:null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?(t,s,i)=>{if(t.values){this.onSeriesHoverHandler(t.values[0],i[s])}}:null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null);this.updatingLabels.on("click",!this.suppressEvents?(t,s,i)=>this.onClickHandler(t,i[s]):null).on("mouseover",!this.suppressEvents?(t,s,i)=>this.onHoverHandler(t,i[s]):null).on("mouseout",!this.suppressEvents?()=>this.onMouseOutHandler():null)}addStrokeUnder(){const t=E({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t);this.seriesLabelG.attr("filter",t)}updateColors(){this.updateDotWrappers.attr("fill",((t,s)=>this.rawColors[s]||this.rawColors[0]));this.updateDots.attr("stroke",this.handleDotStroke);this.updateLines.attr("stroke",this.handleLineStroke);this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill);this.updatingLabelGroups.attr("fill",((t,s)=>this.rawColors[s]||this.rawColors[0]));this.updatingLabels.attr("fill",this.handleTextFill)}updateCursor(){this.updateLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updateDots.attr("cursor",!this.suppressEvents?this.cursor:null);this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updatingLabels.attr("cursor",!this.suppressEvents?this.cursor:null)}updateStrokeWidth(){this.updateLines.attr("stroke-width",(t=>this.calculateStrokeWidth(t,true)));this.updateDots.attr("stroke",this.handleDotStroke)}updateStrokePattern(){this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}updateDotRadius(){this.updateDots.each(((t,s,i)=>{const h=o(i[s]);if(!t.enter&&!t.enterWholeGroup&&!h.classed("entering")&&!t.exit){h.attr("r",(()=>lt(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):ot(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2))}})).attr("stroke",this.handleDotStroke)}setSelectedClass(){this.updateDots.classed("highlight",((t,s,i)=>{let h=rt(t,true,false,"",this.clickHighlight,this.innerInteractionKeys);h=this.clickHighlight&&this.clickHighlight.length?h:false;const e=this.accessibility.elementsAreInterface;it(i[s],h,e);return h}))}drawAnnotations(){et({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor,width:this.width,height:this.height,padding:this.padding,margin:this.margin,bitmaps:this.bitmaps})}setAnnotationAccessibility(){Z(this.getLanguageString(),this.parallelChartEl,this.annotations,undefined)}setTagLevels(){this.topLevel=N(this.highestHeadingLevel);this.bottomLevel=N(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){z({language:this.getLanguageString(),rootEle:this.parallelChartEl,title:this.accessibility.title||this.mainTitle,chartTag:"parallel-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled,hideDataTable:this.accessibility.hideDataTableButton});this.shouldRedrawWrapper=false}setParentSVGAccessibility(){H({chartTag:"parallel-plot",language:this.getLanguageString(),node:this.svg.node(),title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:this.innerScopeDataKeys(),dataKeyNames:this.dataKeyNames,groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.updateDots.each(((t,s,i)=>{F(i[s])}))}setGeometryAriaLabels(){const t=this.innerScopeDataKeys();this.updateDots.each(((s,i,h)=>{K({chartTag:"parallel-plot",language:this.getLanguageString(),node:h[i],geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,dataKeyNames:this.dataKeyNames,groupName:"line",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});$({node:h[i],uniqueID:this.chartID})}))}setGroupAccessibilityID(){this.updateDotWrappers.each(((t,s,i)=>{$({node:i[s],uniqueID:this.chartID})}))}setChartAccessibilityTitle(){M(this.getLanguageString(),this.parallelChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){q(this.getLanguageString(),this.parallelChartEl,this.subTitle)}setChartAccessibilityLongDescription(){R(this.getLanguageString(),this.parallelChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){X(this.getLanguageString(),this.parallelChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){B(this.getLanguageString(),this.parallelChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){Y(this.getLanguageString(),this.parallelChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){V(this.getLanguageString(),this.parallelChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){_({rootEle:this.parallelChartEl,parentGNode:this.dotG.node(),chartTag:"parallel-plot",geomType:"point",groupName:"line"})}setChartAccessibilityStructureNotes(){Q(this.getLanguageString(),this.parallelChartEl,this.accessibility.structureNotes)}onChangeHandler(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){const t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.interpolating=false;this.updated=false;this.enterSize=0;this.exitSize=0}onClickHandler(t,s){this.clickEvent.emit({data:t,target:s})}onHoverHandler(t,s){kt(this.chartID,true);this.hoverEvent.emit({data:t,target:s});if(this.showTooltip&&t[this.ordinalAccessor]){this.eventsTooltip({data:t,evt:n,isToShow:true})}}onSeriesHoverHandler(t,s){this.hoverEvent.emit({data:t,target:s})}onMouseOutHandler(){kt(this.chartID,false);this.mouseOutEvent.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}}setTooltipInitialStyle(){xt(this.tooltipG)}eventsTooltip({data:t,evt:s,isToShow:i}){pt({root:this.tooltipG,data:t,event:s,isToShow:i,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,dataKeyNames:this.dataKeyNames,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"parallel"})}bindLegendInteractivity(){o(this.parallelChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?(t,s,i)=>{if(t.values){this.onClickHandler(t.values[0],i[s])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?(t,s,i)=>{if(t.values){this.hoverEvent.emit({data:t.values[0],target:i[s]})}}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive?()=>this.onMouseOutHandler():null)}setLegendCursor(){o(this.parallelChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)}drawLegendElements(){const t=this.seriesAccessor===L.seriesAccessor&&this.nest&&this.nest.length===1&&this.nest[0].key==="undefined";dt({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:!this.accessibility.hideTextures?this.dashPatterns:null,margin:this.margin,padding:this.padding,duration:this.duration,type:"parallel",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible&&!t||!this.legend||!this.seriesAccessor),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}render(){this.drawStartEvent.emit({chartID:this.chartID});this.init();if(this.shouldSetLocalizationConfig){this.setLocalizationConfig();this.shouldSetLocalizationConfig=false}if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldSetScaleUsed){this.setScaleUsed();this.shouldSetScaleUsed=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateInterpolationData){this.updateInterpolationData();this.shouldUpdateInterpolationData=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidateLocalizationProps();this.shouldValidate=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateSeriesLabels){this.validateSeriesLabels();this.shouldValidateSeriesLabels=false}return i("div",{key:"21f04fc5663d29280f4f081a07e36e111f743b44",class:"o-layout"},i("div",{key:"d6de1ee8a95bb68d26ba6fd1990dac1f54467ed7",class:"o-layout--chart"},i(this.topLevel,{key:"679e3d1ca83f25db78510e9da6a1debb93abc105",class:"parallel-main-title vcl-main-title"},this.mainTitle),i(this.bottomLevel,{key:"bdf40ba23e9bdcb6257fc745726818a6ba51a295",class:"visa-ui-text--instructions parallel-sub-title vcl-sub-title"}),i("div",{key:"16923267e987a955c7f9eb5e6cf17dfedb156698",class:"parallel-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),i("keyboard-instructions",{key:"a57d84c4abafcd22d8965922ef1ca629e69d225f",uniqueID:this.chartID,geomType:"point",groupName:"line",language:this.getLanguageString(),chartTag:"parallel-plot",width:this.width-(this.margin?this.margin.right||0:0),isInteractive:this.accessibility.elementsAreInterface,hasCousinNavigation:true,disabled:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),i("div",{key:"092fb1709f6af03a0058a83435aead61443eaa81",class:"visa-viz-d3-parallel-container"}),i("div",{key:"6ed5a6d56c8a420e92117146a585480411dfd8c2",class:"parallel-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),i("data-table",{key:"ea329e3d995e5512835a12533afe55bd262dfc00",uniqueID:this.chartID,isCompact:true,language:this.getLanguageString(),tableColumns:this.tableColumns,dataKeyNames:this.dataKeyNames,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(L);let s=0;const i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(s=0;s<t.length;s++){const h=!i[t[s]]?false:this[t[s]]===i[t[s]].exception;this[t[s]]=this[t[s]]||h?this[t[s]]:L[t[s]]}}get parallelChartEl(){return h(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],lineCurve:["lineCurveWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],localization:["localizationWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],dataKeyNames:["dataKeyNamesWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}};window["VisaChartsLibOSSLicenses"]=bt();Et.style=T;export{Et as parallel_plot};
//# sourceMappingURL=p-58241d6f.entry.js.map